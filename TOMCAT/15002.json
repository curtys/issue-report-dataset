{
    "comments": [
        {
            "author": null,
            "body": "The path of a tag file is now reflected in the directory in which the\ncorresponding tag handler is stored, and in the name of the package to\nwhich the tag handler is assigned.\n\nThis change also avoids conflicts between tag files with the same name\nand path under /META-INF/tags/ and /WEB-INF/tags/, by adding \"meta\" or\n\"web\", respectively, to the directory and package names of the\nrespective tag handlers.",
            "date": "20021202T19:29:54",
            "id": 0
        },
        {
            "author": null,
            "body": "*** Bug 14741 has been marked as a duplicate of this bug. ***",
            "date": "20021202T19:52:46",
            "id": 1
        },
        {
            "author": null,
            "body": "This fix breaks ALL tag files with the latest checkout from cvs you get this\nif you run the Hello World tag file example :\n\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\tat org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:564)\n\tat org.apache.jasper.servlet.JspServletWrapper.loadTagFile\n(JspServletWrapper.java:207)\n\tat org.apache.jasper.compiler.TagFileProcessor.loadTagFile\n(TagFileProcessor.java:388)\n\tat org.apache.jasper.compiler.TagFileProcessor.access$000\n(TagFileProcessor.java:83)\n\tat \norg.apache.jasper.compiler.TagFileProcessor$TagFileLoaderVisitor.visit\n(TagFileProcessor.java:430)\n\tat org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1038)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:1554)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:1596)\n\tat org.apache.jasper.compiler.Node$Visitor.visit(Node.java:1602)\n\tat org.apache.jasper.compiler.Node$Root.accept(Node.java:345)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:1554)\n\tat org.apache.jasper.compiler.TagFileProcessor.loadTagFiles\n(TagFileProcessor.java:448)\n\tat org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:285)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:413)\n\tat org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:558)\n\tat org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:289)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:295)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:280)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:194)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:277)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:490)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke\n(AuthenticatorBase.java:496)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:149)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:490)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2523)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:149)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:149)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:490)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:490)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\tat org.apache.coyote.tomcat5.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:432)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:386)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:534)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n\tat java.lang.Thread.run(Thread.java:536)\n\n\nroot cause \n\njava.io.FileNotFoundException: no such file: C:\\dev\\jakarta\\jakarta-tomcat-5\n\\build\\work\\Standalone\\localhost\\jsp-examples\\tags\\helloWorld.class\n\tat org.apache.jasper.compiler.SmapUtil$SDEInstaller.(SmapUtil.java:220)\n\tat org.apache.jasper.compiler.SmapUtil$SDEInstaller.install\n(SmapUtil.java:208)\n\tat org.apache.jasper.compiler.SmapUtil.installSmap(SmapUtil.java:147)\n\tat org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:404)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:414)\n\tat org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:558)\n\tat org.apache.jasper.servlet.JspServletWrapper.loadTagFile\n(JspServletWrapper.java:207)\n\tat org.apache.jasper.compiler.TagFileProcessor.loadTagFile\n(TagFileProcessor.java:388)\n\tat org.apache.jasper.compiler.TagFileProcessor.access$000\n(TagFileProcessor.java:83)\n\tat \norg.apache.jasper.compiler.TagFileProcessor$TagFileLoaderVisitor.visit\n(TagFileProcessor.java:430)\n\tat org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1038)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:1554)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:1596)\n\tat org.apache.jasper.compiler.Node$Visitor.visit(Node.java:1602)\n\tat org.apache.jasper.compiler.Node$Root.accept(Node.java:345)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:1554)\n\tat org.apache.jasper.compiler.TagFileProcessor.loadTagFiles\n(TagFileProcessor.java:448)\n\tat org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:285)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:413)\n\tat org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:558)\n\tat org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:289)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:295)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:280)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:194)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:277)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:490)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke\n(AuthenticatorBase.java:496)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:149)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:490)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2523)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:149)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:149)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:490)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:490)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\tat org.apache.coyote.tomcat5.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:432)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:386)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:534)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n\tat java.lang.Thread.run(Thread.java:536)\n\n",
            "date": "20021202T20:08:35",
            "id": 2
        },
        {
            "author": null,
            "body": "All the tag file examples of the jsp-examples webapp work for me.\nPlease make sure to remove your installation's scratch dir and to\ndo a clean build of jasper.\n",
            "date": "20021202T23:00:17",
            "id": 3
        },
        {
            "author": null,
            "body": "I tried building the whole of tomcat-5 from scratch on a different machine and \ngot the same error. \n\nAfter investigating it more it seems that the problem is that the tagfile java \nfile is being created in the wrong directory. When I hit the hello world tagfile\nexample the helloWorld.java is in this directory :\n\n\\Standalone\\localhost\\jsp-examples\\tags\n\nwhen it should be in \n\n\\Standalone\\localhost\\jsp-examples\\tags\\org\\apache\\jsp\\tag\\web\n\nAfter copying the java file to this directory and hitting the jsp again it works\n\nSo to reiterate i get this with a complete fresh checkout of all of tomcat-5.",
            "date": "20021203T14:43:38",
            "id": 4
        },
        {
            "author": null,
            "body": "I also get the same error as Richard, both for the JSP examples and for any tag \nfiles I write from scratch.  I am using the nightly build of Tomcat 5 on \nWindows NT 4.0, with clean directories.  It worked up until November 27 and \nstopped working after this fix was applied.",
            "date": "20021204T22:47:55",
            "id": 5
        },
        {
            "author": null,
            "body": "Looking into this. Problem must be related to file path separators on Windows.\nExamples work fine on Solaris.\n",
            "date": "20021205T00:00:06",
            "id": 6
        },
        {
            "author": null,
            "body": "I'm unable to reproduce this, so I assume it has been fixed, and just not \nupdated in Bugzilla.  Anyone who can reproduce it, please reopen.\n\nRunning a fresh checkout of Tomcat 5 on Windows XP, I was able to run all the \ntagfile examples in the jsp-examples webapp.\n\nI also tested the original problem case of /WEB-INF/tags/foo/test.tag and /WEB-\nINF/tags/bar/test.tag.  There was no sign of a conflict, and the tags compiled \nto <scratch_dir>/<appname>/org/apache/jsp/tag/web/foo/test.java and \n<scratch_dir>/<appname>/org/apache/jsp/tag/web/bar/test.java, respectively, as \nJan's note said they would.",
            "date": "20030719T00:53:05",
            "id": 7
        }
    ],
    "component": "Jasper",
    "description": "Tag files located in different directories must belong to different implicit tag\nlibraries.\n\nHowever, Jasper currently stores the corresponding tag handlers in the same\ndirectory (<web-app-name>/tagfiles/org/apache/jsp/tagfile/) and assigns them to\nthe same package.\n\nFor example, the tag handlers corresponding to\n\n  /WEB-INF/tags/foo/test.tag and\n  /WEB-INF/tags/bar/test.tag\n\nin a web application named \"webtest\" are both stored in \n\n  <scratch_dir>/webtest/tagfiles/org/apache/jsp/tagfile/test.java",
    "hasPatch": false,
    "hasScreenshot": false,
    "id": "15002",
    "issuetypeClassified": "BUG",
    "issuetypeTracker": "BUG",
    "priority": "P3 critical",
    "product": "Tomcat 5",
    "project": "TOMCAT",
    "summary": "Tag files in different directories not belonging to different tag libraries",
    "systemSpecification": true,
    "version": "Nightly Build"
}