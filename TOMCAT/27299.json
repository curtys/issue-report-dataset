{
    "comments": [
        {
            "author": null,
            "body": "This is indeed 100% specific to port 80. Other ports don't do that.",
            "date": "20040227T17:53:46",
            "id": 0
        },
        {
            "author": null,
            "body": "I committed an ugly fix for this issue (which, BTW, has a 100% rational\nexplanation: try http://localhost:80/).",
            "date": "20040229T22:53:35",
            "id": 1
        }
    ],
    "component": "Catalina",
    "description": "download and install jakarta-tomcat5.19.zip - feb 27 version\nSet environment CATALINA_HOME=C:\\Servers\\Tomcat-5.0.19\n  with port 8080 and no use of -security  - ok\n  with 8080 and -security in commandline - ok\n  \n  change server.xml to port 80 regular startup.bat\n  http://localhost/    - works fine\n\n  continue with server.xml port 80 with -security in startup.bat command line\n  \n try for  http://localhost/\n  no response, extended bunch of errors in command prompt window, \n  the total log is:\n\n2004-02-27 11:20:49 StandardContext[/balancer]org.apache.webapp.balancer.\nBalancerFilter: init(): ruleChain: [org.apache.webapp.balancer.RuleChain: [org.\napache.webapp.balancer.rules.URLStringMatchRule: Target string: News / Redirect \nURL: http://www.cnn.com], [org.apache.webapp.balancer.rules.\nRequestParameterRule: Target param name: paramName / Target param value: \nparamValue / Redirect URL: http://www.yahoo.com], [org.apache.webapp.balancer.\nrules.AcceptEverythingRule: Redirect URL: http://jakarta.apache.org]]\n2004-02-27 11:20:50 StandardContext[/jsp-examples]ContextListener: \ncontextInitialized()\n2004-02-27 11:20:50 StandardContext[/jsp-examples]SessionListener: \ncontextInitialized()\n2004-02-27 11:20:50 StandardContext[/servlets-examples]ContextListener: \ncontextInitialized()\n2004-02-27 11:20:50 StandardContext[/servlets-examples]SessionListener: \ncontextInitialized()\n2004-02-27 11:21:04 StandardWrapperValve[org.apache.jsp.index_jsp]: Servlet.\nservice() for servlet org.apache.jsp.index_jsp threw exception\njava.lang.NoClassDefFoundError: org/apache/tomcat/util/buf/HexUtils\n\tat org.apache.coyote.http11.filters.ChunkedOutputFilter.\ndoWrite(ChunkedOutputFilter.java:163)\n\tat org.apache.coyote.http11.InternalOutputBuffer.\ndoWrite(InternalOutputBuffer.java:612)\n\tat org.apache.coyote.Response.doWrite(Response.java:586)\n\tat org.apache.coyote.tomcat5.OutputBuffer.realWriteBytes(OutputBuffer.java:\n411)\n\tat org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:332)\n\tat org.apache.tomcat.util.buf.IntermediateOutputStream.write(C2BConverter.\njava:274)\n\tat sun.nio.cs.StreamEncoder$CharsetSE.writeBytes(StreamEncoder.java:336)\n\tat sun.nio.cs.StreamEncoder$CharsetSE.implFlushBuffer(StreamEncoder.java:\n404)\n\tat sun.nio.cs.StreamEncoder$CharsetSE.implFlush(StreamEncoder.java:408)\n\tat sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:152)\n\tat java.io.OutputStreamWriter.flush(OutputStreamWriter.java:213)\n\tat org.apache.tomcat.util.buf.WriteConvertor.flush(C2BConverter.java:223)\n\tat org.apache.tomcat.util.buf.C2BConverter.flushBuffer(C2BConverter.java:\n166)\n\tat org.apache.coyote.tomcat5.OutputBuffer.realWriteChars(OutputBuffer.java:\n613)\n\tat org.apache.tomcat.util.buf.CharChunk.append(CharChunk.java:298)\n\tat org.apache.coyote.tomcat5.OutputBuffer.write(OutputBuffer.java:518)\n\tat org.apache.coyote.tomcat5.CoyoteWriter.write(CoyoteWriter.java:165)\n\tat org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:\n161)\n\tat org.apache.jasper.runtime.JspWriterImpl.write(JspWriterImpl.java:368)\n\tat org.apache.jasper.runtime.JspWriterImpl.write(JspWriterImpl.java:379)\n\tat org.apache.jsp.index_jsp._jspService(index_jsp.java:50)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:133)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:856)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.\ninvoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:284)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAsPrivileged(Subject.java:500)\n\tat org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:306)\n\tat org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.\njava:200)\n\tat org.apache.catalina.core.ApplicationFilterChain.\ninternalDoFilter(ApplicationFilterChain.java:278)\n\tat org.apache.catalina.core.ApplicationFilterChain.\naccess$000(ApplicationFilterChain.java:97)\n\tat org.apache.catalina.core.ApplicationFilterChain$1.\nrun(ApplicationFilterChain.java:187)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat org.apache.catalina.core.ApplicationFilterChain.\ndoFilter(ApplicationFilterChain.java:183)\n\tat org.apache.catalina.core.StandardWrapperValve.\ninvoke(StandardWrapperValve.java:257)\n\tat org.apache.catalina.core.StandardValveContext.\ninvokeNext(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:\n567)\n\tat org.apache.catalina.core.StandardContextValve.\ninvokeInternal(StandardContextValve.java:245)\n\tat org.apache.catalina.core.StandardContextValve.\ninvoke(StandardContextValve.java:199)\n\tat org.apache.catalina.core.StandardValveContext.\ninvokeNext(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:\n567)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.\njava:184)\n\tat org.apache.catalina.core.StandardValveContext.\ninvokeNext(StandardValveContext.java:151)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.\njava:164)\n\tat org.apache.catalina.core.StandardValveContext.\ninvokeNext(StandardValveContext.java:149)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:\n567)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.\njava:156)\n\tat org.apache.catalina.core.StandardValveContext.\ninvokeNext(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:\n567)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:972)\n\tat org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:206)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:\n833)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.\nprocessConnection(Http11Protocol.java:732)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:\n619)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.\nrun(ThreadPool.java:688)\n\tat java.lang.Thread.run(Thread.java:534)\n------------------------\nI also observed this with release 5.0.18",
    "hasPatch": false,
    "hasScreenshot": false,
    "id": "27299",
    "issuetypeClassified": "BUG",
    "issuetypeTracker": "BUG",
    "priority": "P3 normal",
    "product": "Tomcat 5",
    "project": "TOMCAT",
    "summary": "Using -security and port 80 causes crash",
    "systemSpecification": true,
    "version": "5.0.19"
}