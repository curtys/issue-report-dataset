{
    "comments": [
        {
            "author": null,
            "body": "  BTW, I tried this with Tomcat 4.1.24 and the Jetspeed JSP Portlets work fine\nin that release.\n\nthx,\nGerry Reno\n",
            "date": "20030630T22:17:06",
            "id": 0
        },
        {
            "author": null,
            "body": "Please investigate this, and point out a TC 5 spec violation causing the wrong\nbehavior. I will close the report if a cause of this behavior cannot be\nidentiied, as it could be an application problem.",
            "date": "20030630T22:18:17",
            "id": 1
        },
        {
            "author": null,
            "body": "Remy,\n  Yes, I am not discounting the possibility that this could be some type of app\nproblem.  However, the app is working perfectly fine under 4.1.24 and not under\n5.0.3.  I would think that the specs that relate to rendering of JSP content\nwould be the same as the JSP content in question was JSP 1.2 only - nothing was\nJSP 2.0.  Therefore it seems as though one or the other of the containers is not\ncompliant.  The app also appears to work ok under Resin.  I am not a spec expert\nthat could pinpoint exactly this problem.  Perhaps there is someone else more\nfamiliar with the specs and the Tomcat and/or Jetspeed code that could assist here.\n\nthx,\nGerry Reno\n",
            "date": "20030630T23:31:34",
            "id": 2
        },
        {
            "author": null,
            "body": "I have tried this on win2k. The war file fails. If you expand the .war to\ndirectory form, then all is OK. \n\nIn .war form --> I get a zip exception. \n\nSo tomcat is OK with respect to running. The unpacking of the war is a different\nstory.\n\nFor thos curious, here is the part of the stack trace that might look important\nin case someone might have an immediate \"a ha!\":\nSEVERE: Exception processing JAR at resource path\nC:\\opt\\data\\src\\TOMCAT5\\jakarta-tomcat-5\\build\\webapps\\jetspeed\\WEB-INF\\lib\\jetspeed-1.4-b4.jar\nin context /jetspeed\njava.util.zip.ZipException: error in opening zip file\n\tat java.util.zip.ZipFile.open(Native Method)\n\tat java.util.zip.ZipFile.<init>(ZipFile.java:112)\n\tat java.util.jar.JarFile.<init>(JarFile.java:117)\n\tat java.util.jar.JarFile.<init>(JarFile.java:82)\n\tat org.apache.catalina.startup.TldConfig.tldScanJar(TldConfig.java:469)\n\tat org.apache.catalina.startup.TldConfig.tldScanJar(TldConfig.java:449)\n\tat org.apache.catalina.startup.TldConfig.execute(TldConfig.java:228)\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:4037)\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:868)\n",
            "date": "20030701T00:25:42",
            "id": 3
        },
        {
            "author": null,
            "body": "Tim,\n  All of the war files in all of my tests with 5.0.3 and 4.1.24 were\nfully expanded.  \n  What exactly are you saying?  Are you seeing the exact same problem? \nWhat did you mean when you say 'war file fails'?   If you meant you\njust got a zip exception are you thinking this is related to JSP\nPortlets not displaying?\n\n????\nGerry Reno",
            "date": "20030701T00:38:52",
            "id": 4
        },
        {
            "author": null,
            "body": "  Let me clarify this a little more.  Once you have installed the jetspeed.war\nfile go to the jetspeed home page http://localhost:8080/jetspeed .  Login as\nuser 'turbine', password 'turbine'.  Now, all the default portlets you see on\nthe page are Velocity Portlets.  You have to actually add JSP Portlets to the\npages before you can even begin to see the problem.   Click on the 'Edit HTML'\nlink and select Home then select 'Add Portlet' and from the list of portlets\nselect some of the JSP types such as JSP HelloWorld or JSP Stock Portfolio (on\nthe next page), save and apply your way out and then you should be able to see\nthe problem.\n\nthx,\nGerry Reno\n",
            "date": "20030701T01:36:48",
            "id": 5
        },
        {
            "author": null,
            "body": "I don't get the exception on the .war.",
            "date": "20030701T06:49:19",
            "id": 6
        },
        {
            "author": null,
            "body": "I can reproduce the behavior, but I don't know if it's caused by an actual\nTomcat or Jasper bug.\nIf I stop Tomcat and restart it, I can see the portlets. If I then add a new JSP\nportlet, none will get displayed (until I restart Tomcat).\n\nI recommend you debug this a bit more. I am not interested in Jetspeed, so\nunless you can point out some bad lower level behavior, I'll eventually close\nthe bug, assuming Jetspeed is doing something wrong at some point.",
            "date": "20030701T06:58:09",
            "id": 7
        },
        {
            "author": null,
            "body": "I just tried it (tomcat 5.0.3, JDK 1.4.1_03, Windows 2000, Jetspeed 1.4b4).  \nDropped jetspeed.war in running tomcat webapps directory.  Went to \nhttp://localhost:8080/jetspeed, browsed around, everything was fine.  Edited a \nfew panes, no problems.  Added JSP Portfolio portlet, didn't get an error, but \ndidn't see anything in the portlet (am I supposed to?).  Logged out of \njetspeed, went to tomcat manager, logged in, reloaded jetspeed webapp.  Tried \nto access http://localhost:8080/jetspeed, got following exception:\nHorrible Exception: java.lang.Error: Error in BasePeer.initTableSchema\n(TURBINE_USER): The database is already in use by another process at \norg.apache.jetspeed.om.security.turbine.BaseTurbineUserPeer.initClass\n(BaseTurbineUserPeer.java:154) at \norg.apache.jetspeed.om.security.turbine.BaseTurbineUserPeer.\n(BaseTurbineUserPeer.java:128) at \norg.apache.jetspeed.services.security.turbine.TurbineUserManagement.getUser\n(TurbineUserManagement.java:166) at \norg.apache.jetspeed.services.JetspeedUserManagement.getUser\n(JetspeedUserManagement.java:97) at \norg.apache.jetspeed.services.security.turbine.TurbineAuthentication.getAnonymous\nUser(TurbineAuthentication.java:212) at \norg.apache.jetspeed.services.JetspeedAuthentication.getAnonymousUser\n(JetspeedAuthentication.java:102) at \norg.apache.jetspeed.services.JetspeedSecurity.getAnonymousUser\n(JetspeedSecurity.java:174) at \norg.apache.jetspeed.modules.actions.TemplateSessionValidator.doPerform\n(TemplateSessionValidator.java:97) at \norg.apache.jetspeed.modules.actions.JetspeedSessionValidator.doPerform\n(JetspeedSessionValidator.java:103) at org.apache.turbine.modules.Action.perform\n(Action.java:87) at org.apache.turbine.modules.ActionLoader.exec\n(ActionLoader.java:122) at org.apache.turbine.Turbine.doGet(Turbine.java:521) \nat javax.servlet.http.HttpServlet.service(HttpServlet.java:743)",
            "date": "20030701T13:15:44",
            "id": 8
        },
        {
            "author": null,
            "body": "Following my post above, I restarted the tomcat server (restarting or reloading \nthe jetspeed application was insufficient), and logged back in.  I could see \nthe pane that I added with the same display (i.e. no data) in the JSP stock \nportfolio portlet.  That makes me think it's more likely a Jetspeed issue.",
            "date": "20030701T13:19:32",
            "id": 9
        },
        {
            "author": null,
            "body": "Yoav,\n  When you didn't see anything in the JSP Stock Portfolio portlet that is the\nproblem that needs fixed!!!   I not inclined one way or the other to say whose\nissue this is.  It could be either a Tomcat or a Jetspeed issue at this point. \nThe behavior doesn't occur in 4.1.24 or Resin so ????   This other exception\nthat you got by reloading jetspeed I have never seen before (on Linux) and I\nhave reloaded jetspeed several times.\n\nthx,\nGerry Reno\n",
            "date": "20030701T13:23:30",
            "id": 10
        },
        {
            "author": null,
            "body": "I have no idea if it's indeed a Jetspeed bug. I'd like to know if it can be\nreproduced using something other than Jetspeed (in which case it could indicate\na buffering or RD bug). At this point, I don't feel like digging into Jetspeed\nto get the answer ...",
            "date": "20030701T13:26:35",
            "id": 11
        },
        {
            "author": null,
            "body": "  I also opened a Jetspeed Bugzilla Bug 21232 on this issue and cross-referenced\nit to this bug.\n\nthx,\nGerry Reno\n",
            "date": "20030701T15:16:08",
            "id": 12
        },
        {
            "author": null,
            "body": "Since the root cause of this can't be identified yet, I'll have to close the\nreport soon as I can't do anything useful with it. Please reopen if you have\nmore information allowing to indentify the root cause of this problem.\n\nI have to add that the JSP is only processed by Jasper once Tomcat is restarted\n(and no dynamic changes have any effect), as the generated source and compiled\nclass for a JSP portlet are only created then. As the logs are empty, I do not\nbelieve Jasper is the cause of this problem.",
            "date": "20030803T10:32:10",
            "id": 13
        },
        {
            "author": null,
            "body": "  This is still a problem which completely prevents someone from using Jetspeed\nJSP Portlets and Tomcat 5.  I have not been able to find even a clue as to why\nthis is happening and the logs have been devoid of any information as to the\nsource of this problem.  I've looked at the portal page source and everything\nabout the JSP Portlets is created, title bar, colors, name, except for their JSP\ncontent which shows up as a single blank line.  Jetspeed JSP Portlets run\nperfectly under Tomcat 3 and 4 but for some reason not under 5.  I did open a\nJetspeed bug on the same issue but the Jetspeed team doesn't want to do anything\nabout investigating behavior with Tomcat 5 since it is still alpha. I don't\nthink any of their developers have even installed TC5 yet.  As far as the state\nfor this bug, I think it should remain open.  The only servlet container that is\nexhibiting any problem with JSP Portlets is Tomcat 5.  Other versions of Tomcat\nand Resin work just fine.  Perhaps some change from the servlet spec has led to\nthe problem.\n\nGerry Reno\n\n\n",
            "date": "20030803T17:13:09",
            "id": 14
        },
        {
            "author": null,
            "body": "Some progress: Jasper does get invoked in both scenarios through an include\n(with or without a server restart).\nHowever, in the first case, the processed JSP is:\n/portal/media-type/html/user/turbine/page/default.psml/media-type/html (bad)\nIn the second case, it is: /WEB-INF/templates/jsp/portlets/html/hello.jsp (good)\nI added a Thread.dumpStack in JspServlet.service, and the stack trace is\nidentical, so I don't understand how it could come from a RD dispatcher bug\n(which according to the stack trace is the only possible culprit).",
            "date": "20030804T19:24:58",
            "id": 15
        },
        {
            "author": null,
            "body": "The bug turned out to be a dumb bug in Jasper (after spending one more hour\ndebugging the RD ...). This will be fixed in 5.0.7 (or in the next nightly;\napplying the patch is trivial if you're using the CVS code).\nEasy workaround: After editing, you need to click on the \"home\" link on the\nleft, or access your portal through a URI which doesn't have a pathInfo. I'm\ndowngrading the severity of the bug.",
            "date": "20030804T20:22:10",
            "id": 16
        },
        {
            "author": null,
            "body": "Re-opening the bug.\n\nSetup:\nRedHat Linux 8.0\nJ2SE 1.4.2\nTomcat 5.0.7-alpha\nJetspeed 1.4-b4(release) and 1.4-b5-dev(from CVS)\n\n  I downloaded the new version of Tomcat 5.0.7-alpha that included the fix for\nthis bug and began testing it this morning.  There are still problems with the\nJSP Portlet compilation:  Here is the error output from a sample jsp portlet:\n\n Error encountered processing a template:\n/portlets/html/hello.jsporg.apache.jasper.JasperException: Unable to compile\nclass for JSP at\norg.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:561)\nat\norg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:300)\nat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:293) at\norg.apache.jasper.servlet.JspServlet.service(JspServlet.java:240) at\njavax.servlet.http.HttpServlet.service(HttpServlet.java:856) at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:286)\nat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat\norg.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:752)\nat\norg.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:640)\nat\norg.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:552)\nat\norg.apache.turbine.services.jsp.TurbineJspService.handleRequest(TurbineJspService.java:202)\nat\norg.apache.turbine.services.jsp.TurbineJspService.handleRequest(TurbineJspService.java:163)\nat\norg.apache.jetspeed.portal.portlets.viewprocessor.JSPViewProcessor.processView(JSPViewProcessor.java:170)\nat\norg.apache.jetspeed.portal.portlets.GenericMVCPortlet.buildContent(GenericMVCPortlet.java:301)\nat\norg.apache.jetspeed.portal.portlets.GenericMVCPortlet.getContent(GenericMVCPortlet.java:219)\nat\norg.apache.jetspeed.portal.security.portlets.PortletWrapper.getContent(PortletWrapper.java:148)\nat sun.reflect.GeneratedMethodAccessor194.invoke(Unknown Source) at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324) at\norg.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:260) at\norg.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:207)\nat\norg.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:250)\nat org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94) at\norg.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:109)\nat org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94) at\norg.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:109)\nat\norg.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\nat org.apache.velocity.Template.merge(Template.java:296) at\norg.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:492) at\norg.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:461) at\norg.apache.turbine.services.velocity.TurbineVelocityService.decodeRequest(TurbineVelocityService.java:494)\nat\norg.apache.turbine.services.velocity.TurbineVelocityService.handleRequest(TurbineVelocityService.java:336)\nat\norg.apache.turbine.services.velocity.TurbineVelocity.handleRequest(TurbineVelocity.java:143)\nat\norg.apache.jetspeed.portal.controls.VelocityPortletControl.getContent(VelocityPortletControl.java:170)\nat sun.reflect.GeneratedMethodAccessor190.invoke(Unknown Source) at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324) at\norg.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:260) at\norg.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:207)\nat\norg.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:250)\nat org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94) at\norg.apache.velocity.runtime.directive.Foreach.render(Foreach.java:344) at\norg.apache.velocity.runtime.parser.node.ASTDirective.render(ASTDirective.java:153)\nat org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94) at\norg.apache.velocity.runtime.directive.Foreach.render(Foreach.java:344) at\norg.apache.velocity.runtime.parser.node.ASTDirective.render(ASTDirective.java:153)\nat\norg.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\nat org.apache.velocity.Template.merge(Template.java:296) at\norg.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:492) at\norg.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:461) at\norg.apache.turbine.services.velocity.TurbineVelocityService.decodeRequest(TurbineVelocityService.java:494)\nat\norg.apache.turbine.services.velocity.TurbineVelocityService.handleRequest(TurbineVelocityService.java:336)\nat\norg.apache.turbine.services.velocity.TurbineVelocity.handleRequest(TurbineVelocity.java:143)\nat\norg.apache.jetspeed.portal.controllers.VelocityPortletController.getContent(VelocityPortletController.java:136)\nat org.apache.jetspeed.portal.BasePortletSet.getContent(BasePortletSet.java:379)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324) at\norg.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:260) at\norg.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:207)\nat\norg.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:250)\nat\norg.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\nat org.apache.velocity.Template.merge(Template.java:296) at\norg.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:492) at\norg.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:461) at\norg.apache.turbine.services.velocity.TurbineVelocityService.decodeRequest(TurbineVelocityService.java:494)\nat\norg.apache.turbine.services.velocity.TurbineVelocityService.handleRequest(TurbineVelocityService.java:336)\nat\norg.apache.turbine.services.velocity.TurbineVelocity.handleRequest(TurbineVelocity.java:143)\nat\norg.apache.jetspeed.portal.controllers.VelocityPortletController.getContent(VelocityPortletController.java:136)\nat org.apache.jetspeed.portal.BasePortletSet.getContent(BasePortletSet.java:379)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324) at\norg.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:260) at\norg.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:207)\nat\norg.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:250)\nat org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94) at\norg.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\nat\norg.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:128)\nat org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94) at\norg.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:109)\nat\norg.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\nat org.apache.velocity.Template.merge(Template.java:296) at\norg.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:492) at\norg.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:461) at\norg.apache.turbine.services.velocity.TurbineVelocityService.decodeRequest(TurbineVelocityService.java:494)\nat\norg.apache.turbine.services.velocity.TurbineVelocityService.handleRequest(TurbineVelocityService.java:336)\nat\norg.apache.turbine.services.velocity.TurbineVelocity.handleRequest(TurbineVelocity.java:143)\nat\norg.apache.jetspeed.portal.controls.VelocityPortletControl.getContent(VelocityPortletControl.java:170)\nat org.apache.jetspeed.util.template.JetspeedTool.getPane(JetspeedTool.java:181)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324) at\norg.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:260) at\norg.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:207)\nat\norg.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:250)\nat org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94) at\norg.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\nat\norg.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:128)\nat\norg.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\nat org.apache.velocity.Template.merge(Template.java:296) at\norg.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:492) at\norg.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:461) at\norg.apache.turbine.services.velocity.TurbineVelocityService.decodeRequest(TurbineVelocityService.java:494)\nat\norg.apache.turbine.services.velocity.TurbineVelocityService.handleRequest(TurbineVelocityService.java:336)\nat\norg.apache.turbine.services.velocity.TurbineVelocity.handleRequest(TurbineVelocity.java:143)\nat\norg.apache.turbine.modules.screens.VelocityDirectScreen.buildTemplate(VelocityDirectScreen.java:123)\nat\norg.apache.turbine.modules.screens.TemplateScreen.doBuild(TemplateScreen.java:130)\nat org.apache.turbine.modules.Screen.build(Screen.java:99) at\norg.apache.turbine.modules.ScreenLoader.eval(ScreenLoader.java:129) at\norg.apache.turbine.util.template.TemplateScreen.toString(TemplateScreen.java:126)\nat\norg.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:321)\nat\norg.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\nat org.apache.velocity.Template.merge(Template.java:296) at\norg.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:492) at\norg.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:461) at\norg.apache.turbine.services.velocity.TurbineVelocityService.decodeRequest(TurbineVelocityService.java:494)\nat\norg.apache.turbine.services.velocity.TurbineVelocityService.handleRequest(TurbineVelocityService.java:336)\nat\norg.apache.turbine.services.velocity.TurbineVelocity.handleRequest(TurbineVelocity.java:143)\nat\norg.apache.turbine.modules.layouts.VelocityDirectLayout.doBuild(VelocityDirectLayout.java:106)\nat org.apache.turbine.modules.Layout.build(Layout.java:91) at\norg.apache.turbine.modules.LayoutLoader.exec(LayoutLoader.java:123) at\norg.apache.turbine.modules.pages.DefaultPage.doBuild(DefaultPage.java:169) at\norg.apache.turbine.modules.Page.build(Page.java:90) at\norg.apache.turbine.modules.PageLoader.exec(PageLoader.java:123) at\norg.apache.turbine.Turbine.doGet(Turbine.java:563) at\njavax.servlet.http.HttpServlet.service(HttpServlet.java:743) at\njavax.servlet.http.HttpServlet.service(HttpServlet.java:856) at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:286)\nat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:254)\nat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)\nat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:564)\nat\norg.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:256)\nat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:210)\nat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)\nat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:564)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:190)\nat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:175)\nat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:149)\nat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:564)\nat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:156)\nat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)\nat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:564)\nat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:974) at\norg.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:207) at\norg.apache.coyote.http11.Http11Processor.process(Http11Processor.java:647) at\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:489)\nat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:575) at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:649)\nat java.lang.Thread.run(Thread.java:534) JSPViewProcessor: Could not include the\nfollowing JSP Page: [hello.jsp] : Error encountered processing a\ntemplate:/portlets/html/hello.jsp: Unable to compile class for JSP\n\n\n  So we took our portal back over to Tomcat 4.1.24 just to check and all JSP\nPortlets are still working fine there.\n\n  This is only happening for the Jetspeed JSP Portlets.  Everything else in\nJetspeed is working (with the exception of the xml parser which still requires\nloading xalan 2.5.1 jars into common/endorsed)\n\nGerry Reno",
            "date": "20030814T14:16:56",
            "id": 17
        },
        {
            "author": null,
            "body": "You likely have a problem compiling JSPs. This works for me. Please don't reopen\nthe bug, unless you can make a more convincing argument there's a Tomcat flaw.",
            "date": "20030815T19:49:01",
            "id": 18
        },
        {
            "author": null,
            "body": "Remy,\n\n  Ok, I'm sure I would have noticed if my normal JSP weren't compiling but just\nto be sure about whether JSPs would compile, I just now went through and clicked\non all the JSP examples provided with Tomcat 5.0.7 and every one of them is\nworking just fine. Granted they're not too complicated but I'm not seeing any\nproblem at all compiling JSPs so far with 5.0.7.  I went and dropped the\noriginal jetspeed.war into webapps and then added a JSP Portlet and received the\nsame error as I reported above.  This time I noticed another exception in the\nlog that may help:\n\nINFO: Server startup in 20610 ms\njava.lang.IllegalArgumentException: -82\n\tat\norg.apache.jasper.compiler.SmapStratum$LineInfo.setOutputLineIncrement(SmapStratum.java:124)\n\tat org.apache.jasper.compiler.SmapStratum.optimizeLineSection(SmapStratum.java:221)\n\tat org.apache.jasper.compiler.SmapUtil.evaluateNodes(SmapUtil.java:490)\n\tat org.apache.jasper.compiler.SmapUtil.generateSmap(SmapUtil.java:123)\n\tat org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:301)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:453)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:439)\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:555)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:300)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:293)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:240)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:856)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:286)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:752)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:640)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:552)\n\tat\norg.apache.turbine.services.jsp.TurbineJspService.handleRequest(TurbineJspService.java:202)\n\tat\norg.apache.turbine.services.jsp.TurbineJspService.handleRequest(TurbineJspService.java:163)\n\tat\norg.apache.jetspeed.portal.portlets.viewprocessor.JSPViewProcessor.processView(JSPViewProcessor.java:170)\n\tat\norg.apache.jetspeed.portal.portlets.GenericMVCPortlet.buildContent(GenericMVCPortlet.java:301)\n\tat\norg.apache.jetspeed.portal.portlets.GenericMVCPortlet.getContent(GenericMVCPortlet.java:219)\n\tat\norg.apache.jetspeed.portal.security.portlets.PortletWrapper.getContent(PortletWrapper.java:148)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:260)\n\tat\norg.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:207)\n\tat\norg.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:250)\n\tat org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94)\n\tat\norg.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:109)\n\tat org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94)\n\tat\norg.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:109)\n\tat org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\n\tat org.apache.velocity.Template.merge(Template.java:296)\n\tat org.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:492)\n\tat org.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:461)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocityService.decodeRequest(TurbineVelocityService.java:494)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocityService.handleRequest(TurbineVelocityService.java:336)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocity.handleRequest(TurbineVelocity.java:143)\n\tat\norg.apache.jetspeed.portal.controls.VelocityPortletControl.getContent(VelocityPortletControl.java:170)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:260)\n\tat\norg.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:207)\n\tat\norg.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:250)\n\tat org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94)\n\tat org.apache.velocity.runtime.directive.Foreach.render(Foreach.java:344)\n\tat\norg.apache.velocity.runtime.parser.node.ASTDirective.render(ASTDirective.java:153)\n\tat org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94)\n\tat org.apache.velocity.runtime.directive.Foreach.render(Foreach.java:344)\n\tat\norg.apache.velocity.runtime.parser.node.ASTDirective.render(ASTDirective.java:153)\n\tat org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\n\tat org.apache.velocity.Template.merge(Template.java:296)\n\tat org.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:492)\n\tat org.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:461)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocityService.decodeRequest(TurbineVelocityService.java:494)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocityService.handleRequest(TurbineVelocityService.java:336)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocity.handleRequest(TurbineVelocity.java:143)\n\tat\norg.apache.jetspeed.portal.controllers.VelocityPortletController.getContent(VelocityPortletController.java:136)\n\tat org.apache.jetspeed.portal.BasePortletSet.getContent(BasePortletSet.java:379)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:260)\n\tat\norg.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:207)\n\tat\norg.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:250)\n\tat org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\n\tat org.apache.velocity.Template.merge(Template.java:296)\n\tat org.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:492)\n\tat org.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:461)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocityService.decodeRequest(TurbineVelocityService.java:494)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocityService.handleRequest(TurbineVelocityService.java:336)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocity.handleRequest(TurbineVelocity.java:143)\n\tat\norg.apache.jetspeed.portal.controllers.VelocityPortletController.getContent(VelocityPortletController.java:136)\n\tat org.apache.jetspeed.portal.BasePortletSet.getContent(BasePortletSet.java:379)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:260)\n\tat\norg.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:207)\n\tat\norg.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:250)\n\tat org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94)\n\tat org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\n\tat\norg.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:128)\n\tat org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94)\n\tat\norg.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:109)\n\tat org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\n\tat org.apache.velocity.Template.merge(Template.java:296)\n\tat org.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:492)\n\tat org.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:461)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocityService.decodeRequest(TurbineVelocityService.java:494)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocityService.handleRequest(TurbineVelocityService.java:336)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocity.handleRequest(TurbineVelocity.java:143)\n\tat\norg.apache.jetspeed.portal.controls.VelocityPortletControl.getContent(VelocityPortletControl.java:170)\n\tat org.apache.jetspeed.util.template.JetspeedTool.getPane(JetspeedTool.java:181)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:260)\n\tat\norg.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:207)\n\tat\norg.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:250)\n\tat org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:94)\n\tat org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\n\tat\norg.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:128)\n\tat org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\n\tat org.apache.velocity.Template.merge(Template.java:296)\n\tat org.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:492)\n\tat org.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:461)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocityService.decodeRequest(TurbineVelocityService.java:494)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocityService.handleRequest(TurbineVelocityService.java:336)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocity.handleRequest(TurbineVelocity.java:143)\n\tat\norg.apache.turbine.modules.screens.VelocityDirectScreen.buildTemplate(VelocityDirectScreen.java:123)\n\tat\norg.apache.turbine.modules.screens.TemplateScreen.doBuild(TemplateScreen.java:130)\n\tat org.apache.turbine.modules.Screen.build(Screen.java:99)\n\tat org.apache.turbine.modules.ScreenLoader.eval(ScreenLoader.java:129)\n\tat\norg.apache.turbine.util.template.TemplateScreen.toString(TemplateScreen.java:126)\n\tat\norg.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:321)\n\tat org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:271)\n\tat org.apache.velocity.Template.merge(Template.java:296)\n\tat org.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:492)\n\tat org.apache.velocity.app.Velocity.mergeTemplate(Velocity.java:461)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocityService.decodeRequest(TurbineVelocityService.java:494)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocityService.handleRequest(TurbineVelocityService.java:336)\n\tat\norg.apache.turbine.services.velocity.TurbineVelocity.handleRequest(TurbineVelocity.java:143)\n\tat\norg.apache.turbine.modules.layouts.VelocityDirectLayout.doBuild(VelocityDirectLayout.java:106)\n\tat org.apache.turbine.modules.Layout.build(Layout.java:91)\n\tat org.apache.turbine.modules.LayoutLoader.exec(LayoutLoader.java:123)\n\tat org.apache.turbine.modules.pages.DefaultPage.doBuild(DefaultPage.java:169)\n\tat org.apache.turbine.modules.Page.build(Page.java:90)\n\tat org.apache.turbine.modules.PageLoader.exec(PageLoader.java:123)\n\tat org.apache.turbine.Turbine.doGet(Turbine.java:563)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:743)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:856)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:286)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:254)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:564)\n\tat\norg.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:256)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:210)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:190)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:175)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:149)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:564)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:156)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:564)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:974)\n\tat org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:207)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:647)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:489)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:575)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:649)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\n  This particular exception in catalina.out that shows up when I access a\nJetspeed pane containing a JSP Portlet.  This is with using Tomcat as-is, right\nout of the jakarta-tomcat-5.0.7.tar.gz distribution and Jetspeed 1.4b4 as-is. \nHope this will help shed some light on the issue.\n\nthx,\nGerry Reno\n\n",
            "date": "20030816T02:06:00",
            "id": 19
        },
        {
            "author": null,
            "body": "IllegalArgumentException in setOutputLineIncrement() is Bugzilla Bug 22277, \nand is fixed in CVS.",
            "date": "20030816T02:23:21",
            "id": 20
        }
    ],
    "component": "Catalina",
    "description": "Setup:\nRedHat Linux 8.0\nJ2SE 1.4.2-beta\nTomcat 5.0.3\nJetspeed 1.4-b4(release) and 1.4-b5-dev(from CVS)\n\n  Using Tomcat 5.0.3, Jetspeed will not display the contents of any of the JSP\nPortlets just their title bars.  And the only way that I have found to get these\nJSP Portlets to display is to select 'Edit account' at the top of the Jetspeed\npage and then just cancel on the next page.  Jetspeed JSP Portlets just do not\nwork right with Tomcat 5.0.3.  \n\nthx,\nGerry Reno",
    "hasPatch": false,
    "hasScreenshot": false,
    "id": "21206",
    "issuetypeClassified": "BUG",
    "issuetypeTracker": "BUG",
    "priority": "P3 major",
    "product": "Tomcat 5",
    "project": "TOMCAT",
    "summary": "Tomcat 5 - Jetspeed JSP Portlets do not display",
    "systemSpecification": true,
    "version": "5.0.7"
}