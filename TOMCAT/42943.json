{
    "comments": [
        {
            "author": null,
            "body": "Out of interest, what do you find if you move the 'dul' namespace declaration up\nto the <jsp:root>? Any change?",
            "date": "20070806T20:02:57",
            "id": 0
        },
        {
            "author": null,
            "body": "(In reply to comment #1)\n> Out of interest, what do you find if you move the 'dul' namespace declaration up\n> to the <jsp:root>? Any change?\n\nThat doesn't seem to change anything, I get the same error.",
            "date": "20070828T04:16:50",
            "id": 1
        },
        {
            "author": null,
            "body": "This has been fixed in trunk and proposed for 5.5.x and 6.0.x",
            "date": "20080508T14:56:23",
            "id": 2
        },
        {
            "author": null,
            "body": "The patch has been applied to 6.0.x and will be included in 6.0.17 onwards.",
            "date": "20080515T13:59:04",
            "id": 3
        },
        {
            "author": null,
            "body": "This has been fixed in 5.5.x and will be included in 5.5.27 onwards.",
            "date": "20080730T13:46:36",
            "id": 4
        }
    ],
    "component": "Jasper",
    "description": "I have a JSP .tag file (label.tagx) that I want to use in other JSPs. The tag\nfile looks as follows:\n\n<jsp:root version=\"2.0\"\n   xmlns:jsp=\"http://java.sun.com/JSP/Page\">\n  <jsp:directive.tag body-content=\"scriptless\"/>\n  <dul:text xmlns:dul=\"http://www.whatever.com/dul\"><jsp:doBody/></dul:text>\n</jsp:root>\n\n\nWhen I want to use this tag file in a JSP:\n\n...\n<tagx:label>blablabla</tagx:label>\n...\n\nI get the stacktrace at the end of this message.\n\nHowever, if I replace the dul:text element with something else, such as\ndul:dul:textzz, then everything works fine:\n\n<jsp:root version=\"2.0\"\n   xmlns:jsp=\"http://java.sun.com/JSP/Page\">\n  <jsp:directive.tag body-content=\"scriptless\"/>\n  <dul:textzz xmlns:dul=\"http://www.whatever.com/dul\"><jsp:doBody/></dul:textzz>\n</jsp:root>\n\nSeems like the dul:text and jsp:text tags get confused (namespace problems?)\nsomewhere during the page compilation.\n\nStacktrace:\n\n2007-07-20 12:05:50,828 [http-8080-Processor25] ERROR\norg.apache.struts.taglib.tiles.InsertTag - ServletException in\n'/WEB-INF/jsp/test-page.jsp': /WEB-INF/tags/label.tagx(6,90) &lt;jsp:text&gt;\nmust not have any subelements\norg.apache.jasper.JasperException: /WEB-INF/tags/label.tagx(6,90)\n&lt;jsp:text&gt; must not have any subelements\n\tat\norg.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:39)\n\tat org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:409)\n\tat org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:90)\n\tat org.apache.jasper.compiler.JspDocumentParser.parse(JspDocumentParser.java:201)\n\tat org.apache.jasper.compiler.ParserController.doParse(ParserController.java:197)\n\tat org.apache.jasper.compiler.ParserController.parse(ParserController.java:101)\n\tat org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:203)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:495)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:476)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:464)\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:511)\n\tat\norg.apache.jasper.servlet.JspServletWrapper.loadTagFile(JspServletWrapper.java:201)\n\tat\norg.apache.jasper.compiler.TagFileProcessor.loadTagFile(TagFileProcessor.java:514)\n\tat org.apache.jasper.compiler.TagFileProcessor.access$000(TagFileProcessor.java:47)\n\tat\norg.apache.jasper.compiler.TagFileProcessor$TagFileLoaderVisitor.visit(TagFileProcessor.java:565)\n\tat org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1441)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)\n\tat org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2324)\n\tat org.apache.jasper.compiler.Node$UninterpretedTag.accept(Node.java:1185)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)\n\tat\norg.apache.jasper.compiler.TagFileProcessor$TagFileLoaderVisitor.visit(TagFileProcessor.java:569)\n\tat org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1441)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)\n\tat org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2224)\n\tat org.apache.jasper.compiler.Node$JspRoot.accept(Node.java:525)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)\n\tat org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2219)\n\tat org.apache.jasper.compiler.Node$Root.accept(Node.java:456)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat\norg.apache.jasper.compiler.TagFileProcessor.loadTagFiles(TagFileProcessor.java:583)\n\tat org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:226)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:495)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:476)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:464)\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:511)\n\tat\norg.apache.jasper.servlet.JspServletWrapper.loadTagFile(JspServletWrapper.java:201)\n\tat\norg.apache.jasper.compiler.TagFileProcessor.loadTagFile(TagFileProcessor.java:514)\n\tat org.apache.jasper.compiler.TagFileProcessor.access$000(TagFileProcessor.java:47)\n\tat\norg.apache.jasper.compiler.TagFileProcessor$TagFileLoaderVisitor.visit(TagFileProcessor.java:565)\n\tat org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1441)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)\n\tat org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2324)\n\tat org.apache.jasper.compiler.Node$UninterpretedTag.accept(Node.java:1185)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)\n\tat org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2324)\n\tat org.apache.jasper.compiler.Node$UninterpretedTag.accept(Node.java:1185)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)\n\tat\norg.apache.jasper.compiler.TagFileProcessor$TagFileLoaderVisitor.visit(TagFileProcessor.java:569)\n\tat org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1441)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)\n\tat org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2324)\n\tat org.apache.jasper.compiler.Node$UninterpretedTag.accept(Node.java:1185)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)\n\tat org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2324)\n\tat org.apache.jasper.compiler.Node$UninterpretedTag.accept(Node.java:1185)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)\n\tat org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2324)\n\tat org.apache.jasper.compiler.Node$UninterpretedTag.accept(Node.java:1185)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)\n\tat\norg.apache.jasper.compiler.TagFileProcessor$TagFileLoaderVisitor.visit(TagFileProcessor.java:569)\n\tat org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1441)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)\n\tat org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2224)\n\tat org.apache.jasper.compiler.Node$JspRoot.accept(Node.java:525)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2213)\n\tat org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2219)\n\tat org.apache.jasper.compiler.Node$Root.accept(Node.java:456)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2163)\n\tat\norg.apache.jasper.compiler.TagFileProcessor.loadTagFiles(TagFileProcessor.java:583)\n\tat org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:226)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:495)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:476)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:464)\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:511)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:295)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:696)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:585)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:510)\n\tat org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:966)\n\tat org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:602)\n\tat org.apache.struts.tiles.TilesUtilImpl.doInclude(TilesUtilImpl.java:101)\n\tat org.apache.struts.tiles.TilesUtil.doInclude(TilesUtil.java:137)\n\tat org.apache.struts.taglib.tiles.InsertTag.doInclude(InsertTag.java:758)\n\tat\norg.apache.struts.taglib.tiles.InsertTag$InsertHandler.doEndTag(InsertTag.java:890)\n\tat org.apache.struts.taglib.tiles.InsertTag.doEndTag(InsertTag.java:460)\n\tat\norg.apache.jsp.WEB_002dINF.jsp.layouts.default_jsp._jspx_meth_tiles_insert_4(default_jsp.java:401)\n\tat\norg.apache.jsp.WEB_002dINF.jsp.layouts.default_jsp._jspService(default_jsp.java:135)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:324)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:696)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:474)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:409)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)\n...",
    "hasPatch": false,
    "hasScreenshot": false,
    "id": "42943",
    "issuetypeClassified": "BUG",
    "issuetypeTracker": "BUG",
    "priority": "P2 normal",
    "product": "Tomcat 5",
    "project": "TOMCAT",
    "summary": "jsp:text gets confused with other *:text elements in a JSP tag file",
    "systemSpecification": true,
    "version": "5.0.30"
}