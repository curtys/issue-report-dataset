{
    "comments": [
        {
            "author": null,
            "body": "The passivation mechanism for sessions is now more robust.",
            "date": "20050616T11:51:43",
            "id": 0
        }
    ],
    "component": "Catalina",
    "description": "Hi all,\nI've a problem:\nWhen i redeploy many times my webapp (replacing my .war file under the webapps\ndir), some times, tomcat crash when redeploy the webapp.\n\n\n\nThe error is this.\n\n5-mag-2005 15.45.47 org.apache.catalina.startup.HostConfig checkResources\nINFO: Undeploying context [/repartoweb]\n15:45:47,310 DEBUG UserCounterListener:53 - Session destroyed.\n15:45:47,316 DEBUG UserCounterListener:80 - User Count: 0\n5-mag-2005 15.45.47\norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor processChildren\nGRAVE: Exception invoking periodic operation:\njava.lang.IllegalStateException: removeAttribute: Session already invalidated\n        at\norg.apache.catalina.session.StandardSession.removeAttribute(StandardSession.java:1165)\n        at\norg.apache.catalina.session.StandardSession.removeAttribute(StandardSession.java:1140)\n        at\norg.apache.catalina.session.StandardSession.writeObject(StandardSession.java:1435)\n        at\norg.apache.catalina.session.StandardSession.writeObjectData(StandardSession.java:920)\n        at\norg.apache.catalina.session.StandardManager.doUnload(StandardManager.java:516)\n        at\norg.apache.catalina.session.StandardManager.unload(StandardManager.java:462)\n        at\norg.apache.catalina.session.StandardManager.stop(StandardManager.java:664)\n        at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4255)\n        at\norg.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:892)\n        at\norg.apache.catalina.startup.HostConfig.checkResources(HostConfig.java:968)\n        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1162)\n        at\norg.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:293)\n        at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n        at\norg.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1304)\n        at\norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1568)\n        at\norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1577)\n        at\norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1557)\n        at java.lang.Thread.run(Thread.java:595)\n\n\n\n\n\n\n--------Every ten seconds (after the GRAVE error), i'll recive this error:\n\n\n\n\n\n5-mag-2005 16.12.37 org.apache.catalina.startup.HostConfig checkResources\nINFO: Undeploying context [/repartoweb]\n5-mag-2005 16.12.37\norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor processChildren\nGRAVE: Exception invoking periodic operation:\njava.lang.NullPointerException\n        at\norg.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:883)\n        at\norg.apache.catalina.startup.HostConfig.checkResources(HostConfig.java:968)\n        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1162)\n        at\norg.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:293)\n        at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n        at\norg.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1304)\n        at\norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1568)\n        at\norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1577)\n        at\norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1557)\n        at java.lang.Thread.run(Thread.java:595)\n\n\n\n\n\n\n\nIf i try to replace the .war of my webapp with the same, but updated , the .war\nwan't be deployed.\n\n\n\nThe solution (not good): kill the catalina process and restart it!\n\nSo, any idea?\n\nAgharta",
    "hasPatch": false,
    "hasScreenshot": false,
    "id": "34760",
    "issuetypeClassified": "IMPROVEMENT",
    "issuetypeTracker": "BUG",
    "priority": "P1 major",
    "product": "Tomcat 5",
    "project": "TOMCAT",
    "summary": "Tomcat crash when  .war put under webapps and redeploy is called",
    "systemSpecification": true,
    "version": "5.5.9"
}