{
    "comments": [
        {
            "author": null,
            "body": "Here is the simple way to reproduce the bug:\n\nIn the server.xml add the following <Context..> entry inside the <Host\nname=\"localhost\" ...> element\n\nlike:\n \n<Host name=\"localhost\" debug=\"0\" appBase=\"webapps\"\n       unpackWARs=\"true\" autoDeploy=\"true\">\n......\n\n        <Context className=\"org.apache.catalina.core.StandardContext\"\ncachingAllowed=\"true\"\ncharsetMapperClass=\"org.apache.catalina.util.CharsetMapper\" cookies=\"true\"\ncrossContext=\"false\" debug=\"0\" displayName=\"JSPSample\"\ndocBase=\"jsp-examples2.war\"\nmapperClass=\"org.apache.catalina.core.StandardContextMapper\" override=\"true\"\npath=\"/jsp-examples2\" privileged=\"false\" reloadable=\"false\" useNaming=\"true\"\nwrapperClass=\"org.apache.catalina.core.StandardWrapper\">\n        </Context>\n\n\n\tthe context points to a jsp-examples2.war (just a copy of the jsp-examples.war)\nas docBase. When the containter starts, there will be no jsp-examples2 directory\ncreated. The webapplication can be access in http://localhost:8080/jsp-examples2/\n\nbut when click the links of the samples, there will be exception:\n\nSuch as:\n\njava.lang.NullPointerException\n        at org.apache.jasper.compiler.SmapUtil.inputSmapPath(SmapUtil.java:163)\n        at org.apache.jasper.compiler.SmapUtil.generateSmap(SmapUtil.java:104)\n        at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:303)\n        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:413)\n        at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext\n.java:552)\n        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper\n.java:297)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:2\n95)\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl\nicationFilterChain.java:280)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF\nilterChain.java:194)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV\nalve.java:276)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.jav\na:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV\nalve.java:191)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:643)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Authentica\ntorBase.java:474)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:641)\n        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.jav\na:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\n        at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:\n2523)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j\nava:180)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:643)\n        at org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatche\nrValve.java:170)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:641)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j\nava:172)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:641)\n        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.jav\na:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal\nve.java:174)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.jav\na:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\n        at org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:22\n3)\n        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java\n:413)\n        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.proce\nssConnection(Http11Protocol.java:380)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java\n:537)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadP\nool.java:533)\n        at java.lang.Thread.run(Thread.java:536)\n</Host>",
            "date": "20021119T01:47:12",
            "id": 0
        }
    ],
    "component": "Jasper",
    "description": "When the web application was running as a war file (unpacked), the JSPer \nthrough a exception of compiling the JSP. And the custom tags got error.  But \nthe same applicaiton can be run when the webapplication unpacked.\n\nthe exception is :\n\njava.lang.NullPointerException\n        at org.apache.jasper.compiler.SmapUtil.inputSmapPath(SmapUtil.java:163)\n        at org.apache.jasper.compiler.SmapUtil.generateSmap(SmapUtil.java:104)\n        at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:303)\n        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:413)\n        at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext\n.java:552)\n        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper\n.java:297)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:2\n95)\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl\nicationFilterChain.java:280)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF\nilterChain.java:194)\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDisp\natcher.java:727)\n        at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationD\nispatcher.java:616)\n        at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDis\npatcher.java:530)\n        at com.sun.j2ee.workflow.taglib.InsertTag.doEndTag(InsertTag.java:63)\n        at org.apache.jsp.template_jsp._jspx_meth_j2ee_insert_4(template_jsp.jav\na:198)\n        at org.apache.jsp.template_jsp._jspService(template_jsp.java:95)\n        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:138)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper\n.java:317)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:2\n95)\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl\nicationFilterChain.java:280)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF\nilterChain.java:194)\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDisp\natcher.java:727)\n        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationD\nispatcher.java:464)\n        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDis\npatcher.java:356)\n        at com.sun.j2ee.workflow.control.web.MainServlet.doGet(MainServlet.java:\n127)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl\nicationFilterChain.java:280)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF\nilterChain.java:194)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV\nalve.java:276)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.jav\na:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV\nalve.java:191)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:643)\n        at org.apache.catalina.valves.RequestListenerValve.invoke(RequestListene\nrValve.java:170)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:641)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Authentica\ntorBase.java:474)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:641)\n        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.jav\na:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\n        at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:\n2523)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j\nava:180)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:643)\n        at org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatche\nrValve.java:170)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:641)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j\nava:172)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:641)\n        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.jav\na:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal\nve.java:174)\n        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContex\nt.invokeNext(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.jav\na:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:996)\n\n        at org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:22\n3)\n        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java\n:413)\n        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.proce\nssConnection(Http11Protocol.java:380)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java\n:537)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadP\nool.java:533)\n        at java.lang.Thread.run(Thread.java:536)\nInsertTag:doEndTag caught: org.apache.jasper.JasperException: Unable to compile\nclass for JSP",
    "hasPatch": false,
    "hasScreenshot": false,
    "id": "14660",
    "issuetypeClassified": "BUG",
    "issuetypeTracker": "BUG",
    "priority": "P3 normal",
    "product": "Tomcat 5",
    "project": "TOMCAT",
    "summary": "Unable to use custom tag when running applicaiton in war",
    "systemSpecification": true,
    "version": "5.0.0"
}