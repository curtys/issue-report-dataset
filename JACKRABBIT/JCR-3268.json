{
    "comments": [
        {
            "author": "Alex Deparvu",
            "body": "In the case of a corrupt bundle the ItemStateManager#getItemState can throw an ItemStateException that stops the repository from starting.\n\nMy proposal is to have MultiIndex.createInitialIndex catch the ItemStateException and have it logged via the OnWorkspaceInconsistency handler.\nThe error wouldn't be a blocker anymore and if anybody is looking at the workspace consystency logs will see its message as well.\n\nThe simplest way to do this is to wrap log.error into a public method OnWorkspaceInconsistency#logError and use it from the MultiIndex.",
            "date": "2012-03-22T11:15:57.987+0000",
            "id": 0
        },
        {
            "author": "Claus K\u00f6ll",
            "body": "Is this not be handled with JCR-2651\ngreets",
            "date": "2012-03-22T11:24:53.567+0000",
            "id": 1
        },
        {
            "author": "Alex Deparvu",
            "body": "Hi Claus, I don't understand what you are saying :)\nIs that a question or a suggestion?\n\nIt is not currently handled by JCR-2651 because it addresses only NoSuchItemStateException. \nIn this issue I'm dealing with is an ItemStateException generated by a corrupt bundle.",
            "date": "2012-03-22T11:33:41.905+0000",
            "id": 2
        },
        {
            "author": "Claus K\u00f6ll",
            "body": "ahh sorry for my typo .. \nok i see you are handling with ItemStateException... so i think it will be good as you have proposed to catch it and handle it with OnWorkspaceInconsistency#logError",
            "date": "2012-03-22T12:11:06.176+0000",
            "id": 3
        },
        {
            "author": "Marcel Reutegger",
            "body": "> wrap log.error into a public method OnWorkspaceInconsistency#logError\n\nsounds good to me.",
            "date": "2012-03-22T13:30:32.580+0000",
            "id": 4
        },
        {
            "author": "Alex Deparvu",
            "body": "fixed in revision 1304323.",
            "date": "2012-03-23T13:00:04.048+0000",
            "id": 5
        },
        {
            "author": "Alex Deparvu",
            "body": "backported to 2.4 in revision 1304466.",
            "date": "2012-03-23T16:32:36.726+0000",
            "id": 6
        }
    ],
    "component": "indexing, jackrabbit-core",
    "description": "The re-indexing process should be more resilient, log an error and simply continue with the next node. It doesn't seem useful to refuse repository startup in this case.",
    "hasPatch": false,
    "hasScreenshot": false,
    "id": "JCR-3268",
    "issuetypeClassified": "IMPROVEMENT",
    "issuetypeTracker": "BUG",
    "priority": "Major",
    "product": "JACKRABBIT",
    "project": "JACKRABBIT",
    "summary": "Re-index fails on corrupt bundle",
    "systemSpecification": true,
    "version": ""
}