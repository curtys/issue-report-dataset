{
    "comments": [
        {
            "author": "Jukka Zitting",
            "body": "Are you sure about this? I just tested with the following code snippet and received the correct exception.\n\n    Repository repository = new TransientRepository();\n    try {\n        repository.login(\"foo\");\n    } catch (NoSuchWorkspaceException e) {\n        System.out.println(\"No such workspace!\");\n    }\n\nNote that NoSuchWorkspaceException extends RepositoryException, so you'd get the same result if you used RepositoryException in the catch statement above.\n\nResolving as Cannot Reproduce.",
            "date": "2007-02-07T08:36:33.050+0000",
            "id": 0
        },
        {
            "author": "Iaacov Rosenberg",
            "body": "Here's my code:\n\ntry {\n  m_session = repository.login(credentials, \"foo\");\n} catch (NoSuchWorkspaceException e) {\n  System.out.println(\"No such workspace\");\n} catch (RepositoryException e) {\n  System.out.println(\"Repository exception\");\n}\n\nAnd here's my console output, compare the first line with the last one:\n\n\n11:46:53,090 INFO  [jcr/local] javax.jcr.NoSuchWorkspaceException: foo\n11:46:53,090 INFO  [jcr/local] \tat org.apache.jackrabbit.core.RepositoryImpl.getWorkspaceInfo(RepositoryImpl.java:736)\n11:46:53,090 INFO  [jcr/local] \tat org.apache.jackrabbit.core.RepositoryImpl.login(RepositoryImpl.java:1227)\n11:46:53,090 INFO  [jcr/local] \tat org.apache.jackrabbit.jca.JCAManagedConnectionFactory.openSession(JCAManagedConnectionFactory.java:140)\n11:46:53,090 INFO  [jcr/local] \tat org.apache.jackrabbit.jca.JCAManagedConnectionFactory.createManagedConnection(JCAManagedConnectionFactory.java:163)\n11:46:53,090 INFO  [jcr/local] \tat org.apache.jackrabbit.jca.JCAManagedConnectionFactory.createManagedConnection(JCAManagedConnectionFactory.java:155)\n11:46:53,090 INFO  [jcr/local] \tat org.jboss.resource.connectionmanager.InternalManagedConnectionPool.createConnectionEventListener(InternalManagedConnectionPool.java:565)\n11:46:53,090 INFO  [jcr/local] \tat org.jboss.resource.connectionmanager.InternalManagedConnectionPool.getConnection(InternalManagedConnectionPool.java:250)\n11:46:53,090 INFO  [jcr/local] \tat org.jboss.resource.connectionmanager.JBossManagedConnectionPool$BasePool.getConnection(JBossManagedConnectionPool.java:491)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.resource.connectionmanager.BaseConnectionManager2.getManagedConnection(BaseConnectionManager2.java:341)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.resource.connectionmanager.TxConnectionManager.getManagedConnection(TxConnectionManager.java:301)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.resource.connectionmanager.BaseConnectionManager2.allocateConnection(BaseConnectionManager2.java:396)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.resource.connectionmanager.BaseConnectionManager2$ConnectionManagerProxy.allocateConnection(BaseConnectionManager2.java:842)\n11:46:53,200 INFO  [jcr/local] \tat org.apache.jackrabbit.jca.JCARepositoryHandle.login(JCARepositoryHandle.java:98)\n11:46:53,200 INFO  [jcr/local] \tat org.apache.jackrabbit.jca.JCARepositoryHandle.login(JCARepositoryHandle.java:89)\n11:46:53,200 INFO  [jcr/local] \tat com.v4x.jcr.JcrConnectionBean.connect(JcrConnectionBean.java:70)\n11:46:53,200 INFO  [jcr/local] \tat com.v4x.jcr.JcrConnectionBean.getSession(JcrConnectionBean.java:86)\n11:46:53,200 INFO  [jcr/local] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n11:46:53,200 INFO  [jcr/local] \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n11:46:53,200 INFO  [jcr/local] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n11:46:53,200 INFO  [jcr/local] \tat java.lang.reflect.Method.invoke(Unknown Source)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:112)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:166)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.entity.ExtendedPersistenceContextPropagationInterceptor.invoke(ExtendedPersistenceContextPropagationInterceptor.java:57)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:46)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.tx.BMTInterceptor.handleStateful(BMTInterceptor.java:106)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.tx.BMTInterceptor.invoke(BMTInterceptor.java:132)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aspects.tx.TxPropagationInterceptor.invoke(TxPropagationInterceptor.java:76)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.stateful.StatefulInstanceInterceptor.invoke(StatefulInstanceInterceptor.java:83)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aspects.security.AuthenticationInterceptor.invoke(AuthenticationInterceptor.java:77)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.security.Ejb3AuthenticationInterceptor.invoke(Ejb3AuthenticationInterceptor.java:102)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.ENCPropagationInterceptor.invoke(ENCPropagationInterceptor.java:47)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.asynchronous.AsynchronousInterceptor.invoke(AsynchronousInterceptor.java:106)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.stateful.StatefulContainer.localInvoke(StatefulContainer.java:203)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.stateful.StatefulLocalProxy.invoke(StatefulLocalProxy.java:98)\n11:46:53,200 INFO  [jcr/local] \tat $Proxy121.getSession(Unknown Source)\n11:46:53,200 INFO  [jcr/local] \tat com.v4x.mediaCenter.types.MediaItemBean.addToStorage(MediaItemBean.java:84)\n11:46:53,200 INFO  [jcr/local] \tat com.v4x.mediaCenter.webServices.VideoItemWSBean.addVideoItem(VideoItemWSBean.java:52)\n11:46:53,200 INFO  [jcr/local] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n11:46:53,200 INFO  [jcr/local] \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n11:46:53,200 INFO  [jcr/local] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n11:46:53,200 INFO  [jcr/local] \tat java.lang.reflect.Method.invoke(Unknown Source)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:112)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:166)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:46)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aspects.tx.TxPolicy.invokeInOurTx(TxPolicy.java:79)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:191)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aspects.tx.TxPropagationInterceptor.invoke(TxPropagationInterceptor.java:76)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:62)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aspects.security.AuthenticationInterceptor.invoke(AuthenticationInterceptor.java:77)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.ejb3.security.Ejb3AuthenticationInterceptor.invoke(Ejb3AuthenticationInterceptor.java:102)\n11:46:53,200 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.ejb3.ENCPropagationInterceptor.invoke(ENCPropagationInterceptor.java:47)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.ejb3.asynchronous.AsynchronousInterceptor.invoke(AsynchronousInterceptor.java:106)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.ejb3.stateless.StatelessContainer.localInvoke(StatelessContainer.java:211)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.ejb3.stateless.StatelessContainer.localInvoke(StatelessContainer.java:173)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.ws.integration.jboss.ServiceEndpointInvokerEJB3.invokeServiceEndpoint(ServiceEndpointInvokerEJB3.java:131)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.ws.server.AbstractServiceEndpointInvoker.invoke(AbstractServiceEndpointInvoker.java:151)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.ws.server.ServiceEndpoint.handleRequest(ServiceEndpoint.java:195)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.ws.server.ServiceEndpointManager.processSOAPRequest(ServiceEndpointManager.java:373)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.ws.server.StandardEndpointServlet.doPost(StandardEndpointServlet.java:116)\n11:46:53,246 INFO  [jcr/local] \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.ws.server.StandardEndpointServlet.service(StandardEndpointServlet.java:77)\n11:46:53,246 INFO  [jcr/local] \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:810)\n11:46:53,246 INFO  [jcr/local] \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)\n11:46:53,246 INFO  [jcr/local] \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)\n11:46:53,246 INFO  [jcr/local] \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n11:46:53,246 INFO  [jcr/local] \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n11:46:53,246 INFO  [jcr/local] \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n11:46:53,246 INFO  [jcr/local] \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:175)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:74)\n11:46:53,246 INFO  [jcr/local] \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)\n11:46:53,246 INFO  [jcr/local] \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)\n11:46:53,246 INFO  [jcr/local] \tat org.jboss.web.tomcat.tc5.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:156)\n11:46:53,246 INFO  [jcr/local] \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)\n11:46:53,246 INFO  [jcr/local] \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)\n11:46:53,246 INFO  [jcr/local] \tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)\n11:46:53,246 INFO  [jcr/local] \tat org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)\n11:46:53,246 INFO  [jcr/local] \tat org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)\n11:46:53,246 INFO  [jcr/local] \tat org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:112)\n11:46:53,246 INFO  [jcr/local] \tat java.lang.Thread.run(Unknown Source)\n11:46:53,246 WARN  [JBossManagedConnectionPool] Throwable while attempting to get a new connection: null\njavax.resource.ResourceException: Failed to create session: foo\n\tat org.apache.jackrabbit.jca.JCAManagedConnectionFactory.openSession(JCAManagedConnectionFactory.java:145)\n\tat org.apache.jackrabbit.jca.JCAManagedConnectionFactory.createManagedConnection(JCAManagedConnectionFactory.java:163)\n\tat org.apache.jackrabbit.jca.JCAManagedConnectionFactory.createManagedConnection(JCAManagedConnectionFactory.java:155)\n\tat org.jboss.resource.connectionmanager.InternalManagedConnectionPool.createConnectionEventListener(InternalManagedConnectionPool.java:565)\n\tat org.jboss.resource.connectionmanager.InternalManagedConnectionPool.getConnection(InternalManagedConnectionPool.java:250)\n\tat org.jboss.resource.connectionmanager.JBossManagedConnectionPool$BasePool.getConnection(JBossManagedConnectionPool.java:491)\n\tat org.jboss.resource.connectionmanager.BaseConnectionManager2.getManagedConnection(BaseConnectionManager2.java:341)\n\tat org.jboss.resource.connectionmanager.TxConnectionManager.getManagedConnection(TxConnectionManager.java:301)\n\tat org.jboss.resource.connectionmanager.BaseConnectionManager2.allocateConnection(BaseConnectionManager2.java:396)\n\tat org.jboss.resource.connectionmanager.BaseConnectionManager2$ConnectionManagerProxy.allocateConnection(BaseConnectionManager2.java:842)\n\tat org.apache.jackrabbit.jca.JCARepositoryHandle.login(JCARepositoryHandle.java:98)\n\tat org.apache.jackrabbit.jca.JCARepositoryHandle.login(JCARepositoryHandle.java:89)\n\tat com.v4x.jcr.JcrConnectionBean.connect(JcrConnectionBean.java:70)\n\tat com.v4x.jcr.JcrConnectionBean.getSession(JcrConnectionBean.java:86)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:112)\n\tat org.jboss.ejb3.interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:166)\n\tat org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.ejb3.entity.ExtendedPersistenceContextPropagationInterceptor.invoke(ExtendedPersistenceContextPropagationInterceptor.java:57)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:46)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.ejb3.tx.BMTInterceptor.handleStateful(BMTInterceptor.java:106)\n\tat org.jboss.ejb3.tx.BMTInterceptor.invoke(BMTInterceptor.java:132)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.aspects.tx.TxPropagationInterceptor.invoke(TxPropagationInterceptor.java:76)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.ejb3.stateful.StatefulInstanceInterceptor.invoke(StatefulInstanceInterceptor.java:83)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.aspects.security.AuthenticationInterceptor.invoke(AuthenticationInterceptor.java:77)\n\tat org.jboss.ejb3.security.Ejb3AuthenticationInterceptor.invoke(Ejb3AuthenticationInterceptor.java:102)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.ejb3.ENCPropagationInterceptor.invoke(ENCPropagationInterceptor.java:47)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.ejb3.asynchronous.AsynchronousInterceptor.invoke(AsynchronousInterceptor.java:106)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.ejb3.stateful.StatefulContainer.localInvoke(StatefulContainer.java:203)\n\tat org.jboss.ejb3.stateful.StatefulLocalProxy.invoke(StatefulLocalProxy.java:98)\n\tat $Proxy121.getSession(Unknown Source)\n\tat com.v4x.mediaCenter.types.MediaItemBean.addToStorage(MediaItemBean.java:84)\n\tat com.v4x.mediaCenter.webServices.VideoItemWSBean.addVideoItem(VideoItemWSBean.java:52)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:112)\n\tat org.jboss.ejb3.interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:166)\n\tat org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:46)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.aspects.tx.TxPolicy.invokeInOurTx(TxPolicy.java:79)\n\tat org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:191)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.aspects.tx.TxPropagationInterceptor.invoke(TxPropagationInterceptor.java:76)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:62)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.aspects.security.AuthenticationInterceptor.invoke(AuthenticationInterceptor.java:77)\n\tat org.jboss.ejb3.security.Ejb3AuthenticationInterceptor.invoke(Ejb3AuthenticationInterceptor.java:102)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.ejb3.ENCPropagationInterceptor.invoke(ENCPropagationInterceptor.java:47)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.ejb3.asynchronous.AsynchronousInterceptor.invoke(AsynchronousInterceptor.java:106)\n\tat org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n\tat org.jboss.ejb3.stateless.StatelessContainer.localInvoke(StatelessContainer.java:211)\n\tat org.jboss.ejb3.stateless.StatelessContainer.localInvoke(StatelessContainer.java:173)\n\tat org.jboss.ws.integration.jboss.ServiceEndpointInvokerEJB3.invokeServiceEndpoint(ServiceEndpointInvokerEJB3.java:131)\n\tat org.jboss.ws.server.AbstractServiceEndpointInvoker.invoke(AbstractServiceEndpointInvoker.java:151)\n\tat org.jboss.ws.server.ServiceEndpoint.handleRequest(ServiceEndpoint.java:195)\n\tat org.jboss.ws.server.ServiceEndpointManager.processSOAPRequest(ServiceEndpointManager.java:373)\n\tat org.jboss.ws.server.StandardEndpointServlet.doPost(StandardEndpointServlet.java:116)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.jboss.ws.server.StandardEndpointServlet.service(StandardEndpointServlet.java:77)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:810)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)\n\tat org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:175)\n\tat org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:74)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)\n\tat org.jboss.web.tomcat.tc5.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:156)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)\n\tat org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)\n\tat org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)\n\tat org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:112)\n\tat java.lang.Thread.run(Unknown Source)\n11:46:53,278 INFO  [STDOUT] Repository exception\n",
            "date": "2007-02-07T09:56:20.131+0000",
            "id": 1
        },
        {
            "author": "Iaacov Rosenberg",
            "body": "I forgot to mention my repository runs as JCA, and I get a reference through JNDI lookup:\n\nInitialContext ctx = new InitialContext();\nRepository repository = (Repository) ctx.lookup(\"java:jcr/local\");\n",
            "date": "2007-02-07T10:20:04.602+0000",
            "id": 2
        },
        {
            "author": "Stefan Guggisberg",
            "body": "cannot reproduce using local jackrabbit instance\n\nmust be a JCA issue, changing component accordingly ",
            "date": "2007-02-07T10:36:05.275+0000",
            "id": 3
        },
        {
            "author": "Iaacov Rosenberg",
            "body": "Here's the problem and the suggested fix:\n\nThe source of the problem is in JCAManagedConnectionFactory#openSession:\n\n    /**\n     * Create a new session.\n     */\n    private XASession openSession(JCAConnectionRequestInfo cri)\n            throws ResourceException {\n        createRepository();\n        Credentials creds = cri.getCredentials();\n        String workspace = cri.getWorkspace();\n\n        try {\n            XASession session = (XASession) getRepository().login(creds, workspace);\n            log(\"Created session (\" + session + \")\");\n            return session;\n        } catch (RepositoryException e) {\n            log(\"Failed to create session\", e);\n            throw new ResourceException(\n                    \"Failed to create session: \" + e.getMessage());\n        }\n    }\n\nAll login() exceptions which are instanceOf RepositoryException are catched and rethrown as ResourceException. That's fine because we are being called by an AS (application server) which doesn't know about repositories.\nHowever, just for these situations, JCARepositoryHandle#login checks for the exception's cause, which is missing.\n\nTherefore, the correct catch clause should be as following:\n\n        } catch (RepositoryException e) {\n            log(\"Failed to create session\", e);\n            throw new ResourceException(\n                    \"Failed to create session: \" + e.getMessage(), e);     <-- added second argument\n        }\n",
            "date": "2007-02-07T13:07:32.829+0000",
            "id": 4
        },
        {
            "author": "Jukka Zitting",
            "body": "Fixed as suggested in revision 507864. Thanks!",
            "date": "2007-02-15T09:21:49.670+0000",
            "id": 5
        },
        {
            "author": "Jukka Zitting",
            "body": "For the record: This issue was actually caused by revision 418448 where I committed a simplified version of the fix suggested in issue JCR-413. The suggested fix used the J2EE 1.3 method setLinkedException() to keep the original exception, but I didn't realize why the underlying exception is required and just dropped the call in favor of a string copy of the exception message. The fix to this issue reintroduced the problem in JCR-413, and was now fixed properly in revision 510468. The reintroduced issue was recorded as JCR-761 since JCR-413 had already been closed in Jackrabbit 1.1.",
            "date": "2007-02-22T11:41:21.269+0000",
            "id": 6
        }
    ],
    "component": "jackrabbit-jca",
    "description": "According to specification, calling Repository.login(Credentials, String) with a non-existent wokspaceName should return NoSuchWorkspaceException.\n\nIn fact it returns RepositoryException.",
    "hasPatch": false,
    "hasScreenshot": false,
    "id": "JCR-736",
    "issuetypeClassified": "IMPROVEMENT",
    "issuetypeTracker": "BUG",
    "priority": "Major",
    "product": "JACKRABBIT",
    "project": "JACKRABBIT",
    "summary": "Wrong exeption returned from Repository.login(Credentials, String)",
    "systemSpecification": true,
    "version": "1.2.1"
}