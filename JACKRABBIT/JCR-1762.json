{
    "comments": [
        {
            "author": "Boni Gopalan",
            "body": "Files Changed :\n============\nsrc/main/java/org/apache/jackrabbit/ocm/manager/collectionconverter/impl/MultiValueCollectionConverterImpl.java\nsrc/main/java/org/apache/jackrabbit/ocm/mapper/impl/AbstractMapperImpl.java\nsrc/main/java/org/apache/jackrabbit/ocm/mapper/impl/annotation/AnnotationDescriptorReader.java\n\nTest Cases Added  (Some modified):\n============\nPath\nsrc/test/java/org/apache/jackrabbit/ocm/AnnotationTestBase.java\nsrc/test/test-config/jcrmapping-atomic.xml\njsrc/test/ava/org/apache/jackrabbit/ocm/manager/collectionconverter/AnnotationMultiValueWithObjectCollectionConverterImplTest.java\nsrc/test/java/org/apache/jackrabbit/ocm/manager/collectionconverter/DigesterMultiValueWithObjectCollectionConverterImplTest.java\nsrc/test/java/org/apache/jackrabbit/ocm/testmodel/MultiValueWithObjectCollection.java\n\n\n",
            "date": "2008-09-25T06:10:31.926+0000",
            "id": 0
        },
        {
            "author": "Christophe Lombart",
            "body": "Hi Boni, \n\nCan you provide a patch instead of a full java classes. It will be easier to apply changes because I'm also working AnnotationDescriptorReader & AbstractMapperImpl\n\nThanks. ",
            "date": "2008-09-25T08:26:13.050+0000",
            "id": 1
        },
        {
            "author": "Boni Gopalan",
            "body": "The patch file from running svn diff on jackrabbit-ocm folder.",
            "date": "2008-09-25T08:44:34.423+0000",
            "id": 2
        },
        {
            "author": "Boni Gopalan",
            "body": "The old patch missed two files.",
            "date": "2008-09-25T09:43:47.584+0000",
            "id": 3
        },
        {
            "author": "Christophe Lombart",
            "body": "trying to apply the patch but I got a NullPointerException : \n\njava.lang.NullPointerException\n\tat org.apache.jackrabbit.ocm.manager.objectconverter.impl.ObjectConverterImpl.getPath(ObjectConverterImpl.java:612)\n\tat org.apache.jackrabbit.ocm.manager.impl.ObjectContentManagerImpl.insert(ObjectContentManagerImpl.java:388)\n\tat org.apache.jackrabbit.ocm.manager.collectionconverter.AnnotationMultiValueWithObjectCollectionConverterImplTest.checkMultiValue(AnnotationMultiValueWithObjectCollectionConverterImplTest.java:81)\n\tat org.apache.jackrabbit.ocm.manager.collectionconverter.AnnotationMultiValueWithObjectCollectionConverterImplTest.testMultiValue(AnnotationMultiValueWithObjectCollectionConverterImplTest.java:59)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat junit.framework.TestCase.runTest(TestCase.java:154)\n\tat junit.framework.TestCase.runBare(TestCase.java:127)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:118)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.extensions.TestSetup.run(TestSetup.java:23)\n\tat org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)",
            "date": "2008-09-27T13:30:12.455+0000",
            "id": 4
        },
        {
            "author": "Christophe Lombart",
            "body": "Maybe it is due to my latest changes. I will investigate later. \n",
            "date": "2008-09-27T13:35:33.609+0000",
            "id": 5
        },
        {
            "author": "Boni Gopalan",
            "body": "I think so too.  'Cause I just ran the test cases once again got ocm and all passed.\nIf you have something important to commit please go ahead, I will rework on the patch and submit.\n\n\nE:\\boni\\jackrabbit-src\\trunk\\jackrabbit-ocm>mvn clean test\n[INFO] Scanning for projects...\n[INFO] ------------------------------------------------------------------------\n[INFO] Building Jackrabbit Object Content Mapping\n[INFO]    task-segment: [clean, test]\n[INFO] ------------------------------------------------------------------------\n[INFO] [clean:clean]\n[INFO] Deleting directory E:\\boni\\jackrabbit-src\\trunk\\jackrabbit-ocm\\target\n[INFO] [resources:resources]\n[INFO] Using default encoding to copy filtered resources.\n[INFO] snapshot org.apache.jackrabbit:jackrabbit-core:1.5-SNAPSHOT: checking for updates from apache.snapshots\n7K downloaded\n[INFO] snapshot org.apache.jackrabbit:jackrabbit-api:1.5-SNAPSHOT: checking for updates from apache.snapshots\n2K downloaded\n[INFO] snapshot org.apache.jackrabbit:jackrabbit-jcr-commons:1.5-SNAPSHOT: checking for updates from apache.snapshots\n2K downloaded\n[INFO] snapshot org.apache.jackrabbit:jackrabbit-spi-commons:1.5-SNAPSHOT: checking for updates from apache.snapshots\n7K downloaded\n[INFO] snapshot org.apache.jackrabbit:jackrabbit-spi:1.5-SNAPSHOT: checking for updates from apache.snapshots\n2K downloaded\n[INFO] snapshot org.apache.jackrabbit:jackrabbit-text-extractors:1.5-SNAPSHOT: checking for updates from apache.snapshots\n2K downloaded\n[INFO] [compiler:compile]\n[INFO] Compiling 106 source files to E:\\boni\\jackrabbit-src\\trunk\\jackrabbit-ocm\\target\\classes\n[INFO] [resources:testResources]\n[INFO] Using default encoding to copy filtered resources.\n1645K downloaded\n26K downloaded\n197K downloaded\n509K downloaded\n21K downloaded\n32K downloaded\n[INFO] [compiler:testCompile]\n[INFO] Compiling 169 source files to E:\\boni\\jackrabbit-src\\trunk\\jackrabbit-ocm\\target\\test-classes\n[INFO] [surefire:test]\n[INFO] Surefire report directory: E:\\boni\\jackrabbit-src\\trunk\\jackrabbit-ocm\\target\\surefire-reports\n\n-------------------------------------------------------\n T E S T S\n-------------------------------------------------------\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.AnnotationMultiValueWithObjectCollectionConverterImplTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 32.434 sec\nRunning org.apache.jackrabbit.ocm.querymanager.DigesterQueryManagerTest\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.61 sec\nRunning org.apache.jackrabbit.ocm.manager.query.DigesterMultiValueQueryTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.35 sec\nRunning org.apache.jackrabbit.ocm.manager.atomic.DigesterAtomicTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.125 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.DigesterResidualPropertiesCollectionConverterImplTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.08 sec\nRunning org.apache.jackrabbit.ocm.manager.proxy.DigesterProxyTest\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.143 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.AnnotationResidualNodesCollectionConverterImplTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.395 sec\nRunning org.apache.jackrabbit.ocm.manager.query.AnnotationScopeQueryTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.982 sec\nRunning org.apache.jackrabbit.ocm.manager.auto.DigesterAutoTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.125 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.AnnotationDefaultCollectionConverterImplTest\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.69 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.DigesterMultiValueWithObjectCollectionConverterImplTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.09 sec\nRunning org.apache.jackrabbit.ocm.manager.beanconverter.AnnotationBeanDescriptorTest\nParagraph path : /test/paragraph[2]\nParagraph path : /test/paragraph[3]\nParagraph path : /test/paragraph\nTests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.332 sec\nRunning org.apache.jackrabbit.ocm.mapper.AnnotationMapperImplTest\nTests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.103 sec\nRunning org.apache.jackrabbit.ocm.manager.inheritance.DigesterInheritanceConcreteClassTest\nTests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 11.938 sec\nRunning org.apache.jackrabbit.ocm.manager.query.DigesterIteratorQueryTest\ngetObject takes : 3\ngetObject takes : 18\ngetObject takes : 1\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.635 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.DigesterNTCollectionConverterImplTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.293 sec\nRunning org.apache.jackrabbit.ocm.manager.basic.DigesterRemoveTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.284 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.AnnotationArrayListTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.575 sec\nRunning org.apache.jackrabbit.ocm.manager.jcrnodetype.AnnotationJcrPropertyTest\norg.apache.jackrabbit.ocm.exception.ObjectContentManagerException: Cannot persist current session changes.; nested exception is\nthConstraintsProp: 'invalid value' does not satisfy the constraint 'ddd'\njavax.jcr.nodetype.ConstraintViolationException: /test/ocm:autoCreatedWithConstraintsProp: 'invalid value' does not satisfy the\n        at org.apache.jackrabbit.core.ItemImpl.validateTransientItems(ItemImpl.java:500)\n        at org.apache.jackrabbit.core.ItemImpl.save(ItemImpl.java:1037)\n        at org.apache.jackrabbit.core.SessionImpl.save(SessionImpl.java:846)\n        at org.apache.jackrabbit.ocm.manager.impl.ObjectContentManagerImpl.save(ObjectContentManagerImpl.java:1070)\n        at org.apache.jackrabbit.ocm.manager.jcrnodetype.AnnotationJcrPropertyTest.testRequiredProperty(AnnotationJcrPropertyTes\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at junit.framework.TestCase.runTest(TestCase.java:154)\n        at junit.framework.TestCase.runBare(TestCase.java:127)\n        at junit.framework.TestResult$1.protect(TestResult.java:106)\n        at junit.framework.TestResult.runProtected(TestResult.java:124)\n        at junit.framework.TestResult.run(TestResult.java:109)\n        at junit.framework.TestCase.run(TestCase.java:118)\n        at junit.framework.TestSuite.runTest(TestSuite.java:208)\n        at junit.framework.TestSuite.run(TestSuite.java:203)\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n        at junit.framework.TestResult.runProtected(TestResult.java:124)\n        at junit.extensions.TestSetup.run(TestSetup.java:23)\n        at sun.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.maven.surefire.junit.JUnitTestSet.execute(JUnitTestSet.java:213)\n        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:140)\n        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:127)\n        at org.apache.maven.surefire.Surefire.run(Surefire.java:177)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:338)\n        at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:997)\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.068 sec\nRunning org.apache.jackrabbit.ocm.manager.atomic.DigesterNullAtomicTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.048 sec\nRunning org.apache.jackrabbit.ocm.manager.inheritance.DigesterInheritanceHierarchyTest\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.141 sec\nRunning org.apache.jackrabbit.ocm.manager.basic.AnnotationCopyMoveTest\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.541 sec\nRunning org.apache.jackrabbit.ocm.manager.query.AnnotationAtomicQueryTest\ngetObjects  : 31\ngetObjects 2 : 2\ngetObjects  : 21\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.318 sec\nRunning org.apache.jackrabbit.ocm.manager.proxy.AnnotationProxyTest\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.309 sec\nRunning org.apache.jackrabbit.ocm.manager.query.AnnotationSimpleQueryTest\nTests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.325 sec\nRunning org.apache.jackrabbit.ocm.manager.basic.AnnotationSimpleTest\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.21 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.AnnotationResidualPropertiesCollectionConverterImplTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.038 sec\nRunning org.apache.jackrabbit.ocm.mapper.DigesterMapperImplTest\nTests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.056 sec\nRunning org.apache.jackrabbit.ocm.manager.atomic.AnnotationNullAtomicTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.048 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.AnnotationMultiValueCollectionConverterImplTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.046 sec\nRunning org.apache.jackrabbit.ocm.manager.jcrnodetype.DigesterJcrPropertyTest\norg.apache.jackrabbit.ocm.exception.ObjectContentManagerException: Cannot persist current session changes.; nested exception is\nthConstraintsProp: 'invalid value' does not satisfy the constraint 'ddd'\njavax.jcr.nodetype.ConstraintViolationException: /test/ocm:autoCreatedWithConstraintsProp: 'invalid value' does not satisfy the\n        at org.apache.jackrabbit.core.ItemImpl.validateTransientItems(ItemImpl.java:500)\n        at org.apache.jackrabbit.core.ItemImpl.save(ItemImpl.java:1037)\n        at org.apache.jackrabbit.core.SessionImpl.save(SessionImpl.java:846)\n        at org.apache.jackrabbit.ocm.manager.impl.ObjectContentManagerImpl.save(ObjectContentManagerImpl.java:1070)\n        at org.apache.jackrabbit.ocm.manager.jcrnodetype.DigesterJcrPropertyTest.testRequiredProperty(DigesterJcrPropertyTest.ja\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at junit.framework.TestCase.runTest(TestCase.java:154)\n        at junit.framework.TestCase.runBare(TestCase.java:127)\n        at junit.framework.TestResult$1.protect(TestResult.java:106)\n        at junit.framework.TestResult.runProtected(TestResult.java:124)\n        at junit.framework.TestResult.run(TestResult.java:109)\n        at junit.framework.TestCase.run(TestCase.java:118)\n        at junit.framework.TestSuite.runTest(TestSuite.java:208)\n        at junit.framework.TestSuite.run(TestSuite.java:203)\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n        at junit.framework.TestResult.runProtected(TestResult.java:124)\n        at junit.extensions.TestSetup.run(TestSetup.java:23)\n        at sun.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.maven.surefire.junit.JUnitTestSet.execute(JUnitTestSet.java:213)\n        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:140)\n        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:127)\n        at org.apache.maven.surefire.Surefire.run(Surefire.java:177)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.058 sec\n        at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:338)\n        at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:997)\nRunning org.apache.jackrabbit.ocm.manager.interfaces.AnnotationInterfaceHierarchyTest\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.077 sec\nRunning org.apache.jackrabbit.ocm.manager.query.DigesterSimpleQueryTest\nTests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 7.54 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.DigesterHashMapTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.163 sec\nRunning org.apache.jackrabbit.ocm.manager.lock.AnnotationLockTest\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.987 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.MapReferenceValueEncoderTest\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec\nRunning org.apache.jackrabbit.ocm.manager.uuid.AnnotationUuidTest\nUUID : 6d3c9a45-541f-4f61-83ee-30259b9523cf\norg.apache.jackrabbit.ocm.exception.RepositoryException: Impossible to get the object with uuid : 1234; nested exception is java\nUUID : 182f8b07-ec01-4ac2-b758-d35b369e6471\nInvalid uuid : org.apache.jackrabbit.ocm.exception.IncorrectAtomicTypeException: Impossible to convert the value into a referenc\navax.jcr.ValueFormatException: not a valid UUID format: 1245\nUUID : 19a5bc21-1f1b-422c-918b-b05365251b54\nInvalid uuid value in the collection : org.apache.jackrabbit.ocm.exception.ObjectContentManagerException: Cannot insert collecti\nuuid.B; nested exception is javax.jcr.ValueFormatException: not a valid UUID format: 12345\nUUID : da9ecd49-1c3c-4170-89e5-6aa244cbe12d\nTests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.489 sec\nRunning org.apache.jackrabbit.ocm.querymanager.AnnotationQueryManagerTest\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.024 sec\nRunning org.apache.jackrabbit.ocm.manager.version.DigesterBasicVersionningTest\nBase version : 1.1\nRoot version : jcr:rootVersion\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.196 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.AnnotationHashMapTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.336 sec\nRunning org.apache.jackrabbit.ocm.manager.beanconverter.DigesterBeanDescriptorTest\nParagraph path : /test/paragraph\nParagraph path : /test/paragraph[3]\nParagraph path : /test/paragraph[2]\nTests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.324 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.BeanReferenceMapConverterImplTest\nTests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.179 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.DigesterMultiValueCollectionConverterImplTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.067 sec\nRunning org.apache.jackrabbit.ocm.manager.basic.AnnotationRemoveTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.1 sec\nRunning org.apache.jackrabbit.ocm.manager.jcrnodetype.DigesterJcrNodeTypeTest\nFolder creation date : java.util.GregorianCalendar[time=1222523368465,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=s\n0,useDaylight=false,transitions=6,lastRule=null],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=2008,MONTH=8,WEEK_OF_YEAR=\nWEEK_IN_MONTH=4,AM_PM=1,HOUR=7,HOUR_OF_DAY=19,MINUTE=19,SECOND=28,MILLISECOND=465,ZONE_OFFSET=19800000,DST_OFFSET=0]\nFile resource calendar: java.util.GregorianCalendar[time=1222523368465,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=\n=0,useDaylight=false,transitions=6,lastRule=null],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=2008,MONTH=8,WEEK_OF_YEAR\n_WEEK_IN_MONTH=4,AM_PM=1,HOUR=7,HOUR_OF_DAY=19,MINUTE=19,SECOND=28,MILLISECOND=465,ZONE_OFFSET=19800000,DST_OFFSET=0]\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.072 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.DigesterArrayListTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.281 sec\nRunning org.apache.jackrabbit.ocm.manager.interfaces.DigesterInterfaceHierarchyTest\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.109 sec\nRunning org.apache.jackrabbit.ocm.manager.interfaces.DigesterConcreteClassTest\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 9.681 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.DigesterDefaultCollectionConverterImplTest\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.067 sec\nRunning org.apache.jackrabbit.ocm.manager.uuid.DigesterUuidTest\nUUID : a11ebb40-df17-4d5d-bc65-746254516172\norg.apache.jackrabbit.ocm.exception.RepositoryException: Impossible to get the object with uuid : 1234; nested exception is java\nUUID : 0f17a653-a19d-41fc-b2fd-95f6cfba567b\nInvalid uuid : org.apache.jackrabbit.ocm.exception.IncorrectAtomicTypeException: Impossible to convert the value into a referenc\navax.jcr.ValueFormatException: not a valid UUID format: 1245\nUUID : 71ca7ca9-ca83-4d23-bd09-6432dbc207e9\nInvalid uuid value in the collection : org.apache.jackrabbit.ocm.exception.ObjectContentManagerException: Cannot insert collecti\nuuid.B; nested exception is javax.jcr.ValueFormatException: not a valid UUID format: 12345\nUUID : 0fd60251-606f-42f8-b4e4-9479cf7bb938\nTests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.353 sec\nRunning org.apache.jackrabbit.ocm.manager.query.DigesterScopeQueryTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.94 sec\nRunning org.apache.jackrabbit.ocm.repository.NodeUtilTest\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 sec\nRunning org.apache.jackrabbit.ocm.manager.jcrnodetype.AnnotationJcrNodeTypeTest\nFolder creation date : java.util.GregorianCalendar[time=1222523380984,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=s\n0,useDaylight=false,transitions=6,lastRule=null],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=2008,MONTH=8,WEEK_OF_YEAR=\nWEEK_IN_MONTH=4,AM_PM=1,HOUR=7,HOUR_OF_DAY=19,MINUTE=19,SECOND=40,MILLISECOND=984,ZONE_OFFSET=19800000,DST_OFFSET=0]\nFile resource calendar: java.util.GregorianCalendar[time=1222523380984,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=\n=0,useDaylight=false,transitions=6,lastRule=null],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=2008,MONTH=8,WEEK_OF_YEAR\n_WEEK_IN_MONTH=4,AM_PM=1,HOUR=7,HOUR_OF_DAY=19,MINUTE=19,SECOND=40,MILLISECOND=984,ZONE_OFFSET=19800000,DST_OFFSET=0]\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.041 sec\nRunning org.apache.jackrabbit.ocm.manager.inheritance.AnnotationInheritanceConcreteClassTest\nTests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 29.571 sec\nRunning org.apache.jackrabbit.ocm.manager.atomic.AnnotationDefaultValueTest\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.095 sec\nRunning org.apache.jackrabbit.ocm.manager.query.AnnotationIteratorQueryTest\ngetObjectIterator takes : 9\ngetObject takes : 39\ngetObjectIterator takes : 2\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.372 sec\nRunning org.apache.jackrabbit.ocm.manager.basic.AnnotationSameNameSiblingTest\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.232 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.DigesterResidualNodesCollectionConverterImplTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.552 sec\nRunning org.apache.jackrabbit.ocm.manager.collectionconverter.AnnotationNTCollectionConverterImplTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.112 sec\nRunning org.apache.jackrabbit.ocm.manager.basic.DigesterAvoidRecursiveLoopTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.13 sec\nRunning org.apache.jackrabbit.ocm.manager.atomic.AnnotationAtomicTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.071 sec\nRunning org.apache.jackrabbit.ocm.manager.auto.AnnotationAutoTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.124 sec\nRunning org.apache.jackrabbit.ocm.manager.version.AnnotationBasicVersionningTest\nBase version : 1.1\nRoot version : jcr:rootVersion\nBase version : 1.1\nRoot version : jcr:rootVersion\nTests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.077 sec\nRunning org.apache.jackrabbit.ocm.manager.query.DigesterAtomicQueryTest\ngetObjects  : 15\ngetObjects 2 : 1\ngetObjects  : 14\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.884 sec\nRunning org.apache.jackrabbit.ocm.manager.basic.DigesterSimpleTest\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.348 sec\nRunning org.apache.jackrabbit.ocm.manager.basic.DigesterSameNameSiblingTest\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.203 sec\nRunning org.apache.jackrabbit.ocm.manager.atomic.DigesterDefaultValueTest\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.092 sec\nRunning org.apache.jackrabbit.ocm.manager.inheritance.AnnotationInheritanceHierarchyTest\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.135 sec\nRunning org.apache.jackrabbit.ocm.manager.interfaces.AnnotationConcreteClassTest\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 11.467 sec\nRunning org.apache.jackrabbit.ocm.repository.RelfectionUtilTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 sec\nRunning org.apache.jackrabbit.ocm.manager.query.AnnotationMultiValueQueryTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.037 sec\nRunning org.apache.jackrabbit.ocm.manager.lock.DigesterLockTest\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.235 sec\nRunning org.apache.jackrabbit.ocm.testmodel.PropertyTest\nTests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.021 sec\nRunning org.apache.jackrabbit.ocm.repository.RepositoryUtilTest\nTests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.031 sec\nRunning org.apache.jackrabbit.ocm.manager.basic.AnnotationAvoidRecursiveLoopTest\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.044 sec\nRunning org.apache.jackrabbit.ocm.manager.basic.DigesterCopyMoveTest\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.552 sec\n\nResults :\n\nTests run: 174, Failures: 0, Errors: 0, Skipped: 0\n\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESSFUL\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 4 minutes 20 seconds\n[INFO] Finished at: Sat Sep 27 19:20:35 IST 2008\n[INFO] Final Memory: 15M/40M\n[INFO] ------------------------------------------------------------------------\n",
            "date": "2008-09-27T13:54:09.231+0000",
            "id": 6
        },
        {
            "author": "Christophe Lombart",
            "body": "I have committed. You can update the project to get my changes. \nIf you have no sufficient time I will review this problem tomorrow. \n\nthanks \n",
            "date": "2008-09-27T14:44:29.484+0000",
            "id": 7
        },
        {
            "author": "Boni Gopalan",
            "body": "I am At revision 699765 of the whole trunk.  All tests are passing. I am attaching my test execution and an updated patch.",
            "date": "2008-09-28T03:21:23.698+0000",
            "id": 8
        },
        {
            "author": "Boni Gopalan",
            "body": "Test results for revision 699765",
            "date": "2008-09-28T03:23:21.457+0000",
            "id": 9
        },
        {
            "author": "Boni Gopalan",
            "body": "and wrt to OCM :\n\nE:\\boni\\jackrabbit-src\\trunk\\jackrabbit-ocm>svn info\nPath: .\nURL: http://svn.apache.org/repos/asf/jackrabbit/trunk/jackrabbit-ocm\nRepository Root: http://svn.apache.org/repos/asf\nRepository UUID: 13f79535-47bb-0310-9956-ffa450edef68\nRevision: 699767\nNode Kind: directory\nSchedule: normal\nLast Changed Author: clombart\nLast Changed Rev: 699628\nLast Changed Date: 2008-09-27 18:07:02 +0530 (Sat, 27 Sep 2008)",
            "date": "2008-09-28T03:36:43.781+0000",
            "id": 10
        },
        {
            "author": "Christophe Lombart",
            "body": "Now it works on my machine with the updated patch - thanks\nI have reviewed your patch and I'm wondering why you have modified the class AbstractMapperImpl with that change : \n@@ -198,7 +200,7 @@\n    public ClassDescriptor getClassDescriptorByClass(Class clazz) {\n \t   ClassDescriptor descriptor = mappingDescriptor.getClassDescriptorByName(clazz.getName());\n \t   if (descriptor==null) {\n-\t\t\tthrow new IncorrectPersistentClassException(\"Class of type: \" + clazz.getName() + \" has no descriptor.\");\n+\t\t\t//throw new IncorrectPersistentClassException(\"Class of type: \" + clazz.getName() + \" has no descriptor.\");\n \t   }\n        return descriptor ;\n    }\n\nIf we keep the old code, your patch is still working. \n",
            "date": "2008-09-28T14:26:52.085+0000",
            "id": 11
        },
        {
            "author": "Christophe Lombart",
            "body": "The patch has been applied  - Thanks for your contribution. ",
            "date": "2008-09-28T19:23:00.884+0000",
            "id": 12
        }
    ],
    "component": "jackrabbit-ocm",
    "description": "Currently MultiValueCollectionConverterImpl  does not support elements of type Object.class.  The type of the contained class has to be specified either through the mapping file or through the Bean annotation.  Even with that flexibility Object.class is specifically excluded (For good reasons.).  \n\nMy view is that by definition MultiValueCollectionConverterImpl   should make a best effort to convert and that best effort should include using Undefined UndefinedTypeConverterImpl to convert an object when all the other conversion strategies run out.  To this resolve I have patched the OCM source.  I have test cases also.  I will upload the patch files right after.",
    "hasPatch": true,
    "hasScreenshot": false,
    "id": "JCR-1762",
    "issuetypeClassified": "IMPROVEMENT",
    "issuetypeTracker": "IMPROVEMENT",
    "priority": "Minor",
    "product": "JACKRABBIT",
    "project": "JACKRABBIT",
    "summary": "Improvement to MultiValueCollectionConverterImpl to Map collections with element class Object.class",
    "systemSpecification": true,
    "version": "1.5"
}