{
    "comments": [
        {
            "author": "Carsten Ziegeler",
            "body": "Proposed patch to set the thread context classloader on thread creation ",
            "date": "2010-01-13T10:11:14.294+0000",
            "id": 0
        },
        {
            "author": "Carsten Ziegeler",
            "body": "I've attached a patch (against 2.0 branch) which solves this problem.",
            "date": "2010-01-13T10:11:35.295+0000",
            "id": 1
        },
        {
            "author": "Jukka Zitting",
            "body": "Thanks! Patch applied in revision 898699 and merged to the 2.0 branch in revision 898702.",
            "date": "2010-01-13T10:23:40.811+0000",
            "id": 2
        }
    ],
    "component": "jackrabbit-core",
    "description": "The RepositoryImpl uses a thread executor with a default thread factory for some background threads. These threads should use the jackrabbit class loader (the classloader used for loading jackrabbit)\nas thread context classloader. Currently the classloader is used which causes a new thread to be greated.\nFor example in combination with Sling the following can happen: a jsp in sling initiates a save to jackrabbit, this causes the indexing to start which is done in a background thread. A new thread is taken from the pool and the thread context class loader is set to the thread context classloader of the jsp/sling. If now Sling is undeployed, jackrabbit still holds this class loader. This creates a hugh memory leak.\n",
    "hasPatch": true,
    "hasScreenshot": false,
    "id": "JCR-2465",
    "issuetypeClassified": "BUG",
    "issuetypeTracker": "BUG",
    "priority": "Critical",
    "product": "JACKRABBIT",
    "project": "JACKRABBIT",
    "summary": "Background threads should use jackrabbit classloader as thread context classloader",
    "systemSpecification": true,
    "version": "2.0-beta5"
}