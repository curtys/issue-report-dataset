{
    "comments": [
        {
            "author": "Jeff Hougentogler",
            "body": "Created an attachment (id=15022)\nReproduces the error.\n",
            "date": "2005-05-14T00:57:52.000+0000",
            "id": 0
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "I think this problem has nothing to do with the user name. I was able to\nestablish that HttpClient 3.0 produced a different auth string compared to that\nproduced by HttpClient 2.0 in response to the same auth challenge:\n\n\nCredentials creds = new UsernamePasswordCredentials(\"domain\\\\username\", \"password\");\nDigestScheme authscheme = new DigestScheme(\"Digest\nqop=\\\"auth\\\",algorithm=MD5-sess,nonce=\\\"b2a83a38cd57c501af3ad2c91f189512060524424ffc2b818c9920db15cd247a9d47cf5a789d63c6\\\",opaque=\\\"1704373a505e74c4ec692978e5c1a539\\\",charset=utf-8,realm=\\\"Digest\\\"\");\nSystem.out.println(authscheme.authenticate(creds, \"GET\", \"/\"));\n\n\nHttpClient 2.0 output: \n\nDigest username=\"domain\\username\", realm=\"Digest\",\nnonce=\"b2a83a38cd57c501af3ad2c91f189512060524424ffc2b818c9920db15cd247a9d47cf5a789d63c6\",\nuri=\"/\", qop=\"auth\", algorithm=\"MD5-sess\", nc=00000001,\ncnonce=\"3e7cee60022e0f9c6d23cd9dea46a033\",\nresponse=\"3c997fba9c2e77e1c37fadd352006a46\",\nopaque=\"1704373a505e74c4ec692978e5c1a539\"\n\nHttpClient 3.0 output: \n\nDigest username=\"domain\\username\", realm=\"Digest\",\nnonce=\"b2a83a38cd57c501af3ad2c91f189512060524424ffc2b818c9920db15cd247a9d47cf5a789d63c6\",\nuri=\"/\", response=\"038567efed48e01d0f08d27526b6ebda\", algorithm=\"MD5-sess\",\nopaque=\"1704373a505e74c4ec692978e5c1a539\"\n\nObviously the responses are different and this may well be the cause of the\nproblem. \n\nI remember the DigestScheme code was revised for better compliance with RFC\n2617. Theoretically HttpClient 3.0 _should_ produce more compliant auth\nresponses. So, I am not entirely sure whether this problem is HttpClient's fault\nor that of MS IIS. \n\nI do encourage you to experiment with HttpClient's code if you want a quick\nresolution to this issue, since you are the only person who can reliably\nreproduce the problem. In my turn I'll try to review HttpClient's handling of\nMD5-sess algorithm for compliance with RFC 2617. I make no promises as to how\nquickly I can do that, though. \n\nOleg",
            "date": "2005-05-14T04:18:38.000+0000",
            "id": 1
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "Jeff,\nI was wrong in my initial assumption, because my test case was flawed. The\ninvalid auth response generated by HttpClient 3.0 was due to a deprecated\nconstructor I used in my test cases. \n\nSo, this does not look good. I may need a set of valid credentials for the site\nin order to proceed.\n\nOleg",
            "date": "2005-05-14T08:21:27.000+0000",
            "id": 2
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "I did some further research. I am certain that given the same auth challenge and\nthe same cnonce value both HttpClient versions produce the same credentials hash\n('response' attribute). The only obvious difference is slightly different\narrangement of attributes in the auth response. I do not think this should\nmatter but currently this is the only plausible theory that can explain the failure\n\nHttpClient 2.0:\n===============\nDigest \n  username=\"domain\\username\", \n  realm=\"Digest\", \n \nnonce=\"b2a83a38cd57c501af3ad2c91f189512060524424ffc2b818c9920db15cd247a9d47cf5a789d63c6\",\n\n  uri=\"/\", \n  qop=\"auth\", \n  algorithm=\"MD5-sess\", \n  nc=00000001, \n  cnonce=\"a9b7ba70783b617e9998dc4dd82eb3c5\", \n  response=\"22c567093b3689e1edf4184fad8218d3\", \n  opaque=\"1704373a505e74c4ec692978e5c1a539\"\n\nHttpClient 3.0:\n===============\nDigest \n  username=\"domain\\username\", \n  realm=\"Digest\", \n \nnonce=\"b2a83a38cd57c501af3ad2c91f189512060524424ffc2b818c9920db15cd247a9d47cf5a789d63c6\",\n\n  uri=\"/\", \n  response=\"22c567093b3689e1edf4184fad8218d3\", \n  qop=\"auth\", \n  nc=00000001, \n  cnonce=\"a9b7ba70783b617e9998dc4dd82eb3c5\", \n  algorithm=\"MD5-sess\", \n  opaque=\"1704373a505e74c4ec692978e5c1a539\"\n\nOleg",
            "date": "2005-05-14T18:48:36.000+0000",
            "id": 3
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "Created an attachment (id=15029)\nTest patch\n\nJeff, could you please test your app with this patch and let me know the\nresult?\n\nMeanwhile I'll try to find an HTTP server that supports MD5-sess I could test\nagainst.\n\nOleg",
            "date": "2005-05-14T19:02:58.000+0000",
            "id": 4
        },
        {
            "author": "Jeff Hougentogler",
            "body": "(In reply to comment #3)\nOleg,\nI think this may be the same problem in the HTTP Client 3.0 code. I overlooked\nthis before, but I checked the 'response' strings in the logs I posted for both\nthe 2.0.2 and 3.0 client and they do NOT match--just like in your initial test\ncase where different responses were generated. I tried the patch too, just in\ncase--no luck though. I seem to remember when I was stepping through the code\nfor the 3.0 client that the cnonce value (which I believe is seeded with the\nsystem time), is hashed into the final 'response' value---I do not know if the\n2.0.2 code does this, but it may be why the 3.0 code is producing a different\nresponse.\n\n> Jeff,\n> I was wrong in my initial assumption, because my test case was flawed. The\n> invalid auth response generated by HttpClient 3.0 was due to a deprecated\n> constructor I used in my test cases. \n> \n> So, this does not look good. I may need a set of valid credentials for the site\n> in order to proceed.\n> \n> Oleg\n\n",
            "date": "2005-05-16T23:31:36.000+0000",
            "id": 5
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "(In reply to comment #6)\n> (In reply to comment #3)\n> Oleg,\n> I think this may be the same problem in the HTTP Client 3.0 code. I overlooked\n> this before, but I checked the 'response' strings in the logs I posted for both\n> the 2.0.2 and 3.0 client and they do NOT match--just like in your initial test\n> case where different responses were generated. I tried the patch too, just in\n> case--no luck though. I seem to remember when I was stepping through the code\n> for the 3.0 client that the cnonce value (which I believe is seeded with the\n> system time), is hashed into the final 'response' value---I do not know if the\n> 2.0.2 code does this, but it may be why the 3.0 code is producing a different\n> response.\n> \n\nI am reasonably sure both versions produce identical 'response' values given the\nsame challenge and cnonce value. \n\nSadly, Apache Http server does not provide support for MD5-sess yet. So, I can't\ntest the code myself and have to rely on the wire log that you have sent. I am\nafraid I will not be able to do much without access to an Microsoft IIS server\nwith Digest MD5-sess authentication on.\n\nOleg",
            "date": "2005-05-17T02:22:19.000+0000",
            "id": 6
        },
        {
            "author": "Jeff Hougentogler",
            "body": "\n(In reply to comment #7)\nI found this on msdn.microsoft.com--it will allow you to create a temporary\nevaluation account. It should allow you to access the URL in the test case I\nattached:\nhttps://mappoint-css.partners.extranet.microsoft.com/MwsSignup/Eval.aspx\n\n> \n> I am reasonably sure both versions produce identical 'response' values given the\n> same challenge and cnonce value. \n> \n> Sadly, Apache Http server does not provide support for MD5-sess yet. So, I can't\n> test the code myself and have to rely on the wire log that you have sent. I am\n> afraid I will not be able to do much without access to an Microsoft IIS server\n> with Digest MD5-sess authentication on.\n> \n> Oleg\n\n",
            "date": "2005-05-17T04:38:32.000+0000",
            "id": 7
        },
        {
            "author": "Jeff Hougentogler",
            "body": "It turned out not to be a digest problem.\n\nI was reading the \"Known Limitations and Problems\" here:\nhttp://jakarta.apache.org/commons/httpclient/3.0/sslguide.html\n\nSince I am using JDK 1.3, I figured I might be having a problem with stale\nconnection checking--which it looks like is enabled by default in httpclient\n2.0.2 and 3.0-rc2. I shut of stale connection checking and it started working in\n3.0-rc2. \n\nAt first, this made no sense because stale connection checking is also enabled\nin 2.0.2 by default. What is different is the way each version implements\nisStale(). The version 2.0.2 httpclient uses a PushbackInputStream, while\nversion 3.0-rc2 uses a BufferedInputStream.\n\nThis may not be a problem in JDK 1.4 at all, but for 1.3 it took a little time\nto figure out. I'm still not entirely sure why this was causing the problem--my\nguess is that because the client thought the connection was stale, it re-opened\na new one for which the nonce value the client had was no longer valid--hence\nthe 401 status code.",
            "date": "2005-05-18T04:40:32.000+0000",
            "id": 8
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "(In reply to comment #9)\n> It turned out not to be a digest problem.\n> \n> I was reading the \"Known Limitations and Problems\" here:\n> http://jakarta.apache.org/commons/httpclient/3.0/sslguide.html\n> \n> Since I am using JDK 1.3, I figured I might be having a problem with stale\n> connection checking--which it looks like is enabled by default in httpclient\n> 2.0.2 and 3.0-rc2. I shut of stale connection checking and it started working in\n> 3.0-rc2. \n> \n> At first, this made no sense because stale connection checking is also enabled\n> in 2.0.2 by default. What is different is the way each version implements\n> isStale(). The version 2.0.2 httpclient uses a PushbackInputStream, while\n> version 3.0-rc2 uses a BufferedInputStream.\n> \n> This may not be a problem in JDK 1.4 at all, but for 1.3 it took a little time\n> to figure out. I'm still not entirely sure why this was causing the problem--my\n> guess is that because the client thought the connection was stale, it re-opened\n> a new one for which the nonce value the client had was no longer valid--hence\n> the 401 status code.\n\nThis kind of explains it. I do not have good explanation as to why the stale\nconnection check produces different results with different version of\nHttpClient, but at least this perfectly explains why Microsoft IIS fails the\nauthentication, as IIS traditionally implements its security context based on\nthe state of a persistent connection.\n\nAnyway, out of this story I brought out three items I would like to follow upon\n\n(1) We need to document this case in the \"Known Limitations and Problems\"\nsection of the SSL guide and provide a link in the authentication guide. I'll\naccept the bug as an enhancement request shortly\n\n(2) While working on this case I discovered the following document:\nhttp://www.microsoft.com/technet/prodtechnol/windowsserver2003/library/TechRef/717b450c-f4a0-4cc9-86f4-cc0633aae5f9.mspx\n\nAs always Microsoft is true to its embrace and extend strategy towards open\nstandards. Their implementation of Digest authentication while appears compliant\nwith RFC 2616 and RFC 2617 in fact represents a superset of the standard with\nsome additional Windows specific aspects. If you are interested in giving me a\nhelping hand (or even taking the lead), we could implement a Windows specific\nversion of DigestScheme\n\n(3) DigestScheme code review made me realize the currently HttpClient does not\ncorrectly handle escaped characters in HTTP elements. \n\nSee an excerpt from Microsoft's \"How Digest Authentication Works\" document below:\n\n<quote>\n* RFC 2617-compliant Digest Authentication challenges and responses must also\ncomply with RFC 2616: Hypertext Transfer Protocol -- HTTP/1.1 quoted string\nrequirements. This requirement particularly affects the use of backslash (\\) and\nembedded double quotes. Both must be preceded (escaped) with a backslash.\n\n* For example, domain\\username according to RFC 2616 is read as domainusername.\nThis reading is important because if an application sends information in this\nformat rather than as domain\\\\username, authentication fails.\n\n* However, because this is a known issue with domain\\username , if\nauthenticating with backslash encoding fails, Digest SSP attempts to\nauthenticate the response and assumes that the backslash is part of the string.\nThis behavior can be turned off by setting the ServerCompat registry key.\n</quote>\n\nI'll file a bug report for this issue shortly\n\nOleg",
            "date": "2005-05-18T20:42:30.000+0000",
            "id": 9
        },
        {
            "author": "Jeff Hougentogler",
            "body": "(in reply to comment #10)\n>As always Microsoft is true to its embrace and extend strategy towards open\n>standards. Their implementation of Digest authentication while appears compliant\n>with RFC 2616 and RFC 2617 in fact represents a superset of the standard with\n>some additional Windows specific aspects. If you are interested in giving me a\n>helping hand (or even taking the lead), we could implement a Windows specific\n>version of DigestScheme\n\nSounds great, I would really like to help/lead that effort.",
            "date": "2005-05-18T22:08:47.000+0000",
            "id": 10
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "(In reply to comment #11)\n> (in reply to comment #10)\n...\n If you are interested in giving me a\n> >helping hand (or even taking the lead), we could implement a Windows specific\n> >version of DigestScheme\n> \n> Sounds great, I would really like to help/lead that effort.\n\nCool. Please add yourself to the CC list of the HTTPCLIENT-460 or better yet\nsubscribe to the httpclient-dev mailing list to monitor the status of the above\nbug report. I'll probably take the first stab at implementing the feature (as\nmost likely DigestScheme class will require some internal modifications to be\nreusable) and pass it onto you for testing and further improvements.\n\nOleg\n",
            "date": "2005-05-18T23:44:15.000+0000",
            "id": 11
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "Created an attachment (id=15407)\nXdocs patch\n\nFolks, please review and do correct my Ruslish as you see fit\n\nOleg",
            "date": "2005-06-15T04:13:39.000+0000",
            "id": 12
        },
        {
            "author": "Ortwin Gl\u00fcck",
            "body": "looks good to me",
            "date": "2005-06-15T07:05:31.000+0000",
            "id": 13
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "Patch committed. HttpClient 3.0 site updated.\n\nOleg",
            "date": "2005-06-16T03:20:24.000+0000",
            "id": 14
        }
    ],
    "component": "HttpClient (classic)",
    "description": "It seems like digest authentication, when used with a username of the format:\ndomain\\username fails in httpclient-3.0-rc2.\n\nI did confirm that digest authentication does work by connecting to a local\nApache HTTP 2.0 server, using just a username and password (no domain\\username).\nHowever, it does not support the MD5-sess algorithm, and the server I am getting\nthe failure from is using MD5-sess. \n\nIt may turn out the username is not causing the problem, but one thing is\nconsistent--I can connect to the site in the logs below using httpclient-2.0.2.\nIt fails when I use identical Java code, with the addition of AuthScope, when\nusing httpclient-3.0-rc2. I will also attach Java code that reproduces the problem.\n\nThe following are wire and debug logs from httpclient-2.0.2 and\nhttpclient-3.0-rc2 respectively. The first one connects and gets an 'HTTP 200'\nresponse. The second one, using 3.0-rc2 fails with an 'HTTP 401'.\n\nLOGS\n===============================================================\ncommons-httpclient-2.0.2 (works):\n2005/05/13 11:05:15:185 EDT [DEBUG] HttpClient - Java version: 1.3.1\n2005/05/13 11:05:15:185 EDT [DEBUG] HttpClient - Java vendor: IBM Corporation\n2005/05/13 11:05:15:185 EDT [DEBUG] HttpClient - Java class path: \n2005/05/13 11:05:15:205 EDT [DEBUG] HttpClient - Operating system name: Windows XP\n2005/05/13 11:05:15:205 EDT [DEBUG] HttpClient - Operating system architecture: x86\n2005/05/13 11:05:15:205 EDT [DEBUG] HttpClient - Operating system version: 5.1\n2005/05/13 11:05:15:205 EDT [DEBUG] HttpClient - SUN 1.2: SUN (DSA key/parameter\ngeneration; DSA signing; SHA-1, MD5 digests; SecureRandom; X.509 certificates;\nJKS keystore)\n2005/05/13 11:05:15:205 EDT [DEBUG] HttpClient - SunJCE 1.22: SunJCE Provider\n(implements DES, Triple DES, Blowfish, PBE, Diffie-Hellman, HMAC-MD5, HMAC-SHA1)\n2005/05/13 11:05:15:205 EDT [DEBUG] HttpClient - SunJSSE 1.0303: Sun JSSE\nprovider(implements RSA Signatures, PKCS12, SunX509 key/trust factories, SSLv3,\nTLSv1)\n2005/05/13 11:05:20:893 EDT [DEBUG] HttpConnection - HttpConnection.setSoTimeout(0)\n2005/05/13 11:05:20:893 EDT [DEBUG] HttpMethodBase - Execute loop try 1\n2005/05/13 11:05:20:913 EDT [DEBUG] header - >> \"GET\n/CustomerData-30/CustomerDataService.asmx HTTP/1.1[\\r][\\n]\"\n2005/05/13 11:05:20:913 EDT [DEBUG] HttpMethodBase - Adding Host request header\n2005/05/13 11:05:20:913 EDT [DEBUG] header - >> \"User-Agent: Jakarta\nCommons-HttpClient/2.0.2[\\r][\\n]\"\n2005/05/13 11:05:20:913 EDT [DEBUG] header - >> \"Host:\nmappoint-css.partners.extranet.microsoft.com[\\r][\\n]\"\n2005/05/13 11:05:21:173 EDT [DEBUG] header - >> \"[\\r][\\n]\"\n2005/05/13 11:05:21:273 EDT [DEBUG] header - << \"HTTP/1.1 401 Unauthorized[\\r][\\n]\"\n2005/05/13 11:05:21:273 EDT [DEBUG] header - << \"Content-Length: 1656[\\r][\\n]\"\n2005/05/13 11:05:21:283 EDT [DEBUG] header - << \"Content-Type: text/html[\\r][\\n]\"\n2005/05/13 11:05:21:283 EDT [DEBUG] header - << \"Server: Microsoft-IIS/6.0[\\r][\\n]\"\n2005/05/13 11:05:21:283 EDT [DEBUG] header - << \"WWW-Authenticate: Digest\nqop=\"auth\",algorithm=MD5-sess,nonce=\"b2a83a38cd57c501af3ad2c91f189512060524424ffc2b818c9920db15cd247a9d47cf5a789d63c6\",opaque=\"1704373a505e74c4ec692978e5c1a539\",charset=utf-8,realm=\"Digest\"[\\r][\\n]\"\n2005/05/13 11:05:21:283 EDT [DEBUG] header - << \"X-Powered-By: ASP.NET[\\r][\\n]\"\n2005/05/13 11:05:21:283 EDT [DEBUG] header - << \"Date: Fri, 13 May 2005 15:05:37\nGMT[\\r][\\n]\"\n2005/05/13 11:05:21:283 EDT [DEBUG] HttpMethodBase - Authorization required\n2005/05/13 11:05:21:283 EDT [DEBUG] HttpAuthenticator - Authenticating with the\n'Digest' authentication realm at mappoint-css.partners.extranet.microsoft.com\n2005/05/13 11:05:21:283 EDT [DEBUG] DigestScheme - Using qop method auth\n2005/05/13 11:05:21:283 EDT [DEBUG] HttpMethodBase - HttpMethodBase.execute():\nServer demanded authentication credentials, will try again.\n2005/05/13 11:05:21:293 EDT [DEBUG] HttpMethodBase - Resorting to protocol\nversion default close connection policy\n2005/05/13 11:05:21:293 EDT [DEBUG] HttpMethodBase - Should NOT close\nconnection, using HTTP/1.1.\n2005/05/13 11:05:21:293 EDT [DEBUG] HttpMethodBase - Execute loop try 2\n2005/05/13 11:05:21:293 EDT [DEBUG] header - >> \"GET\n/CustomerData-30/CustomerDataService.asmx HTTP/1.1[\\r][\\n]\"\n2005/05/13 11:05:21:293 EDT [DEBUG] HttpMethodBase - Request to add Host header\nignored: header already added\n2005/05/13 11:05:21:293 EDT [DEBUG] header - >> \"User-Agent: Jakarta\nCommons-HttpClient/2.0.2[\\r][\\n]\"\n2005/05/13 11:05:21:293 EDT [DEBUG] header - >> \"Host:\nmappoint-css.partners.extranet.microsoft.com[\\r][\\n]\"\n2005/05/13 11:05:21:293 EDT [DEBUG] header - >> \"Authorization: Digest\nusername=\"domain\\user\", realm=\"Digest\",\nnonce=\"b2a83a38cd57c501af3ad2c91f189512060524424ffc2b818c9920db15cd247a9d47cf5a789d63c6\",\nuri=\"/CustomerData-30/CustomerDataService.asmx\", qop=\"auth\",\nalgorithm=\"MD5-sess\", nc=00000001, cnonce=\"393a8abf65cd20f85ffdf46a9273b28b\",\nresponse=\"854bf54261112caf2e86652276cb2ce6\",\nopaque=\"1704373a505e74c4ec692978e5c1a539\"[\\r][\\n]\"\n2005/05/13 11:05:21:293 EDT [DEBUG] header - >> \"[\\r][\\n]\"\n2005/05/13 11:05:21:994 EDT [DEBUG] header - << \"HTTP/1.1 200 OK[\\r][\\n]\"HTTP\nresult: 200\n\n===========================================================\n\ncommons-httpclient-3.0-rc2 (does not work):\n2005/05/13 11:16:54:881 EDT [DEBUG] DefaultHttpParams - -Set parameter\nhttp.useragent = Jakarta Commons-HttpClient/3.0-rc2\n2005/05/13 11:16:54:881 EDT [DEBUG] DefaultHttpParams - -Set parameter\nhttp.protocol.version = HTTP/1.1\n2005/05/13 11:16:54:881 EDT [DEBUG] DefaultHttpParams - -Set parameter\nhttp.connection-manager.class = class\norg.apache.commons.httpclient.SimpleHttpConnectionManager\n2005/05/13 11:16:54:891 EDT [DEBUG] DefaultHttpParams - -Set parameter\nhttp.protocol.cookie-policy = rfc2109\n2005/05/13 11:16:54:891 EDT [DEBUG] DefaultHttpParams - -Set parameter\nhttp.protocol.element-charset = US-ASCII\n2005/05/13 11:16:54:891 EDT [DEBUG] DefaultHttpParams - -Set parameter\nhttp.protocol.content-charset = ISO-8859-1\n2005/05/13 11:16:54:891 EDT [DEBUG] DefaultHttpParams - -Set parameter\nhttp.method.retry-handler =\norg.apache.commons.httpclient.DefaultHttpMethodRetryHandler@5048d78c\n2005/05/13 11:16:54:891 EDT [DEBUG] DefaultHttpParams - -Set parameter\nhttp.dateparser.patterns = [EEE, dd MMM yyyy HH:mm:ss zzz, EEEE, dd-MMM-yy\nHH:mm:ss zzz, EEE MMM d HH:mm:ss yyyy, EEE, dd-MMM-yyyy HH:mm:ss z, EEE,\ndd-MMM-yyyy HH-mm-ss z, EEE, dd MMM yy HH:mm:ss z, EEE dd-MMM-yyyy HH:mm:ss z,\nEEE dd MMM yyyy HH:mm:ss z, EEE dd-MMM-yyyy HH-mm-ss z, EEE dd-MMM-yy HH:mm:ss\nz, EEE dd MMM yy HH:mm:ss z, EEE,dd-MMM-yy HH:mm:ss z, EEE,dd-MMM-yyyy HH:mm:ss\nz, EEE, dd-MM-yyyy HH:mm:ss z]\n2005/05/13 11:16:54:911 EDT [DEBUG] HttpClient - -Java version: 1.3.1\n2005/05/13 11:16:54:911 EDT [DEBUG] HttpClient - -Java vendor: IBM Corporation\n2005/05/13 11:16:54:911 EDT [DEBUG] HttpClient - -Java class path: \n2005/05/13 11:16:54:941 EDT [DEBUG] HttpClient - -Operating system name: Windows XP\n2005/05/13 11:16:54:941 EDT [DEBUG] HttpClient - -Operating system architecture: x86\n2005/05/13 11:16:54:941 EDT [DEBUG] HttpClient - -Operating system version: 5.1\n2005/05/13 11:16:54:941 EDT [DEBUG] HttpClient - -SUN 1.2: SUN (DSA\nkey/parameter generation; DSA signing; SHA-1, MD5 digests; SecureRandom; X.509\ncertificates; JKS keystore)\n2005/05/13 11:16:54:951 EDT [DEBUG] HttpClient - -SunJCE 1.22: SunJCE Provider\n(implements DES, Triple DES, Blowfish, PBE, Diffie-Hellman, HMAC-MD5, HMAC-SHA1)\n2005/05/13 11:16:54:951 EDT [DEBUG] HttpClient - -SunJSSE 1.0303: Sun JSSE\nprovider(implements RSA Signatures, PKCS12, SunX509 key/trust factories, SSLv3,\nTLSv1)\n2005/05/13 11:16:54:961 EDT [DEBUG] HttpConnection - -Open connection to\nmappoint-css.partners.extranet.microsoft.com:443\n2005/05/13 11:17:00:629 EDT [DEBUG] header - ->> \"GET\n/CustomerData-30/CustomerDataService.asmx HTTP/1.1[\\r][\\n]\"\n2005/05/13 11:17:00:629 EDT [DEBUG] HttpMethodBase - -Adding Host request header\n2005/05/13 11:17:00:639 EDT [DEBUG] header - ->> \"User-Agent: Jakarta\nCommons-HttpClient/3.0-rc2[\\r][\\n]\"\n2005/05/13 11:17:00:639 EDT [DEBUG] header - ->> \"Host:\nmappoint-css.partners.extranet.microsoft.com[\\r][\\n]\"\n2005/05/13 11:17:00:639 EDT [DEBUG] header - ->> \"[\\r][\\n]\"\n2005/05/13 11:17:00:989 EDT [DEBUG] header - -<< \"HTTP/1.1 401 Unauthorized[\\r][\\n]\"\n2005/05/13 11:17:00:999 EDT [DEBUG] header - -<< \"Content-Length: 1656[\\r][\\n]\"\n2005/05/13 11:17:00:999 EDT [DEBUG] header - -<< \"Content-Type: text/html[\\r][\\n]\"\n2005/05/13 11:17:00:999 EDT [DEBUG] header - -<< \"Server: Microsoft-IIS/6.0[\\r][\\n]\"\n2005/05/13 11:17:00:999 EDT [DEBUG] header - -<< \"WWW-Authenticate: Digest\nqop=\"auth\",algorithm=MD5-sess,nonce=\"c66759cace57c5016cf5645c6dee5b649ed29067f652939d6aaf7239310bb333eeb0153783ae445f\",opaque=\"e7e259c137b65766c971d6cfc4115789\",charset=utf-8,realm=\"Digest\"[\\r][\\n]\"\n2005/05/13 11:17:00:999 EDT [DEBUG] header - -<< \"X-Powered-By: ASP.NET[\\r][\\n]\"\n2005/05/13 11:17:00:999 EDT [DEBUG] header - -<< \"Date: Fri, 13 May 2005\n15:16:51 GMT[\\r][\\n]\"\n2005/05/13 11:17:00:999 EDT [DEBUG] HttpMethodDirector - -Authorization required\n2005/05/13 11:17:01:009 EDT [DEBUG] AuthChallengeProcessor - -Supported\nauthentication schemes in the order of preference: [ntlm, digest, basic]\n2005/05/13 11:17:01:009 EDT [DEBUG] AuthChallengeProcessor - -Challenge for ntlm\nauthentication scheme not available\n2005/05/13 11:17:01:009 EDT [INFO] AuthChallengeProcessor - -digest\nauthentication scheme selected\n2005/05/13 11:17:01:009 EDT [DEBUG] AuthChallengeProcessor - -Using\nauthentication scheme: digest\n2005/05/13 11:17:01:009 EDT [DEBUG] AuthChallengeProcessor - -Authorization\nchallenge processed\n2005/05/13 11:17:01:009 EDT [DEBUG] HttpMethodDirector - -Authentication scope:\nDIGEST 'Digest'@mappoint-css.partners.extranet.microsoft.com:443\n2005/05/13 11:17:01:009 EDT [DEBUG] HttpMethodDirector - -Retry authentication\n2005/05/13 11:17:01:019 EDT [DEBUG] HttpMethodBase - -Resorting to protocol\nversion default close connection policy\n2005/05/13 11:17:01:019 EDT [DEBUG] HttpMethodBase - -Should NOT close\nconnection, using HTTP/1.1\n2005/05/13 11:17:01:019 EDT [DEBUG] HttpConnection - -Connection is locked. \nCall to releaseConnection() ignored.\n2005/05/13 11:17:01:019 EDT [DEBUG] HttpMethodDirector - -Authenticating with\nDIGEST 'Digest'@mappoint-css.partners.extranet.microsoft.com:443\n2005/05/13 11:17:01:019 EDT [DEBUG] HttpMethodParams - -Credential charset not\nconfigured, using HTTP element charset\n2005/05/13 11:17:01:019 EDT [DEBUG] DigestScheme - -Using qop method auth\n2005/05/13 11:17:01:019 EDT [DEBUG] HttpConnection - -Connection is stale,\nclosing...\n2005/05/13 11:17:01:019 EDT [DEBUG] HttpConnection - -Open connection to\nmappoint-css.partners.extranet.microsoft.com:443\n2005/05/13 11:17:01:110 EDT [DEBUG] header - ->> \"GET\n/CustomerData-30/CustomerDataService.asmx HTTP/1.1[\\r][\\n]\"\n2005/05/13 11:17:01:110 EDT [DEBUG] HttpMethodBase - -Adding Host request header\n2005/05/13 11:17:01:110 EDT [DEBUG] header - ->> \"User-Agent: Jakarta\nCommons-HttpClient/3.0-rc2[\\r][\\n]\"\n2005/05/13 11:17:01:110 EDT [DEBUG] header - ->> \"Authorization: Digest\nusername=\"domain\\user\", realm=\"Digest\",\nnonce=\"c66759cace57c5016cf5645c6dee5b649ed29067f652939d6aaf7239310bb333eeb0153783ae445f\",\nuri=\"/CustomerData-30/CustomerDataService.asmx\",\nresponse=\"9cab4fcdb2d09f57523aec80d7b51e95\", qop=\"auth\", nc=00000001,\ncnonce=\"b27507ee79c880b2bb565d363598ce07\", algorithm=\"MD5-sess\",\nopaque=\"e7e259c137b65766c971d6cfc4115789\"[\\r][\\n]\"\n2005/05/13 11:17:01:120 EDT [DEBUG] header - ->> \"Host:\nmappoint-css.partners.extranet.microsoft.com[\\r][\\n]\"\n2005/05/13 11:17:01:120 EDT [DEBUG] header - ->> \"[\\r][\\n]\"\n2005/05/13 11:17:01:540 EDT [DEBUG] header - -<< \"HTTP/1.1 401 Unauthorized[\\r][\\n]\"\n2005/05/13 11:17:01:540 EDT [DEBUG] header - -<< \"Content-Length: 1539[\\r][\\n]\"\n2005/05/13 11:17:01:540 EDT [DEBUG] header - -<< \"Content-Type: text/html[\\r][\\n]\"\n2005/05/13 11:17:01:550 EDT [DEBUG] header - -<< \"Server: Microsoft-IIS/6.0[\\r][\\n]\"\n2005/05/13 11:17:01:550 EDT [DEBUG] header - -<< \"WWW-Authenticate: Digest\nqop=\"auth\",algorithm=MD5-sess,nonce=\"3296b0dace57c5012fe314f8c6f8cafd10abc7a61c09484b2be5c7ef19ecb3c080da1f82c3f5a532\",opaque=\"87578a7f0871280654aed868cb9497fb\",charset=utf-8,realm=\"Digest\"[\\r][\\n]\"\n2005/05/13 11:17:01:550 EDT [DEBUG] header - -<< \"X-Powered-By: ASP.NET[\\r][\\n]\"\n2005/05/13 11:17:01:550 EDT [DEBUG] header - -<< \"Date: Fri, 13 May 2005\n15:17:19 GMT[\\r][\\n]\"\n2005/05/13 11:17:01:550 EDT [DEBUG] HttpMethodDirector - -Authorization required\n2005/05/13 11:17:01:550 EDT [DEBUG] AuthChallengeProcessor - -Using\nauthentication scheme: digest\n2005/05/13 11:17:01:550 EDT [DEBUG] AuthChallengeProcessor - -Authorization\nchallenge processed\n2005/05/13 11:17:01:550 EDT [DEBUG] HttpMethodDirector - -Authentication scope:\nDIGEST 'Digest'@mappoint-css.partners.extranet.microsoft.com:443\n2005/05/13 11:17:01:550 EDT [DEBUG] HttpMethodDirector - -Credentials required\nHTTP result: 401\n2005/05/13 11:17:01:550 EDT [DEBUG] HttpMethodDirector - -Credentials provider\nnot available\n2005/05/13 11:17:01:580 EDT [INFO] HttpMethodDirector - -Failure authenticating\nwith DIGEST 'Digest'@mappoint-css.partners.extranet.microsoft.com:443\n2005/05/13 11:17:01:580 EDT [DEBUG] HttpMethodBase - -Buffering response body\n2005/05/13 11:17:01:580 EDT [DEBUG] HttpMethodBase - -Resorting to protocol\nversion default close connection policy\n2005/05/13 11:17:01:580 EDT [DEBUG] HttpMethodBase - -Should NOT close\nconnection, using HTTP/1.1\n2005/05/13 11:17:01:580 EDT [DEBUG] HttpConnection - -Releasing connection back\nto connection manager.",
    "hasPatch": true,
    "hasScreenshot": false,
    "id": "HTTPCLIENT-459",
    "issuetypeClassified": "IMPROVEMENT",
    "issuetypeTracker": "IMPROVEMENT",
    "priority": "Minor",
    "product": "HTTPCLIENT",
    "project": "HTTPCLIENT",
    "summary": "Document the problem with MS impl of digest authentication with older JREs and stale connection check",
    "systemSpecification": true,
    "version": "3.0 RC2"
}