{
    "comments": [
        {
            "author": "Oleg Kalnichevski",
            "body": "Cliff,\nThis bug has been fixed a while ago. Please upgrade to the most recent nightly\nbuild. \n\nhttp://jakarta.apache.org/commons/httpclient/downloads.html\n\nBeta-1 release is due next week\n\n*** This bug has been marked as a duplicate of 17432 ***",
            "date": "2003-04-06T16:17:14.000+0000",
            "id": 0
        },
        {
            "author": "Andy",
            "body": "Hello,\n\ni've got the same problem like Cliff. My sample code posts a xml file to \na servlet on a tomcat-4.1.18 / tomcat-4.1.24 server and response a very \nsimple html page. The sample code likes the sample PostXML.java of httpclient.\n\nWith JDK 1.4.1_02 and commons-httpclient-20030408.zip everything works fine \nbut with JDK 1.3.1_07 the application response the following data: \n\n...\n\n65854 [main] WARN org.apache.commons.httpclient.HttpMethod  - Recoverable\nexception caught when reading response\n65854 [main] DEBUG org.apache.commons.httpclient.HttpMethod  - Closing the\nconnection.\n65854 [main] DEBUG org.apache.commons.httpclient.HttpConnection  - enter\nHttpConnection.close()\n65854 [main] DEBUG org.apache.commons.httpclient.HttpConnection  - enter\nHttpConnection.closeSockedAndStreams()\n65854 [main] ERROR Testclient  - IOException:\norg.apache.commons.httpclient.HttpRecoverableException: Error in parsing the\nstatus  line from the response: unable to find line starting with \"HTTP\"\n",
            "date": "2003-04-08T21:34:02.000+0000",
            "id": 1
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "Andy,\n\nWhat I can see from the debug trace is that HttpClient does not seem to receive \nany response from the server. I am not sure at all that it's HttpClient at \nfault here\n\n 1) Are you using SSL?\n 2) If yes, are you sure SSL is properly configured for JDK 1.3.1_07?\n 3) Can you provide me with the complete wire/debug log?\n\nOleg",
            "date": "2003-04-08T21:44:35.000+0000",
            "id": 2
        },
        {
            "author": "Andy",
            "body": "Created an attachment (id=5694)\nLog file\n",
            "date": "2003-04-08T22:22:28.000+0000",
            "id": 3
        },
        {
            "author": "Andy",
            "body": "Created an attachment (id=5695)\nLog file\n",
            "date": "2003-04-08T22:24:42.000+0000",
            "id": 4
        },
        {
            "author": "Andy",
            "body": "Created an attachment (id=5696)\nLog file\n",
            "date": "2003-04-08T22:24:58.000+0000",
            "id": 5
        },
        {
            "author": "Andy",
            "body": "Created an attachment (id=5697)\nLog file\n",
            "date": "2003-04-08T22:25:03.000+0000",
            "id": 6
        },
        {
            "author": "Andy",
            "body": "Created an attachment (id=5698)\nLog file\n",
            "date": "2003-04-08T22:25:48.000+0000",
            "id": 7
        },
        {
            "author": "Andy",
            "body": "Hey Oleg,\n\n 1) Are you using SSL?\n 2) If yes, are you sure SSL is properly configured for JDK 1.3.1_07?\n 3) Can you provide me with the complete wire/debug log?\n\n\n1.) Yes, i'm using ssl.\n2.) Yes, I think so. I've tried a https GET request with httpclient-2.0a3 (!!!)\neverything works fine, but with all newer versions of httpclient GET and POST \nrequests doesn't work anymore.\n\n3.) Logging: Please, see the attachement. \nSorry, i send the logfile 5 times. \nfirst read, then click ...\n",
            "date": "2003-04-08T22:31:06.000+0000",
            "id": 8
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "Andy, all I can see from these logs is that the server fails to send back any \nsort of response. Please examine server's logs to find out whay may be causing \nthe problem on the server side. \n\n1) Could you please send me the wire log generated by 2.0alpha3 for comparison?\n2) Could you please try executing the same request using plain HTTP and see if \nthat works?\n\nOleg",
            "date": "2003-04-08T22:41:44.000+0000",
            "id": 9
        },
        {
            "author": "Andy",
            "body": "Created an attachment (id=5700)\ngetxml-httpclient-2.0a3.log, https get request (jdk1.3.1_07), everything works fine\n",
            "date": "2003-04-08T23:03:30.000+0000",
            "id": 10
        },
        {
            "author": "Andy",
            "body": "Created an attachment (id=5701)\npostxml-httpclient-2.0a3.log, https post request (jdk1.3.1_07) ,  response status code 100\n",
            "date": "2003-04-08T23:11:13.000+0000",
            "id": 11
        },
        {
            "author": "Andy",
            "body": "Oleg,\n\ni send two log files (https get works fine, https post doesn't work). \nThis is the tomcat server log entry for one requests:\n2003-04-08 18:03:04 InvokerFilter(ApplicationFilterConfig[name=Path Mapped\nFilter, filterClass=filters.ExampleFilter]): 0 millisesconds\n\nThanks for your trouble :-)",
            "date": "2003-04-08T23:21:38.000+0000",
            "id": 12
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "Andy, so far there's nothing to thank me for. I missed the point regarding the \nTomcat. Are you saying that the request was filtered out? \n\nOleg",
            "date": "2003-04-08T23:34:52.000+0000",
            "id": 13
        },
        {
            "author": "Andy",
            "body": "Oleg, the tomcat server logs only if the he can handle the request. None of\nthe nightly versions (0407, 0408) which I tested write a log entry.\n\nLast night I've tested the original 2.0a3 httpclient with a https request\n(GET, POST) once again. And what did I see ??? If setHttp11(false) it works \nfine with the tomcat. But if i change to a nightly build httplient nothing \nworks.\n\nIf the application sends a GET/POST request, the following is written into \nthe tomcat log file (only httpclient-2.0a3, works fine):\n\n2003-04-08 18:03:04 InvokerFilter(ApplicationFilterConfig[name=Path Mapped\nFilter, filterClass=filters.ExampleFilter]): 0 millisesconds\n\nAndy",
            "date": "2003-04-09T15:09:12.000+0000",
            "id": 14
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "> the tomcat server logs only if the he can handle the request. None of\nthe nightly versions (0407, 0408) which I tested write a log entry.\n\nI do not think you are right. If Tomcat drops a request for whatever reason, an \nentry stating this fact should be added to the log.\n\nSince there's no corresponding entry in the Tomcat log, it leads me to assume \nthat the request has not reached the servlet engine at all. If was dropped off \nbefore it could hit Tomcat. Maybe at the SSL layer or even earlier. That \nexlains why HttpClient does not receive a response. \n\nAre you hitting Tomcat directly or through a HTTP server? Is there a proxy or a \nfirewall between the client and the server? \n\nHave you tried using plain HTTP? This is important. Please do test plain HTTP\n\n> And what did I see ??? If setHttp11(false) it works fine with the tomcat. \n\nSure. 'expect: 100-continue' handshake is only used with HTTP/1.1\n\nI think something is fishy about your local setup. There have been no changes \nin the HTTP GET logic since alpha-3. HTTP GET should work in any case. Since it \ndoes not, I tend to believe that the problem you have been experiencing is not \ndue to a flaw in HttpClient\n\nOleg",
            "date": "2003-04-09T15:40:44.000+0000",
            "id": 15
        },
        {
            "author": "Andy",
            "body": "I'm hitting the tomcat server directly without any proxy or HTTP server. \n\nWith plain HTTP everything works fine. All POST and GET requests will be \nresponse (httpclient nightly or 2.0a3).\n\nI've also tested tomcat server on my local machine but i got the same errors like\nthe network access.\n\nNotice with the jdk1.4.1_02 all(!!!) works fine. Could it be a problem with my \njdk1.3.1_07 / JSSE configuration ?\n",
            "date": "2003-04-09T17:54:47.000+0000",
            "id": 16
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "> Could it be a problem with my jdk1.3.1_07 / JSSE configuration ?\n\nAndi, that's what I have been hinting at all along. I have just downloaded JDK \n1.3.1.07 for Windows and I'll try to emulate your environment as close as \npossible. If I fail to reproduce the problem I'll have to mark this bug report \nas 'works for me'\n\nOleg",
            "date": "2003-04-09T19:22:38.000+0000",
            "id": 17
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "Andi, you were right. I was wrong. It does appear to be a bug in HttpClient\nintroduced by a post 2.0a3 feature. The bug is reproducible across various Sun's\nJDK below 1.4.1 (Sun JDK 1.2.2.13 & Sun JDK 1.3.1.07 with JCE 1.2.2 & JSSE\n1.0.3.01) and across various platforms (Windows 2000 server SP3, Redhat Linux\n9). Sun JDK 1.4.1.b21 does not exhibit this problem. \n\nI'll be working on a fix. Many thanks for tracking the bug down\n\nOleg",
            "date": "2003-04-09T22:41:57.000+0000",
            "id": 18
        },
        {
            "author": "Michael Becke",
            "body": "Created an attachment (id=5751)\nfix\n",
            "date": "2003-04-10T04:25:25.000+0000",
            "id": 19
        },
        {
            "author": "Michael Becke",
            "body": "It looks like pre-1.4 implementations were counting on the method write(byte[],\nint, int) being called on the SSL socket.  When wrapped in a standard\nFilterOutputStream this method is never called.\n\nMike",
            "date": "2003-04-10T04:27:14.000+0000",
            "id": 20
        },
        {
            "author": "Michael Becke",
            "body": "Created an attachment (id=5758)\nslightly better patch\n",
            "date": "2003-04-10T10:22:56.000+0000",
            "id": 21
        },
        {
            "author": "Michael Becke",
            "body": "This is pretty much the same as the previous patch, but it's a little more\nthorough I think.\n\nMike",
            "date": "2003-04-10T10:24:14.000+0000",
            "id": 22
        },
        {
            "author": "Oleg Kalnichevski",
            "body": "Mike, the patch looks ok to me. I think you should go ahead and commit it\n\nOleg",
            "date": "2003-04-11T00:23:05.000+0000",
            "id": 23
        },
        {
            "author": "Michael Becke",
            "body": "Patch applied.",
            "date": "2003-04-11T06:39:11.000+0000",
            "id": 24
        }
    ],
    "component": "HttpClient (classic)",
    "description": "Using Java 1.4.1_01 on Windows 2000. An HTTPS Post results in HTTP/100-Continue \nmessages. The same code posting to a non HTTPS URL works. The code populates \nthe request body using a NameValuePair array.",
    "hasPatch": true,
    "hasScreenshot": false,
    "id": "HTTPCLIENT-179",
    "issuetypeClassified": "BUG",
    "issuetypeTracker": "BUG",
    "priority": "Major",
    "product": "HTTPCLIENT",
    "project": "HTTPCLIENT",
    "summary": "HTTPS Post Does Not Work",
    "systemSpecification": true,
    "version": "2.0 Alpha 2"
}