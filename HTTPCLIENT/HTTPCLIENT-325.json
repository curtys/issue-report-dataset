{
    "comments": [
        {
            "author": "Eric Johnson",
            "body": "Deadlocks I've seen with MultiThreadedHttpConnectionManager are always due to a\nclient that is not properly calling releaseConnection() on the requests.  A few\nthings to try - raise or lower the number of connections that it manages, and\nyour deadlock will occur in a different place.  That might tell you whether and\nwhere you are leaking connections.\n\nWas this working with a previous release (rc2, for example), and is only now\nbroken?  Can you describe/provide the code you're using to invoke HttpClient?",
            "date": "2004-03-05T00:04:10.000+0000",
            "id": 0
        },
        {
            "author": "Ludovic Claude",
            "body": "Created an attachment (id=10676)\nSource code\n",
            "date": "2004-03-05T23:46:40.000+0000",
            "id": 1
        },
        {
            "author": "Ludovic Claude",
            "body": "I'm trying to read the following page: \nhttp://cvs.sourceforge.net/viewcvs.py/mevenide\n\nI'm attaching the code of the class that is reading the web pages, it is quite\nstand-alone, i'll try to provide a test case later.\n\nAnd yes, it was working previously with the 2.0 rc2 release. \n\nThis is the trace returned by HttpClient, apparently this:\n[DEBUG] Unable to get a connection, waiting...,\nhostConfig=HostConfiguration[host=cvs.sourceforge.net, protocol=http:80, port=80]\nexplains why it blocks, now the question is why is it unable to open a\nconnection? There can be up to 3 simultaneous connections in my application, but\nthis problem occurs at the start of the application, when pages are read\nsequentially on the same thread. \n\n[TRACE] enter GetMethod(String)\n[TRACE] enter HttpClient.executeMethod(HttpMethod)\n[TRACE] enter HttpClient.executeMethod(HostConfiguration,HttpMethod,HttpState)\n[TRACE] enter HttpConnectionManager.getConnection(HostConfiguration, long)\n[DEBUG] HttpConnectionManager.getConnection:  config =\nHostConfiguration[host=cvs.sourceforge.net, protocol=http:80, port=80], timeout = 0\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[DEBUG] Getting free connection,\nhostConfig=HostConfiguration[host=cvs.sourceforge.net, protocol=http:80, port=80]\n[DEBUG] HttpConnection.setSoTimeout(0)\n[DEBUG] Connection is stale, closing...\n[TRACE] enter HttpConnection.close()\n[TRACE] enter HttpConnection.closeSockedAndStreams()\n[TRACE] enter HttpConnection.open()\n[TRACE] enter HttpMethodBase.execute(HttpState, HttpConnection)\n[DEBUG] Execute loop try 1\n[TRACE] enter HttpMethodBase.processRequest(HttpState, HttpConnection)\n[TRACE] Attempt number 1 to process request\n[TRACE] enter HttpMethodBase.writeRequest(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.writeRequestLine(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.generateRequestLine(HttpConnection, String, String,\nString, String)\n[DEBUG] >> \"GET /viewcvs.py/mevenide/ HTTP/1.1[\\r][\\n]\"\n[TRACE] enter HttpConnection.print(String)\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[TRACE] enter HttpMethodBase.writeRequestHeaders(HttpState,HttpConnection)\n[TRACE] enter HttpMethodBase.addRequestHeaders(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.addUserAgentRequestHeaders(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.addHostRequestHeader(HttpState, HttpConnection)\n[DEBUG] Adding Host request header\n[TRACE] enter HttpMethodBase.addCookieRequestHeader(HttpState, HttpConnection)\n[TRACE] enter HttpState.getCookies()\n[TRACE] enter CookieSpecBase.match(String, int, String, boolean, Cookie[])\n[TRACE] enter HttpMethodBase.addAuthorizationRequestHeader(HttpState,\nHttpConnection)\n[TRACE] enter HttpMethodBase.addProxyAuthorizationRequestHeader(HttpState,\nHttpConnection)\n[TRACE] enter HttpMethodBase.addProxyConnectionHeader(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.addContentLengthRequestHeader(HttpState,\nHttpConnection)\n[DEBUG] >> \"User-Agent: Mozilla/4.0 (compatible; MSIE 6.0b; Windows 98)[\\r][\\n]\"\n[TRACE] enter HttpConnection.print(String)\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[DEBUG] >> \"Cache-Control: no-cache[\\r][\\n]\"\n[TRACE] enter HttpConnection.print(String)\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[DEBUG] >> \"Host: cvs.sourceforge.net[\\r][\\n]\"\n[TRACE] enter HttpConnection.print(String)\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[TRACE] enter HttpConnection.writeLine()\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[TRACE] enter HttpConnection.flushRequestOutputStream()\n[DEBUG] >> \"[\\r][\\n]\"\n[TRACE] enter HttpConnection.flushRequestOutputStream()\n[TRACE] enter HttpMethodBase.readResponse(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.readStatusLine(HttpState, HttpConnection)\n[TRACE] enter HttpConnection.readLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[DEBUG] << \"HTTP/1.1 200 OK[\\r][\\n]\"\n[TRACE] enter HttpMethodBase.readResponseHeaders(HttpState,HttpConnection)\n[TRACE] enter HttpConnection.getResponseInputStream()\n[TRACE] enter HeaderParser.parseHeaders(HttpConnection, HeaderGroup)\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[DEBUG] << \"Date: Fri, 05 Mar 2004 15:22:14 GMT[\\r][\\n]\"\n[DEBUG] << \"Server: Apache/2.0.40 (Red Hat Linux)[\\r][\\n]\"\n[DEBUG] << \"Content-Type: text/html; charset=ISO-8859-1[\\r][\\n]\"\n[DEBUG] << \"Connection: close[\\r][\\n]\"\n[DEBUG] << \"Transfer-Encoding: chunked[\\r][\\n]\"\n[TRACE] enter HttpMethodBase.processResponseHeaders(HttpState, HttpConnection)\n[TRACE] enter GetMethod.readResponseBody(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.readResponseBody(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.readResponseBody(HttpState, HttpConnection)\n[TRACE] enter HttpConnection.getResponseInputStream()\n[TRACE] enter HeaderElement.parse(String)\n[TRACE] enter HeaderElement.parsePair(char[], int, int)\n[DEBUG] HttpConnection.getSoTimeout()\n[TRACE] enter HttpConnection.isResponseAvailable(int)\n[TRACE] enter GetMethod(String)\n[TRACE] enter HttpClient.executeMethod(HttpMethod)\n[TRACE] enter HttpClient.executeMethod(HostConfiguration,HttpMethod,HttpState)\n[TRACE] enter HttpConnectionManager.getConnection(HostConfiguration, long)\n[DEBUG] HttpConnectionManager.getConnection:  config = HostConfiguration[],\ntimeout = 0\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[DEBUG] Allocating new connection, hostConfig=HostConfiguration[]\n[TRACE] enter GetMethod(String)\n[TRACE] enter HttpClient.executeMethod(HttpMethod)\n[TRACE] enter HttpClient.executeMethod(HostConfiguration,HttpMethod,HttpState)\n[TRACE] enter HttpConnectionManager.getConnection(HostConfiguration, long)\n[DEBUG] HttpConnectionManager.getConnection:  config =\nHostConfiguration[host=cvs.sourceforge.net, protocol=http:80, port=80], timeout = 0\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[DEBUG] Allocating new connection,\nhostConfig=HostConfiguration[host=cvs.sourceforge.net, protocol=http:80, port=80]\n[DEBUG] HttpConnection.setSoTimeout(0)\n[TRACE] enter HttpConnection.open()\n[TRACE] enter HttpMethodBase.execute(HttpState, HttpConnection)\n[DEBUG] Execute loop try 1\n[TRACE] enter HttpMethodBase.processRequest(HttpState, HttpConnection)\n[TRACE] Attempt number 1 to process request\n[TRACE] enter HttpMethodBase.writeRequest(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.writeRequestLine(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.generateRequestLine(HttpConnection, String, String,\nString, String)\n[DEBUG] >> \"GET /viewcvs.py/mevenide/ HTTP/1.1[\\r][\\n]\"\n[TRACE] enter HttpConnection.print(String)\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[TRACE] enter HttpMethodBase.writeRequestHeaders(HttpState,HttpConnection)\n[TRACE] enter HttpMethodBase.addRequestHeaders(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.addUserAgentRequestHeaders(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.addHostRequestHeader(HttpState, HttpConnection)\n[DEBUG] Adding Host request header\n[TRACE] enter HttpMethodBase.addCookieRequestHeader(HttpState, HttpConnection)\n[TRACE] enter HttpState.getCookies()\n[TRACE] enter CookieSpecBase.match(String, int, String, boolean, Cookie[])\n[TRACE] enter HttpMethodBase.addAuthorizationRequestHeader(HttpState,\nHttpConnection)\n[TRACE] enter HttpMethodBase.addProxyAuthorizationRequestHeader(HttpState,\nHttpConnection)\n[TRACE] enter HttpMethodBase.addProxyConnectionHeader(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.addContentLengthRequestHeader(HttpState,\nHttpConnection)\n[DEBUG] >> \"User-Agent: Mozilla/4.0 (compatible; MSIE 6.0b; Windows 98)[\\r][\\n]\"\n[TRACE] enter HttpConnection.print(String)\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[DEBUG] >> \"Cache-Control: no-cache[\\r][\\n]\"\n[TRACE] enter HttpConnection.print(String)\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[DEBUG] >> \"Host: cvs.sourceforge.net[\\r][\\n]\"\n[TRACE] enter HttpConnection.print(String)\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[TRACE] enter HttpConnection.writeLine()\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[TRACE] enter HttpConnection.flushRequestOutputStream()\n[DEBUG] >> \"[\\r][\\n]\"\n[TRACE] enter HttpConnection.flushRequestOutputStream()\n[TRACE] enter HttpMethodBase.readResponse(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.readStatusLine(HttpState, HttpConnection)\n[TRACE] enter HttpConnection.readLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[DEBUG] << \"HTTP/1.1 200 OK[\\r][\\n]\"\n[TRACE] enter HttpMethodBase.readResponseHeaders(HttpState,HttpConnection)\n[TRACE] enter HttpConnection.getResponseInputStream()\n[TRACE] enter HeaderParser.parseHeaders(HttpConnection, HeaderGroup)\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[DEBUG] << \"Date: Fri, 05 Mar 2004 15:22:41 GMT[\\r][\\n]\"\n[DEBUG] Connection reclaimed by garbage collector,\nhostConfig=HostConfiguration[host=sourceforge.net, protocol=http:80, port=80]\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[DEBUG] Notifying no-one, there are no waiting threads\n[DEBUG] Connection reclaimed by garbage collector,\nhostConfig=HostConfiguration[host=cvs.sourceforge.net, protocol=http:80, port=80]\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[DEBUG] Notifying no-one, there are no waiting threads\n[DEBUG] << \"Server: Apache/2.0.40 (Red Hat Linux)[\\r][\\n]\"\n[DEBUG] << \"Connection: close[\\r][\\n]\"\n[DEBUG] << \"Transfer-Encoding: chunked[\\r][\\n]\"\n[DEBUG] << \"Content-Type: text/html; charset=ISO-8859-1[\\r][\\n]\"\n[TRACE] enter HttpMethodBase.processResponseHeaders(HttpState, HttpConnection)\n[TRACE] enter GetMethod.readResponseBody(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.readResponseBody(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.readResponseBody(HttpState, HttpConnection)\n[TRACE] enter HttpConnection.getResponseInputStream()\n[TRACE] enter HeaderElement.parse(String)\n[TRACE] enter HeaderElement.parsePair(char[], int, int)\n[DEBUG] HttpConnection.getSoTimeout()\n[TRACE] enter HttpConnection.isResponseAvailable(int)\n[TRACE] enter GetMethod(String)\n[TRACE] enter HttpClient.executeMethod(HttpMethod)\n[TRACE] enter HttpClient.executeMethod(HostConfiguration,HttpMethod,HttpState)\n[TRACE] enter HttpConnectionManager.getConnection(HostConfiguration, long)\n[DEBUG] HttpConnectionManager.getConnection:  config = HostConfiguration[],\ntimeout = 0\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[DEBUG] Allocating new connection, hostConfig=HostConfiguration[]\n[TRACE] enter GetMethod(String)\n[TRACE] enter HttpClient.executeMethod(HttpMethod)\n[TRACE] enter HttpClient.executeMethod(HostConfiguration,HttpMethod,HttpState)\n[TRACE] enter HttpConnectionManager.getConnection(HostConfiguration, long)\n[DEBUG] HttpConnectionManager.getConnection:  config =\nHostConfiguration[host=cvs.sourceforge.net, protocol=http:80, port=80], timeout = 0\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[DEBUG] Allocating new connection,\nhostConfig=HostConfiguration[host=cvs.sourceforge.net, protocol=http:80, port=80]\n[DEBUG] HttpConnection.setSoTimeout(0)\n[TRACE] enter HttpConnection.open()\n[TRACE] enter HttpMethodBase.execute(HttpState, HttpConnection)\n[DEBUG] Execute loop try 1\n[TRACE] enter HttpMethodBase.processRequest(HttpState, HttpConnection)\n[TRACE] Attempt number 1 to process request\n[TRACE] enter HttpMethodBase.writeRequest(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.writeRequestLine(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.generateRequestLine(HttpConnection, String, String,\nString, String)\n[DEBUG] >> \"GET /viewcvs.py/mevenide/ HTTP/1.1[\\r][\\n]\"\n[TRACE] enter HttpConnection.print(String)\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[TRACE] enter HttpMethodBase.writeRequestHeaders(HttpState,HttpConnection)\n[TRACE] enter HttpMethodBase.addRequestHeaders(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.addUserAgentRequestHeaders(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.addHostRequestHeader(HttpState, HttpConnection)\n[DEBUG] Adding Host request header\n[TRACE] enter HttpMethodBase.addCookieRequestHeader(HttpState, HttpConnection)\n[TRACE] enter HttpState.getCookies()\n[TRACE] enter CookieSpecBase.match(String, int, String, boolean, Cookie[])\n[TRACE] enter HttpMethodBase.addAuthorizationRequestHeader(HttpState,\nHttpConnection)\n[TRACE] enter HttpMethodBase.addProxyAuthorizationRequestHeader(HttpState,\nHttpConnection)\n[TRACE] enter HttpMethodBase.addProxyConnectionHeader(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.addContentLengthRequestHeader(HttpState,\nHttpConnection)\n[DEBUG] >> \"User-Agent: Mozilla/4.0 (compatible; MSIE 6.0b; Windows 98)[\\r][\\n]\"\n[TRACE] enter HttpConnection.print(String)\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[DEBUG] >> \"Cache-Control: no-cache[\\r][\\n]\"\n[TRACE] enter HttpConnection.print(String)\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[DEBUG] >> \"Host: cvs.sourceforge.net[\\r][\\n]\"\n[TRACE] enter HttpConnection.print(String)\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[TRACE] enter HttpConnection.writeLine()\n[TRACE] enter HttpConnection.write(byte[])\n[TRACE] enter HttpConnection.write(byte[], int, int)\n[TRACE] enter HttpConnection.flushRequestOutputStream()\n[DEBUG] >> \"[\\r][\\n]\"\n[TRACE] enter HttpConnection.flushRequestOutputStream()\n[TRACE] enter HttpMethodBase.readResponse(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.readStatusLine(HttpState, HttpConnection)\n[TRACE] enter HttpConnection.readLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[DEBUG] << \"HTTP/1.1 200 OK[\\r][\\n]\"\n[TRACE] enter HttpMethodBase.readResponseHeaders(HttpState,HttpConnection)\n[TRACE] enter HttpConnection.getResponseInputStream()\n[TRACE] enter HeaderParser.parseHeaders(HttpConnection, HeaderGroup)\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[TRACE] enter HttpParser.readLine()\n[TRACE] enter HttpParser.readRawLine()\n[DEBUG] << \"Date: Fri, 05 Mar 2004 15:22:14 GMT[\\r][\\n]\"\n[DEBUG] << \"Server: Apache/2.0.40 (Red Hat Linux)[\\r][\\n]\"\n[DEBUG] << \"Content-Type: text/html; charset=ISO-8859-1[\\r][\\n]\"\n[DEBUG] << \"Connection: close[\\r][\\n]\"\n[DEBUG] << \"Transfer-Encoding: chunked[\\r][\\n]\"\n[TRACE] enter HttpMethodBase.processResponseHeaders(HttpState, HttpConnection)\n[TRACE] enter GetMethod.readResponseBody(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.readResponseBody(HttpState, HttpConnection)\n[TRACE] enter HttpMethodBase.readResponseBody(HttpState, HttpConnection)\n[TRACE] enter HttpConnection.getResponseInputStream()\n[TRACE] enter HeaderElement.parse(String)\n[TRACE] enter HeaderElement.parsePair(char[], int, int)\n[DEBUG] HttpConnection.getSoTimeout()\n[TRACE] enter HttpConnection.isResponseAvailable(int)\n[TRACE] enter GetMethod(String)\n[TRACE] enter HttpClient.executeMethod(HttpMethod)\n[TRACE] enter HttpClient.executeMethod(HostConfiguration,HttpMethod,HttpState)\n[TRACE] enter HttpConnectionManager.getConnection(HostConfiguration, long)\n[DEBUG] HttpConnectionManager.getConnection:  config =\nHostConfiguration[host=cvs.sourceforge.net, protocol=http:80, port=80], timeout = 0\n[TRACE] enter HttpConnectionManager.ConnectionPool.getHostPool(HostConfiguration)\n[DEBUG] Unable to get a connection, waiting...,\nhostConfig=HostConfiguration[host=cvs.sourceforge.net, protocol=http:80, port=80]\n",
            "date": "2004-03-06T00:04:14.000+0000",
            "id": 2
        },
        {
            "author": "Ortwin Gl\u00fcck",
            "body": "Claude,\n\nThe log that you posted suggests this: There are some calls to\nHttpConnectionManager.getConnection but none to\nHttpConnectionManager.releaseConnection\n\nIt's weird. One would think your code should call releaseConnection but\nobviously doesn't. Maybe you should restructure your code such that the\nHttpMethod is release by the same method that allocated it and do this in a\nfinally block. That will make it easier to spot the mistake.",
            "date": "2004-03-06T00:38:44.000+0000",
            "id": 3
        },
        {
            "author": "Ludovic Claude",
            "body": "You were right, there was a silent exception that caused releaseConnection() to\nbe skipped. \n\nThanks for your help,\nLudovic",
            "date": "2004-03-12T04:00:20.000+0000",
            "id": 4
        }
    ],
    "component": "HttpClient (classic)",
    "description": "I'm getting a dealock with the MultiThreadedHttpConnectionManager. Usually, it\nworks fine, but when a web page is redirected, it blocks. \n\nLudovic.\n\n[ERROR] Redirect to http://sourceforge.net/\nFull thread dump Java HotSpot(TM) Client VM (1.4.2_03-b02 mixed mode):\n\n\"MultiThreadedHttpConnectionManager cleanup\" daemon prio=5 tid=0x02d566f0\nnid=0xe14 in Object.wait() [2e9f000..2e9fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <0x10513be8> (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(Unknown Source)\n        - locked <0x10513be8> (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(Unknown Source)\n        at\norg.apache.commons.httpclient.MultiThreadedHttpConnectionManager$ReferenceQueueThread.run(MultiThreadedHttpConnectionManager.java:805)\n\n\"Signal Dispatcher\" daemon prio=10 tid=0x0003da00 nid=0xd44 waiting on condition\n[0..0]\n\n\"Finalizer\" daemon prio=9 tid=0x009bca30 nid=0xce8 in Object.wait()\n[2b5f000..2b5fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <0x10504b80> (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(Unknown Source)\n        - locked <0x10504b80> (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(Unknown Source)\n        at java.lang.ref.Finalizer$FinalizerThread.run(Unknown Source)\n\n\"Reference Handler\" daemon prio=10 tid=0x009bb600 nid=0xfa4 in Object.wait()\n[2b1f000..2b1fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <0x10504be8> (a java.lang.ref.Reference$Lock)\n        at java.lang.Object.wait(Unknown Source)\n        at java.lang.ref.Reference$ReferenceHandler.run(Unknown Source)\n        - locked <0x10504be8> (a java.lang.ref.Reference$Lock)\n\n\"main\" prio=5 tid=0x00035e28 nid=0xf68 in Object.wait() [7f000..7fc3c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <0x105170e8> (a\norg.apache.commons.httpclient.MultiThreadedHttpConnectionManager$ConnectionPool)\n        at\norg.apache.commons.httpclient.MultiThreadedHttpConnectionManager.doGetConnection(MultiThreadedHttpConnectionManager.java:388)\n        - locked <0x105170e8> (a\norg.apache.commons.httpclient.MultiThreadedHttpConnectionManager$ConnectionPool)\n        at\norg.apache.commons.httpclient.MultiThreadedHttpConnectionManager.getConnection(MultiThreadedHttpConnectionManager.java:296)\n        at\norg.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:645)\n        at\norg.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:529)\n        at net.sourceforge.cvsgrab.WebBrowser.executeMethod(WebBrowser.java:201)\n        at net.sourceforge.cvsgrab.WebBrowser.getResponse(WebBrowser.java:257)\n        at net.sourceforge.cvsgrab.WebBrowser.getDocument(WebBrowser.java:295)\n        at\nnet.sourceforge.cvsgrab.CvsWebInterface.loadDocument(CvsWebInterface.java:111)\n        at\nnet.sourceforge.cvsgrab.CvsWebInterface.getDocumentForDetect(CvsWebInterface.java:216)\n        at\nnet.sourceforge.cvsgrab.CvsWebInterface.findInterface(CvsWebInterface.java:86)\n        at net.sourceforge.cvsgrab.CVSGrab.detectWebInterface(CVSGrab.java:688)\n        at net.sourceforge.cvsgrab.CVSGrab.grabCVSRepository(CVSGrab.java:616)\n        at net.sourceforge.cvsgrab.CVSGrab.run(CVSGrab.java:317)\n        at net.sourceforge.cvsgrab.CVSGrab.main(CVSGrab.java:206)\n\n\"VM Thread\" prio=5 tid=0x009f76d0 nid=0x550 runnable\n\n\"VM Periodic Task Thread\" prio=10 tid=0x009f8208 nid=0x560 waiting on condition\n\"Suspend Checker Thread\" prio=10 tid=0x009bed88 nid=0xe84 runnable",
    "hasPatch": false,
    "hasScreenshot": false,
    "id": "HTTPCLIENT-325",
    "issuetypeClassified": "BUG",
    "issuetypeTracker": "BUG",
    "priority": "Blocker",
    "product": "HTTPCLIENT",
    "project": "HTTPCLIENT",
    "summary": "Deadlock with MultiThreadedHttpConnectionManager",
    "systemSpecification": true,
    "version": "2.0 Final"
}