{
    "comments": [
        {
            "author": "szegedia@freemail.hu",
            "body": "Indeed, this looks like it is a bug - what's interesting is that this works:\n\nvar x = new Packages.test();\nx();\n",
            "date": "20061217T18:12:40",
            "id": 0
        },
        {
            "author": "norrisboyd@gmail.com",
            "body": "Fixed: \n\nChecking in ScriptRuntime.java;\n/cvsroot/mozilla/js/rhino/src/org/mozilla/javascript/ScriptRuntime.java,v  <--  ScriptRuntime.java\nnew revision: 1.263.2.2; previous revision: 1.263.2.1\ndone\n",
            "date": "20070613T15:11:13",
            "id": 1
        }
    ],
    "component": "Core",
    "description": "User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.8) Gecko/20061025 Firefox/1.5.0.8\nBuild Identifier: Rhino 1.6 release 5 Pre 2006 11 17\n\nI see the following in the Rhino shell when trying to execute a compiled script on the classpath by entering \"(new Packages.test())()\"\n\nException in thread \"main\" java.lang.NullPointerException\n\tat org.mozilla.javascript.ScriptRuntime.getValueFunctionAndThis(ScriptRuntime.java:2019)\n\tat org.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:2950)\n\tat org.mozilla.javascript.Interpreter.interpret(Interpreter.java:2254)\n\tat org.mozilla.javascript.InterpretedFunction.call(InterpretedFunction.java:161)\n\tat org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:340)\n\tat org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:2758)\n\tat org.mozilla.javascript.InterpretedFunction.exec(InterpretedFunction.java:172)\n\tat org.mozilla.javascript.tools.shell.Main.evaluateScript(Main.java:503)\n\tat org.mozilla.javascript.tools.shell.Main.processSource(Main.java:367)\n\tat org.mozilla.javascript.tools.shell.Main.processFiles(Main.java:179)\n\tat org.mozilla.javascript.tools.shell.Main$IProxy.run(Main.java:100)\n\tat org.mozilla.javascript.Context.call(Context.java:536)\n\tat org.mozilla.javascript.ContextFactory.call(ContextFactory.java:450)\n\tat org.mozilla.javascript.tools.shell.Main.exec(Main.java:162)\n\tat org.mozilla.javascript.tools.shell.Main.main(Main.java:140)\n\nI'm not sure if using this syntax is Khosher or not, but in either case the shell should handle it gracefully without completely bombing out.\n\nReproducible: Always\n\nSteps to Reproduce:\n/home/jstaiger$ cat test.js\njava.lang.System.out.println(\"Hello, world!\");\n/home/jstaiger$ java org.mozilla.javascript.tools.jsc.Main test.js\n/home/jstaiger$ ls *.class\ntest.class\n/home/jstaiger$ echo $CLASSPATH\n.;/rhino/mozilla/js/rhino/build/rhino1_6R5pre/js.jar\n/home/jstaiger$ java org.mozilla.javascript.tools.shell.Main\nRhino 1.6 release 5 Pre 2006 11 17\njs> var testScript = new Packages.test()\njs> testScript()\nHello, world!\njs> (new Packages.test())()\nException in thread \"main\" java.lang.NullPointerException\n\tat org.mozilla.javascript.ScriptRuntime.getValueFunctionAndThis(ScriptRuntime.java:2019)\n\tat org.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:2950)\n\tat org.mozilla.javascript.Interpreter.interpret(Interpreter.java:2254)\n\tat org.mozilla.javascript.InterpretedFunction.call(InterpretedFunction.java:161)\n\tat org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:340)\n\tat org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:2758)\n\tat org.mozilla.javascript.InterpretedFunction.exec(InterpretedFunction.java:172)\n\tat org.mozilla.javascript.tools.shell.Main.evaluateScript(Main.java:503)\n\tat org.mozilla.javascript.tools.shell.Main.processSource(Main.java:367)\n\tat org.mozilla.javascript.tools.shell.Main.processFiles(Main.java:179)\n\tat org.mozilla.javascript.tools.shell.Main$IProxy.run(Main.java:100)\n\tat org.mozilla.javascript.Context.call(Context.java:536)\n\tat org.mozilla.javascript.ContextFactory.call(ContextFactory.java:450)\n\tat org.mozilla.javascript.tools.shell.Main.exec(Main.java:162)\n\tat org.mozilla.javascript.tools.shell.Main.main(Main.java:140)\n\nActual Results:  \nException in thread \"main\" java.lang.NullPointerException\n\tat org.mozilla.javascript.ScriptRuntime.getValueFunctionAndThis(ScriptRuntime.java:2019)\n\tat org.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:2950)\n\tat org.mozilla.javascript.Interpreter.interpret(Interpreter.java:2254)\n\tat org.mozilla.javascript.InterpretedFunction.call(InterpretedFunction.java:161)\n\tat org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:340)\n\tat org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:2758)\n\tat org.mozilla.javascript.InterpretedFunction.exec(InterpretedFunction.java:172)\n\tat org.mozilla.javascript.tools.shell.Main.evaluateScript(Main.java:503)\n\tat org.mozilla.javascript.tools.shell.Main.processSource(Main.java:367)\n\tat org.mozilla.javascript.tools.shell.Main.processFiles(Main.java:179)\n\tat org.mozilla.javascript.tools.shell.Main$IProxy.run(Main.java:100)\n\tat org.mozilla.javascript.Context.call(Context.java:536)\n\tat org.mozilla.javascript.ContextFactory.call(ContextFactory.java:450)\n\tat org.mozilla.javascript.tools.shell.Main.exec(Main.java:162)\n\tat org.mozilla.javascript.tools.shell.Main.main(Main.java:140)\n\n\nExpected Results:  \nThe shell should handle this statement gracefully.",
    "hasPatch": false,
    "hasScreenshot": false,
    "id": "361067",
    "issuetypeClassified": "BUG",
    "issuetypeTracker": "BUG",
    "priority": "-- normal",
    "product": "Rhino",
    "project": "RHINO",
    "summary": "NullPointerException in shell when attempting to run compiled script using syntax: (new Packages.test())()",
    "systemSpecification": true,
    "version": "other"
}