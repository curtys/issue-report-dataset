{
    "comments": [
        {
            "author": "Robert Muir",
            "body": "Attached is a patch, before applying it you must move the UAX29URLEmailTokenizer.jflex to UAX29URLEmailTOkenizerImpl.jflex\n\n* ports this tokenizer over to StandardTokenizerInterface\n* Fixes LUCENE-3358 bug\n* regenerates TLDs for trunk only\n* adds backwards 3.1 version with bug and old TLDs and some basic tests.\n* adds new ctors that require version, deprecates version-less ones\n* deprecates inputstream ctor that uses default charset\n* reorganizes constants like standardtokenizer and deprecates the old ones.\n",
            "date": "2011-08-04T23:52:29.233+0000",
            "id": 0
        },
        {
            "author": "Robert Muir",
            "body": "by the way, the patch is for trunk, but has all the deprecations, including API ones: these can be removed in trunk immediately after porting back,\nbut I would prefer to do this as a separate step, just so i dont forget anything.",
            "date": "2011-08-04T23:53:59.574+0000",
            "id": 1
        },
        {
            "author": "Steve Rowe",
            "body": "The {{jflex}} target depends on the {{clean-jflex}} target, which deletes all {{src/.../standard/*.java}} files whose contents match regex {{/generated.*by.*JFlex/}}.  Your patch leaves intact the first line of {{UAX29URLEmailTokenizer.java}}, which matches the regex in a comment.  As a result, running {{ant jflex}} deletes {{UAX29URLEmailTokenizer.java}}, and since it's no longer generated by JFlex, compilation fails.\n\nWhen I remove this JFlex comment line from {{UAX29URLEmailTokenizer.java}}, {{ant jflex}} works, everything compiles, and all tests succeed.  +1 to commit after removing this line.",
            "date": "2011-08-06T04:45:51.607+0000",
            "id": 2
        },
        {
            "author": "Steve Rowe",
            "body": "One other minor issue: {{ant clean-jflex}} doesn't remove the JFlex-generated {{*.java}} files under the new directory {{src/.../standard/std31/}}.  \n\nTo include them, on line #92 in {{modules/analysis/common/build.xml}}, change {{includes=\"\\*.java\"}} to {{includes=\"\\*\\*/\\*.java\"}}.",
            "date": "2011-08-06T05:04:39.303+0000",
            "id": 3
        },
        {
            "author": "Robert Muir",
            "body": "good catch, thanks for reviewing and finding these issues!",
            "date": "2011-08-07T21:34:51.264+0000",
            "id": 4
        }
    ],
    "component": "modules/analysis",
    "description": "We should do this so that we can fix the LUCENE-3358 bug there, and preserve backwards.\nWe also want this mechanism anyway, for upgrading to new unicode versions in the future.\n\nWe can regenerate the new TLD list for 3.4 but, we should ensure the existing one is used for the urlemail33 or whatever,\nso that its exactly the same.",
    "hasPatch": true,
    "hasScreenshot": false,
    "id": "LUCENE-3361",
    "issuetypeClassified": "RFE",
    "issuetypeTracker": "BUG",
    "priority": "Major",
    "product": "LUCENE",
    "project": "LUCENE",
    "summary": "port url+email tokenizer to standardtokenizerinterface (or similar)",
    "systemSpecification": true,
    "version": "3.3"
}