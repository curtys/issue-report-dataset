{
    "comments": [
        {
            "author": "selckin",
            "body": "{code}\n    [junit] Testsuite: org.apache.lucene.index.values.TestDocValuesIndexing\n    [junit] Testcase: testAddIndexes(org.apache.lucene.index.values.TestDocValuesIndexing):     Caused an ERROR\n    [junit] MMapIndexInput already closed\n    [junit] org.apache.lucene.store.AlreadyClosedException: MMapIndexInput already closed\n    [junit]     at org.apache.lucene.store.MMapDirectory$MMapIndexInput.clone(MMapDirectory.java:291)\n    [junit]     at org.apache.lucene.store.MockIndexInputWrapper.clone(MockIndexInputWrapper.java:68)\n    [junit]     at org.apache.lucene.index.values.Bytes$BytesReaderBase.cloneData(Bytes.java:454)\n    [junit]     at org.apache.lucene.index.values.VarSortedBytesImpl$Reader.getEnum(VarSortedBytesImpl.java:234)\n    [junit]     at org.apache.lucene.index.values.DocValues.getEnum(DocValues.java:54)\n    [junit]     at org.apache.lucene.index.values.TestDocValuesIndexing.getValuesEnum(TestDocValuesIndexing.java:484)\n    [junit]     at org.apache.lucene.index.values.TestDocValuesIndexing.testAddIndexes(TestDocValuesIndexing.java:203)\n    [junit]     at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1304)\n    [junit]     at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1233)\n    [junit] \n    [junit] \n    [junit] Tests run: 10, Failures: 0, Errors: 1, Time elapsed: 16.858 sec\n    [junit] \n    [junit] ------------- Standard Error -----------------\n    [junit] NOTE: reproduce with: ant test -Dtestcase=TestDocValuesIndexing -Dtestmethod=testAddIndexes -Dtests.seed=2717387190169859484:6990694723425578308\n    [junit] NOTE: test params are: codec=RandomCodecProvider: {id=Pulsing(freqCutoff=14), FLOAT_32=Pulsing(freqCutoff=14), BYTES_FIXED_DEREF=MockSep, BYTES_VAR_DEREF=MockFixedIntBlock(blockSize=1259), BYTES_VAR_SORTED=MockSep, BYTES_VAR_STRAIGHT=MockVariableIntBlock(baseBlockSize=15), BYTES_FIXED_STRAIGHT=MockVariableIntBlock(baseBlockSize=15), docId=MockSep, FLOAT_64=Standard, INTS=Standard, BYTES_FIXED_SORTED=MockSep}, locale=uk_UA, timezone=EST\n    [junit] NOTE: all tests run in this JVM:\n    [junit] [TestAssertions, TestDemo, TestCachingTokenFilter, TestDocument, TestDeletionPolicy, TestDirectoryReader, TestDocumentWriter, TestFlex, TestIndexReaderCloneNorms, TestLongPostings, TestMultiReader, TestOmitTf, TestRollingUpdates, TestSegmentTermEnum, TestDocValuesIndexing]\n    [junit] NOTE: Linux 2.6.37-gentoo amd64/Sun Microsystems Inc. 1.6.0_25 (64-bit)/cpus=8,threads=1,free=165611040,total=263258112\n    [junit] ------------- ---------------- ---------------\n    [junit] TEST org.apache.lucene.index.values.TestDocValuesIndexing FAILED\n{code}",
            "date": "2011-05-19T19:10:07.516+0000",
            "id": 0
        },
        {
            "author": "Simon Willnauer",
            "body": "good catch selkin.... here is a patch",
            "date": "2011-05-19T21:10:12.353+0000",
            "id": 1
        },
        {
            "author": "Simon Willnauer",
            "body": "Committed in revision 1125108. Thanks Selckin - I will make sure I not you in the CHANGES.TXT for all your testing help!\n",
            "date": "2011-05-19T21:13:27.787+0000",
            "id": 2
        }
    ],
    "component": "",
    "description": "doc values branch r1124825, reproducible \n{code}\n    [junit] Testsuite: org.apache.lucene.index.values.TestDocValuesIndexing\n    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0.716 sec\n    [junit] \n    [junit] ------------- Standard Error -----------------\n    [junit] NOTE: reproduce with: ant test -Dtestcase=TestDocValuesIndexing -Dtestmethod=testAddIndexes -Dtests.seed=5939035003978436534:-6429764582682717131\n    [junit] NOTE: test params are: codec=RandomCodecProvider: {id=MockRandom, BYTES_VAR_DEREF=MockRandom, INTS=Pulsing(freqCutoff=13)}, locale=da_DK, timezone=Asia/Macao\n    [junit] NOTE: all tests run in this JVM:\n    [junit] [TestDocValuesIndexing]\n    [junit] NOTE: Linux 2.6.37-gentoo amd64/Sun Microsystems Inc. 1.6.0_25 (64-bit)/cpus=8,threads=1,free=88582432,total=125632512\n    [junit] ------------- ---------------- ---------------\n    [junit] Testcase: testAddIndexes(org.apache.lucene.index.values.TestDocValuesIndexing):     Caused an ERROR\n    [junit] null\n    [junit] java.nio.channels.ClosedChannelException\n    [junit]     at sun.nio.ch.FileChannelImpl.ensureOpen(FileChannelImpl.java:88)\n    [junit]     at sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:603)\n    [junit]     at org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput.readInternal(NIOFSDirectory.java:161)\n    [junit]     at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:222)\n    [junit]     at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:39)\n    [junit]     at org.apache.lucene.store.DataInput.readInt(DataInput.java:73)\n    [junit]     at org.apache.lucene.store.BufferedIndexInput.readInt(BufferedIndexInput.java:162)\n    [junit]     at org.apache.lucene.store.DataInput.readLong(DataInput.java:115)\n    [junit]     at org.apache.lucene.store.BufferedIndexInput.readLong(BufferedIndexInput.java:175)\n    [junit]     at org.apache.lucene.store.MockIndexInputWrapper.readLong(MockIndexInputWrapper.java:136)\n    [junit]     at org.apache.lucene.index.values.PackedIntsImpl$IntsEnumImpl.<init>(PackedIntsImpl.java:263)\n    [junit]     at org.apache.lucene.index.values.PackedIntsImpl$IntsEnumImpl.<init>(PackedIntsImpl.java:249)\n    [junit]     at org.apache.lucene.index.values.PackedIntsImpl$IntsReader.getEnum(PackedIntsImpl.java:239)\n    [junit]     at org.apache.lucene.index.values.DocValues.getEnum(DocValues.java:54)\n    [junit]     at org.apache.lucene.index.values.TestDocValuesIndexing.getValuesEnum(TestDocValuesIndexing.java:484)\n    [junit]     at org.apache.lucene.index.values.TestDocValuesIndexing.testAddIndexes(TestDocValuesIndexing.java:202)\n    [junit]     at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1304)\n    [junit]     at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1233)\n    [junit] \n    [junit] \n    [junit] Test org.apache.lucene.index.values.TestDocValuesIndexing FAILED\n{code}\n\nand\n\n{code}\n\n    [junit] Testsuite: org.apache.lucene.index.values.TestDocValuesIndexing\n    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0.94 sec\n    [junit] \n    [junit] ------------- Standard Error -----------------\n    [junit] NOTE: reproduce with: ant test -Dtestcase=TestDocValuesIndexing -Dtestmethod=testAddIndexes -Dtests.seed=-3677966427932339626:-4746638811786223564\n    [junit] NOTE: test params are: codec=RandomCodecProvider: {id=Standard, BYTES_FIXED_DEREF=MockSep, FLOAT_64=SimpleText}, locale=ca, timezone=Asia/Novosibirsk\n    [junit] NOTE: all tests run in this JVM:\n    [junit] [TestDocValuesIndexing]\n    [junit] NOTE: Linux 2.6.37-gentoo amd64/Sun Microsystems Inc. 1.6.0_25 (64-bit)/cpus=8,threads=1,free=88596152,total=125632512\n    [junit] ------------- ---------------- ---------------\n    [junit] Testcase: testAddIndexes(org.apache.lucene.index.values.TestDocValuesIndexing):     Caused an ERROR\n    [junit] Bad file descriptor\n    [junit] java.io.IOException: Bad file descriptor\n    [junit]     at java.io.RandomAccessFile.seek(Native Method)\n    [junit]     at org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput.readInternal(SimpleFSDirectory.java:101)\n    [junit]     at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:222)\n    [junit]     at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:39)\n    [junit]     at org.apache.lucene.store.MockIndexInputWrapper.readByte(MockIndexInputWrapper.java:105)\n    [junit]     at org.apache.lucene.index.values.Floats$FloatsReader.load(Floats.java:281)\n    [junit]     at org.apache.lucene.index.values.SourceCache$DirectSourceCache.load(SourceCache.java:101)\n    [junit]     at org.apache.lucene.index.values.DocValues.getSource(DocValues.java:101)\n    [junit]     at org.apache.lucene.index.values.TestDocValuesIndexing.getSource(TestDocValuesIndexing.java:472)\n    [junit]     at org.apache.lucene.index.values.TestDocValuesIndexing.getValuesEnum(TestDocValuesIndexing.java:482)\n    [junit]     at org.apache.lucene.index.values.TestDocValuesIndexing.testAddIndexes(TestDocValuesIndexing.java:203)\n    [junit]     at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1304)\n    [junit]     at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1233)\n    [junit] \n    [junit] \n    [junit] Test org.apache.lucene.index.values.TestDocValuesIndexing FAILED\n{code}",
    "hasPatch": true,
    "hasScreenshot": false,
    "id": "LUCENE-3125",
    "issuetypeClassified": "BUG",
    "issuetypeTracker": "BUG",
    "priority": "Major",
    "product": "LUCENE",
    "project": "LUCENE",
    "summary": "TestDocValuesIndexing.testAddIndexes failures on docvalues branch",
    "systemSpecification": true,
    "version": ""
}