{
    "comments": [
        {
            "author": "Robert Muir",
            "body": "https://builds.apache.org/view/G-L/view/Lucene/job/Lucene-Solr-tests-only-trunk/10500\n\n{noformat}\n    [junit] 2011-09-11 16:32:39\n    [junit] Full thread dump OpenJDK 64-Bit Server VM (20.0-b11 mixed mode):\n    [junit] \n    [junit] \"Low Memory Detector\" daemon prio=5 tid=0x0000000801eee800 nid=0x19642 runnable [0x0000000000000000]\n    [junit]    java.lang.Thread.State: RUNNABLE\n    [junit] \n    [junit] \"C2 CompilerThread1\" daemon prio=5 tid=0x0000000801eef000 nid=0x19640 waiting on condition [0x0000000000000000]\n    [junit]    java.lang.Thread.State: RUNNABLE\n    [junit] \n    [junit] \"C2 CompilerThread0\" daemon prio=5 tid=0x0000000801ef0000 nid=0x1963d waiting on condition [0x0000000000000000]\n    [junit]    java.lang.Thread.State: RUNNABLE\n    [junit] \n    [junit] \"Signal Dispatcher\" daemon prio=5 tid=0x0000000801ef0800 nid=0x19630 waiting on condition [0x0000000000000000]\n    [junit]    java.lang.Thread.State: RUNNABLE\n    [junit] \n    [junit] \"Finalizer\" daemon prio=5 tid=0x0000000801ef1800 nid=0x19581 in Object.wait() [0x00007ffffebee000]\n    [junit]    java.lang.Thread.State: WAITING (on object monitor)\n    [junit] \tat java.lang.Object.wait(Native Method)\n    [junit] \t- waiting on <0x0000000828cb0370> (a java.lang.ref.ReferenceQueue$Lock)\n    [junit] \tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:133)\n    [junit] \t- locked <0x0000000828cb0370> (a java.lang.ref.ReferenceQueue$Lock)\n    [junit] \tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:149)\n    [junit] \tat java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:177)\n    [junit] \n    [junit] \"Reference Handler\" daemon prio=5 tid=0x0000000801ef3000 nid=0x1957f in Object.wait() [0x00007ffffecef000]\n    [junit]    java.lang.Thread.State: WAITING (on object monitor)\n    [junit] \tat java.lang.Object.wait(Native Method)\n    [junit] \t- waiting on <0x0000000828cb0410> (a java.lang.ref.Reference$Lock)\n    [junit] \tat java.lang.Object.wait(Object.java:502)\n    [junit] \tat java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)\n    [junit] \t- locked <0x0000000828cb0410> (a java.lang.ref.Reference$Lock)\n    [junit] \n    [junit] \"main\" prio=5 tid=0x0000000801ef3800 nid=0x19432 waiting on condition [0x00007fffffbfd000]\n    [junit]    java.lang.Thread.State: WAITING (parking)\n    [junit] \tat sun.misc.Unsafe.park(Native Method)\n    [junit] \t- parking to wait for  <0x0000000827a440c0> (a java.util.concurrent.locks.ReentrantLock$NonfairSync)\n    [junit] \tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n    [junit] \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:838)\n    [junit] \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:871)\n    [junit] \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1201)\n    [junit] \tat java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:214)\n    [junit] \tat java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:290)\n    [junit] \tat org.apache.lucene.index.DocumentsWriterFlushControl.assertActiveDeleteQueue(DocumentsWriterFlushControl.java:435)\n    [junit] \tat org.apache.lucene.index.DocumentsWriterFlushControl.markForFullFlush(DocumentsWriterFlushControl.java:428)\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.flushAllThreads(DocumentsWriter.java:557)\n    [junit] \t- locked <0x0000000827a417c0> (a org.apache.lucene.index.DocumentsWriter)\n    [junit] \tat org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:2973)\n    [junit] \t- locked <0x0000000827a3d738> (a java.lang.Object)\n    [junit] \tat org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2950)\n    [junit] \tat org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1133)\n    [junit] \tat org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1097)\n    [junit] \tat org.apache.lucene.index.TestIndexWriterWithThreads.testCloseWithThreads(TestIndexWriterWithThreads.java:200)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    [junit] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    [junit] \tat java.lang.reflect.Method.invoke(Method.java:616)\n    [junit] \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)\n    [junit] \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    [junit] \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)\n    [junit] \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\n    [junit] \tat org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:48)\n    [junit] \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\n    [junit] \tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)\n    [junit] \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\n    [junit] \tat org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:148)\n    [junit] \tat org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:50)\n    [junit] \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\n    [junit] \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\n    [junit] \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\n    [junit] \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\n    [junit] \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\n    [junit] \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\n    [junit] \tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)\n    [junit] \tat org.junit.runners.ParentRunner.run(ParentRunner.java:236)\n    [junit] \tat junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:743)\n    [junit] \n    [junit] \"VM Thread\" prio=5 tid=0x0000000801f29000 nid=0x19516 runnable \n    [junit] \n    [junit] \"GC task thread#0 (ParallelGC)\" prio=5 tid=0x0000000801f32000 nid=0x1944f runnable \n    [junit] \n    [junit] \"GC task thread#1 (ParallelGC)\" prio=5 tid=0x0000000801f31000 nid=0x19451 runnable \n    [junit] \n    [junit] \"GC task thread#2 (ParallelGC)\" prio=5 tid=0x0000000801f30800 nid=0x19458 runnable \n    [junit] \n    [junit] \"GC task thread#3 (ParallelGC)\" prio=5 tid=0x0000000801f30000 nid=0x1945b runnable \n    [junit] \n    [junit] \"GC task thread#4 (ParallelGC)\" prio=5 tid=0x0000000801f2f800 nid=0x19463 runnable \n    [junit] \n    [junit] \"GC task thread#5 (ParallelGC)\" prio=5 tid=0x0000000801f2e800 nid=0x19468 runnable \n    [junit] \n    [junit] \"GC task thread#6 (ParallelGC)\" prio=5 tid=0x0000000801f2e000 nid=0x1946c runnable \n    [junit] \n    [junit] \"GC task thread#7 (ParallelGC)\" prio=5 tid=0x0000000801f2d800 nid=0x1947a runnable \n    [junit] \n    [junit] \"GC task thread#8 (ParallelGC)\" prio=5 tid=0x0000000801f2c800 nid=0x19495 runnable \n    [junit] \n    [junit] \"GC task thread#9 (ParallelGC)\" prio=5 tid=0x0000000801f2c000 nid=0x19496 runnable \n    [junit] \n    [junit] \"GC task thread#10 (ParallelGC)\" prio=5 tid=0x0000000801f2b800 nid=0x194a8 runnable \n    [junit] \n    [junit] \"GC task thread#11 (ParallelGC)\" prio=5 tid=0x0000000801f2b000 nid=0x194ba runnable \n    [junit] \n    [junit] \"GC task thread#12 (ParallelGC)\" prio=5 tid=0x0000000801f2a000 nid=0x194be runnable \n    [junit] \n    [junit] \"VM Periodic Task Thread\" prio=5 tid=0x0000000801f28800 nid=0x19646 waiting on condition \n    [junit] \n    [junit] JNI global references: 945\n    [junit] \n    [junit] Heap\n    [junit]  PSYoungGen      total 156800K, used 136506K [0x000000081f9b0000, 0x0000000829d10000, 0x000000082a450000)\n    [junit]   eden space 150528K, 89% used [0x000000081f9b0000,0x0000000827d24378,0x0000000828cb0000)\n    [junit]   from space 6272K, 30% used [0x0000000828cb0000,0x0000000828e8a6e8,0x00000008292d0000)\n    [junit]   to   space 2560K, 0% used [0x0000000829a90000,0x0000000829a90000,0x0000000829d10000)\n    [junit]  PSOldGen        total 100480K, used 0K [0x000000080a450000, 0x0000000810670000, 0x000000081f9b0000)\n    [junit]   object space 100480K, 0% used [0x000000080a450000,0x000000080a450000,0x0000000810670000)\n    [junit]  PSPermGen       total 21248K, used 13150K [0x0000000805250000, 0x0000000806710000, 0x000000080a450000)\n    [junit]   object space 21248K, 61% used [0x0000000805250000,0x0000000805f27880,0x0000000806710000)\n    [junit] \n{noformat}\n",
            "date": "2011-09-11T16:34:47.456+0000",
            "id": 0
        },
        {
            "author": "Simon Willnauer",
            "body": "I think I found the reason or one possible reason for this. there is one place where we don't release a DWPT lock in the case of a failure. Here is a patch.",
            "date": "2011-09-11T19:01:57.318+0000",
            "id": 1
        },
        {
            "author": "Simon Willnauer",
            "body": "I committed the patch. I will keep this open for a while...",
            "date": "2011-09-12T19:18:44.967+0000",
            "id": 2
        },
        {
            "author": "Simon Willnauer",
            "body": "fixed",
            "date": "2011-11-14T10:26:36.649+0000",
            "id": 3
        }
    ],
    "component": "",
    "description": "trunk tests have been hanging often lately in hudson, this time i was careful to kill and get a good stacktrace:",
    "hasPatch": true,
    "hasScreenshot": false,
    "id": "LUCENE-3428",
    "issuetypeClassified": "BUG",
    "issuetypeTracker": "BUG",
    "priority": "Major",
    "product": "LUCENE",
    "project": "LUCENE",
    "summary": "trunk tests hang/deadlock TestIndexWriterWithThreads",
    "systemSpecification": true,
    "version": ""
}