{
    "comments": [
        {
            "author": "Robert Muir",
            "body": "{noformat}\n    [junit] Testsuite: org.apache.lucene.index.TestIndexWriterOnDiskFull\n    [junit] Testcase: testAddIndexOnDiskFull(org.apache.lucene.index.TestIndexWriterOnDiskFull):\tCaused an ERROR\n    [junit] CheckIndex failed\n    [junit] java.lang.RuntimeException: CheckIndex failed\n    [junit] \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:162)\n    [junit] \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:148)\n    [junit] \tat org.apache.lucene.store.MockDirectoryWrapper.close(MockDirectoryWrapper.java:485)\n    [junit] \tat org.apache.lucene.index.TestIndexWriterOnDiskFull.testAddIndexOnDiskFull(TestIndexWriterOnDiskFull.java:429)\n    [junit] \tat org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:148)\n    [junit] \tat org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:50)\n    [junit] \n    [junit] \n    [junit] Tests run: 4, Failures: 0, Errors: 1, Time elapsed: 0.515 sec\n    [junit] \n    [junit] ------------- Standard Output ---------------\n    [junit] CheckIndex failed\n    [junit] Segments file=segments_2 numSegments=26 version=4.0 format=FORMAT_4_0 [Lucene 4.0]\n    [junit]   1 of 26: name=_m docCount=38\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.004\n    [junit]     diagnostics = {optimize=false, mergeFactor=10, os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=merge, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [77 terms; 114 terms/docs pairs; 114 tokens]\n    [junit]     test: stored fields.......OK [76 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [1 total vector count; avg 0.026 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   2 of 26: name=_l docCount=2\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]\n    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   3 of 26: name=_n docCount=2\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=false\n    [junit]     hasProx=true\n    [junit]     numFiles=9\n    [junit]     size (MB)=0\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]\n    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   4 of 26: name=_o docCount=2\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]\n    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [1 total vector count; avg 0.5 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   5 of 26: name=_p docCount=2\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]\n    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   6 of 26: name=_q docCount=2\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]\n    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   7 of 26: name=_r docCount=2\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=false\n    [junit]     hasProx=true\n    [junit]     numFiles=9\n    [junit]     size (MB)=0\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]\n    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   8 of 26: name=_s docCount=2\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]\n    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   9 of 26: name=_t docCount=2\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=false\n    [junit]     hasProx=true\n    [junit]     numFiles=9\n    [junit]     size (MB)=0\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]\n    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   10 of 26: name=_u docCount=2\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]\n    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   11 of 26: name=_v docCount=1\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [3 terms; 3 terms/docs pairs; 3 tokens]\n    [junit]     test: stored fields.......OK [2 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   12 of 26: name=_w docCount=25\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=false\n    [junit]     hasProx=true\n    [junit]     numFiles=12\n    [junit]     size (MB)=0.003\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [51 terms; 75 terms/docs pairs; 75 tokens]\n    [junit]     test: stored fields.......OK [50 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [4 total vector count; avg 0.16 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   13 of 26: name=_x docCount=25\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=false\n    [junit]     hasProx=true\n    [junit]     numFiles=12\n    [junit]     size (MB)=0.003\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [51 terms; 75 terms/docs pairs; 75 tokens]\n    [junit]     test: stored fields.......OK [50 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [2 total vector count; avg 0.08 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   14 of 26: name=_y docCount=25\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.003\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [51 terms; 75 terms/docs pairs; 75 tokens]\n    [junit]     test: stored fields.......OK [50 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [7 total vector count; avg 0.28 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   15 of 26: name=_z docCount=6\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [13 terms; 18 terms/docs pairs; 18 tokens]\n    [junit]     test: stored fields.......OK [12 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [2 total vector count; avg 0.333 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   16 of 26: name=_10 docCount=6\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit] FAILED\n    [junit]     WARNING: fixIndex() would remove reference to this segment; full exception:\n    [junit] java.io.IOException: Read past EOF\n    [junit] \tat org.apache.lucene.store.RAMInputStream.switchCurrentBuffer(RAMInputStream.java:92)\n    [junit] \tat org.apache.lucene.store.RAMInputStream.readByte(RAMInputStream.java:65)\n    [junit] \tat org.apache.lucene.store.DataInput.readInt(DataInput.java:73)\n    [junit] \tat org.apache.lucene.store.MockIndexInputWrapper.readInt(MockIndexInputWrapper.java:123)\n    [junit] \tat org.apache.lucene.store.CompoundFileDirectory.readEntries(CompoundFileDirectory.java:102)\n    [junit] \tat org.apache.lucene.store.CompoundFileDirectory.<init>(CompoundFileDirectory.java:67)\n    [junit] \tat org.apache.lucene.index.SegmentInfo.loadFieldInfos(SegmentInfo.java:269)\n    [junit] \tat org.apache.lucene.index.SegmentInfo.getFieldInfos(SegmentInfo.java:325)\n    [junit] \tat org.apache.lucene.index.SegmentInfo.getHasProx(SegmentInfo.java:582)\n    [junit] \tat org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:496)\n    [junit] \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:158)\n    [junit] \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:148)\n    [junit] \tat org.apache.lucene.store.MockDirectoryWrapper.close(MockDirectoryWrapper.java:485)\n    [junit] \tat org.apache.lucene.index.TestIndexWriterOnDiskFull.testAddIndexOnDiskFull(TestIndexWriterOnDiskFull.java:429)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    [junit] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    [junit] \tat java.lang.reflect.Method.invoke(Method.java:597)\n    [junit] \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)\n    [junit] \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    [junit] \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)\n    [junit] \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:21)\n    [junit] \tat org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:48)\n    [junit] \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:29)\n    [junit] \tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)\n    [junit] \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\n    [junit] \tat org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:148)\n    [junit] \tat org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:50)\n    [junit] \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:194)\n    [junit] \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:53)\n    [junit] \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\n    [junit] \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\n    [junit] \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:185)\n    [junit] \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:29)\n    [junit] \tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)\n    [junit] \tat org.junit.runners.ParentRunner.run(ParentRunner.java:236)\n    [junit] \tat junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:40)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:746)\n    [junit] \n    [junit]   17 of 26: name=_11 docCount=6\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [13 terms; 18 terms/docs pairs; 18 tokens]\n    [junit]     test: stored fields.......OK [12 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   18 of 26: name=_12 docCount=6\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [13 terms; 18 terms/docs pairs; 18 tokens]\n    [junit]     test: stored fields.......OK [12 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   19 of 26: name=_13 docCount=1\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [3 terms; 3 terms/docs pairs; 3 tokens]\n    [junit]     test: stored fields.......OK [2 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   20 of 26: name=_14 docCount=4\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [9 terms; 12 terms/docs pairs; 12 tokens]\n    [junit]     test: stored fields.......OK [8 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   21 of 26: name=_15 docCount=4\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [9 terms; 12 terms/docs pairs; 12 tokens]\n    [junit]     test: stored fields.......OK [8 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [1 total vector count; avg 0.25 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   22 of 26: name=_16 docCount=4\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [9 terms; 12 terms/docs pairs; 12 tokens]\n    [junit]     test: stored fields.......OK [8 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [1 total vector count; avg 0.25 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   23 of 26: name=_17 docCount=4\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [9 terms; 12 terms/docs pairs; 12 tokens]\n    [junit]     test: stored fields.......OK [8 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [1 total vector count; avg 0.25 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   24 of 26: name=_18 docCount=4\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {optimize=false, mergeFactor=1, os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=merge, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [9 terms; 12 terms/docs pairs; 12 tokens]\n    [junit]     test: stored fields.......OK [8 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [1 total vector count; avg 0.25 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   25 of 26: name=_19 docCount=4\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0.001\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [9 terms; 12 terms/docs pairs; 12 tokens]\n    [junit]     test: stored fields.......OK [8 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit]   26 of 26: name=_1a docCount=1\n    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]\n    [junit]     compound=true\n    [junit]     hasProx=true\n    [junit]     numFiles=2\n    [junit]     size (MB)=0\n    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}\n    [junit]     no deletions\n    [junit]     test: open reader.........OK\n    [junit]     test: fields..............OK [2 fields]\n    [junit]     test: field norms.........OK [2 fields]\n    [junit]     test: terms, freq, prox...OK [3 terms; 3 terms/docs pairs; 3 tokens]\n    [junit]     test: stored fields.......OK [2 total field count; avg 2 fields per doc]\n    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]\n    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0\n    [junit] \n    [junit] WARNING: 1 broken segments (containing 6 documents) detected\n    [junit] \n    [junit] ------------- ---------------- ---------------\n    [junit] ------------- Standard Error -----------------\n    [junit] NOTE: reproduce with: ant test -Dtestcase=TestIndexWriterOnDiskFull -Dtestmethod=testAddIndexOnDiskFull -Dtests.seed=-701a2f1db029fc68:-69e1d358129f80b8:-37e6e82cd17aa6e9 -Dtests.multiplier=3\n    [junit] NOTE: test params are: codec=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}, locale=ar_SD, timezone=Brazil/DeNoronha\n    [junit] NOTE: all tests run in this JVM:\n    [junit] [TestNumericTokenStream, TestFlex, TestFlushByRamOrCountsPolicy, TestIndexReaderCloneNorms, TestIndexWriterDelete, TestIndexWriterMerging, TestIndexWriterOnDiskFull]\n    [junit] NOTE: Linux 2.6.32-24-generic i386/Oracle Corporation 1.6.0_20 (32-bit)/cpus=1,threads=1,free=22929736,total=96641024\n    [junit] ------------- ---------------- ---------------\n    [junit] TEST org.apache.lucene.index.TestIndexWriterOnDiskFull FAILED\n{noformat}",
            "date": "2011-08-27T13:31:15.046+0000",
            "id": 0
        },
        {
            "author": "Robert Muir",
            "body": "At revision 1162298.",
            "date": "2011-08-27T13:32:43.981+0000",
            "id": 1
        },
        {
            "author": "Robert Muir",
            "body": "OK: seed reproduces if you 'svn up -r 1162298' first!",
            "date": "2011-08-27T13:33:55.397+0000",
            "id": 2
        },
        {
            "author": "Michael McCandless",
            "body": "OK I found the problem -- it's because we are incorrectly passing true instead of false, as the first arg to IOUtils.closeSafely in IW.copySegmentIntoCFS.  This then suppresses an exception (that corrupted the .cfe file being written), thus making the rest of the code think everything is fine...\n\nI looked at all other places we call this method and there were a few other cases.\n\nI think this is trappy -- instead of a boolean, I think we should rename IOUtils.closeSafely into 2 methods: closeSafelyDuringExc, and closeSafely.",
            "date": "2011-08-27T15:06:49.721+0000",
            "id": 3
        },
        {
            "author": "Michael McCandless",
            "body": "Patch, fixing the issue and the other places where we incorrectly passed true.\n\nBut I want to do another iter with the renaming...",
            "date": "2011-08-27T15:08:45.152+0000",
            "id": 4
        },
        {
            "author": "Michael McCandless",
            "body": "Actually I'll commit this fix first, and open a separate issue about not using a boolean here.",
            "date": "2011-08-27T15:12:10.139+0000",
            "id": 5
        },
        {
            "author": "Robert Muir",
            "body": "{quote}\nI think this is trappy \u2013 instead of a boolean, I think we should rename IOUtils.closeSafely into 2 methods: closeSafelyDuringExc, and closeSafely.\n{quote}\n\nSounds like the other one should be called .closeUnsafely...",
            "date": "2011-08-27T15:16:29.653+0000",
            "id": 6
        },
        {
            "author": "Michael McCandless",
            "body": "Fixed.\n\n3.x didn't have any problems; just test-only changes backported.",
            "date": "2011-08-27T15:33:53.438+0000",
            "id": 7
        }
    ],
    "component": "",
    "description": "looks like charlie cron created a corrupt index on disk full.. can't reproduce with the seed on this machine, i can try on that VM with the same environment and see if i have better luck.",
    "hasPatch": true,
    "hasScreenshot": false,
    "id": "LUCENE-3404",
    "issuetypeClassified": "BUG",
    "issuetypeTracker": "BUG",
    "priority": "Major",
    "product": "LUCENE",
    "project": "LUCENE",
    "summary": "testIWondiskfull checkindex failure",
    "systemSpecification": true,
    "version": ""
}